"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1420],{2989:(e,t,r)=>{r.d(t,{Du:()=>g,Hv:()=>d,JY:()=>h,Q3:()=>p,Tz:()=>y,WR:()=>o,W_:()=>m,ih:()=>v,p0:()=>u,vs:()=>f});var a=r(81242);r(93402);let n="/vehicles",i=e=>""===e||null==e?void 0:Number(e)||void 0,l=(e,t)=>{var r,a;return(null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.message)||(null==e?void 0:e.message)||t};function s(e){let t=(0,a.I)(e);return Array.isArray(t)?t:t&&Array.isArray(t.content)?t.content:[]}function c(e,t){if(Array.isArray(t))t.forEach(t=>e.append("files",t));else for(let r=0;r<t.length;r++){let a=t.item(r);a&&e.append("files",a)}}async function o(e){try{let{data:t}=await a.A.get(n,{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return s(t)}catch(e){throw Error(l(e,"Failed to fetch vehicles"))}}async function d(e){try{let{data:t}=await a.A.get("/vehicles/deleted",{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return s(t)}catch(e){throw Error(l(e,"Failed to fetch deleted vehicles"))}}async function u(e){try{let{data:t}=await a.A.get("".concat(n,"/").concat(e));return(0,a.I)(t)}catch(e){throw Error(l(e,"Vehicle not found"))}}async function m(e){try{let t={...e};delete t.id,"registeredKm"in t&&(t.registeredKm=i(t.registeredKm)),"totalKmDriven"in t&&(t.totalKmDriven=i(t.totalKmDriven)),"fuelEfficiency"in t&&(t.fuelEfficiency=i(t.fuelEfficiency));let{data:r}=await a.A.post(n,t);return(0,a.I)(r)}catch(e){throw Error(l(e,"Failed to add vehicle"))}}async function p(e,t){try{let r={...t};"registeredKm"in r&&(r.registeredKm=i(r.registeredKm)),"totalKmDriven"in r&&(r.totalKmDriven=i(r.totalKmDriven)),"fuelEfficiency"in r&&(r.fuelEfficiency=i(r.fuelEfficiency));let{data:l}=await a.A.put("".concat(n,"/").concat(e),r);return(0,a.I)(l)}catch(e){throw Error(l(e,"Failed to update vehicle"))}}async function v(e){try{await a.A.delete("".concat(n,"/").concat(e))}catch(e){throw Error(l(e,"Failed to delete vehicle"))}}async function h(e,t){let r=new FormData,l={...e};delete l.id,"registeredKm"in l&&(l.registeredKm=i(l.registeredKm)),"totalKmDriven"in l&&(l.totalKmDriven=i(l.totalKmDriven)),"fuelEfficiency"in l&&(l.fuelEfficiency=i(l.fuelEfficiency)),r.append("vehicle",JSON.stringify(l)),c(r,t);let{data:s}=await a.A.post("".concat(n,"/with-images"),r,{headers:{"Content-Type":"multipart/form-data"}});return(0,a.I)(s)}async function y(e){let{data:t}=await a.A.get("".concat(n,"/").concat(e,"/images"));return(0,a.I)(t)}async function g(e,t){let r=new FormData;c(r,t);let{data:i}=await a.A.post("".concat(n,"/").concat(e,"/images"),r,{headers:{"Content-Type":"multipart/form-data"}});return(0,a.I)(i)}async function f(e,t){await a.A.delete("".concat(n,"/").concat(e,"/images/").concat(t))}},8503:(e,t,r)=>{r.d(t,{H5:()=>o,IY:()=>d,UU:()=>s,cI:()=>u,gP:()=>m,z:()=>c});var a=r(81242);r(93402);let n="/drivers",i=(e,t)=>{var r,a;return(null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.message)||(null==e?void 0:e.message)||t};function l(e){let t=(0,a.I)(e);return Array.isArray(t)?t:t&&Array.isArray(t.content)?t.content:[]}async function s(e){try{let{data:t}=await a.A.get(n,{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return l(t)}catch(e){throw Error(i(e,"Failed to fetch drivers"))}}async function c(e){try{let{data:t}=await a.A.get("/drivers/deleted",{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return l(t)}catch(e){throw Error(i(e,"Failed to fetch deleted drivers"))}}async function o(e){try{let{data:t}=await a.A.get("".concat(n,"/").concat(e));return(0,a.I)(t)}catch(e){throw Error(i(e,"Driver not found"))}}async function d(e){try{let{data:t}=await a.A.post(n,e);return(0,a.I)(t)}catch(e){throw Error(i(e,"Failed to add driver"))}}async function u(e,t){try{let{data:r}=await a.A.put("".concat(n,"/").concat(e),t);return(0,a.I)(r)}catch(e){throw Error(i(e,"Failed to update driver"))}}async function m(e){try{await a.A.delete("".concat(n,"/").concat(e))}catch(e){throw Error(i(e,"Failed to delete driver"))}}},11924:(e,t,r)=>{r.d(t,{Cd:()=>h,Lh:()=>o,bB:()=>n,bk:()=>d,cK:()=>l,iq:()=>c,iv:()=>s,kM:()=>v,lm:()=>i,qd:()=>y,rg:()=>m,rr:()=>u,uK:()=>p});var a=r(81242);async function n(e){let{data:t}=await a.A.post("/usage-requests",e);return(0,a.I)(t)}async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:n}=await a.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:r}});return(0,a.I)(n)}async function l(){try{let{data:e}=await a.A.get("/usage-requests/all");return(0,a.I)(e)}catch(r){let{data:e}=await a.A.get("/usage-requests"),t=(0,a.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function s(e){try{let{data:t}=await a.A.get("/usage-requests/status/".concat(e));return(0,a.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function c(e){let{data:t}=await a.A.get("/usage-requests/".concat(e));return(0,a.I)(t)}let o=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),d=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),u=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),m=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function p(e,t){let r={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:n}=await a.A.post("/usage-requests/".concat(e,"/assign"),r);return(0,a.I)(n)}async function v(e,t){let r={};"number"==typeof t.exitOdometer&&(r.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==r.exitOdometer&&(r.exitOdometer=t.odometerStartKm);let n=[];t.remarks&&n.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&n.push(...t.exitManifest),n.length&&(r.exitManifest=n);let{data:i}=await a.A.post("/usage-requests/".concat(e,"/gate/exit"),r);return(0,a.I)(i)}async function h(e,t){let r={};"number"==typeof t.entryOdometer&&(r.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==r.entryOdometer&&(r.entryOdometer=t.odometerEndKm);let n=[];t.remarks&&n.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&n.push(...t.entryManifest),n.length&&(r.entryManifest=n);let{data:i}=await a.A.post("/usage-requests/".concat(e,"/gate/entry"),r);return(0,a.I)(i)}async function y(){let{data:e}=await a.A.get("/usage-requests/metrics");return(0,a.I)(e)}},21873:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},24947:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(71847).A)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},25695:(e,t,r)=>{r.d(t,{C:()=>i,M:()=>n});var a=r(81242);async function n(e){let{data:t}=await a.A.get("/availability/drivers",{params:e});return(0,a.I)(t)}async function i(e){let{data:t}=await a.A.get("/availability/vehicles",{params:e});return(0,a.I)(t)}},29502:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(71847).A)("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]])},71420:(e,t,r)=>{r.d(t,{A:()=>y});var a=r(95155),n=r(12115),i=r(65229),l=r(99265),s=r(29502),c=r(21873),o=r(24947),d=r(2989),u=r(8503),m=r(11924),p=r(25695);let v=e=>{if(!e)return"";let t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))return"";let r=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(r(t.getMonth()+1),"-").concat(r(t.getDate()),"T").concat(r(t.getHours()),":").concat(r(t.getMinutes()))},h=e=>e?(e.includes("T")?e.split("T")[1]:e).slice(0,5):"";function y(e){let{open:t,onClose:r,requestId:y,defaultValues:g,onAssigned:f,lockedReason:x}=e,[b,A]=(0,n.useState)([]),[w,N]=(0,n.useState)([]),[j,k]=(0,n.useState)([]),[I,C]=(0,n.useState)([]),[T,D]=(0,n.useState)(null),[E,q]=(0,n.useState)((null==g?void 0:g.vehicleNumber)||""),[S,O]=(0,n.useState)((null==g?void 0:g.driverName)||""),[K,M]=(0,n.useState)((null==g?void 0:g.driverPhone)||""),[F,z]=(0,n.useState)(""),[P,R]=(0,n.useState)(""),[U,V]=(0,n.useState)(""),[B,H]=(0,n.useState)(""),[_,J]=(0,n.useState)(!1),[W,L]=(0,n.useState)(null);if((0,n.useEffect)(()=>{t&&(L(null),(async()=>{try{let[e,t,r]=await Promise.all([(0,m.iq)(y).catch(()=>null),(0,d.WR)().catch(()=>[]),(0,u.UU)().catch(()=>[])]);D(e);let a=Array.isArray(t)?t:[],n=Array.isArray(r)?r:[];A(a),N(n),k(a),C(n)}catch(e){A([]),N([]),k([]),C([])}})())},[t,y]),(0,n.useEffect)(()=>{if(!t)return;let e=v((null==g?void 0:g.pickupAt)||(null==T?void 0:T.scheduledPickupAt)||((null==T?void 0:T.dateOfTravel)&&(null==T?void 0:T.timeFrom)?"".concat(T.dateOfTravel,"T").concat(T.timeFrom):null)),r=v((null==g?void 0:g.expectedReturnAt)||(null==T?void 0:T.scheduledReturnAt)||((null==T?void 0:T.returnDate)&&(null==T?void 0:T.timeTo)?"".concat(T.returnDate,"T").concat(T.timeTo):null)||((null==T?void 0:T.dateOfTravel)&&(null==T?void 0:T.timeTo)?"".concat(T.dateOfTravel,"T").concat(T.timeTo):null));q((null==g?void 0:g.vehicleNumber)||""),O((null==g?void 0:g.driverName)||""),M((null==g?void 0:g.driverPhone)||""),z(e||""),R(r||""),V((null==g?void 0:g.instructions)||""),H("")},[t,null==g?void 0:g.vehicleNumber,null==g?void 0:g.driverName,null==g?void 0:g.driverPhone,null==g?void 0:g.pickupAt,null==g?void 0:g.expectedReturnAt,null==g?void 0:g.instructions,null==T?void 0:T.id,null==T?void 0:T.scheduledPickupAt,null==T?void 0:T.scheduledReturnAt,null==T?void 0:T.dateOfTravel,null==T?void 0:T.returnDate,null==T?void 0:T.timeFrom,null==T?void 0:T.timeTo]),(0,n.useEffect)(()=>{if(!t)return;let e=(F?F.split("T")[0]:"")||(null==T?void 0:T.dateOfTravel),r=h(F)||(null==T?void 0:T.timeFrom),a=h(P)||(null==T?void 0:T.timeTo);if(!e){k(b),C(w);return}let n={date:e};r&&(n.from=5===r.length?"".concat(r,":00"):r),a&&(n.to=5===a.length?"".concat(a,":00"):a),Promise.all([(0,p.C)(n).catch(()=>[]),(0,p.M)(n).catch(()=>[])]).then(e=>{let[t,r]=e,a=new Set((t||[]).filter(e=>(e.busy||[]).some(e=>!(null==T?void 0:T.requestCode)||e.requestCode!==T.requestCode)).map(e=>(e.vehicleNumber||"").toUpperCase()).filter(Boolean)),n=new Set((r||[]).filter(e=>(e.busy||[]).some(e=>!(null==T?void 0:T.requestCode)||e.requestCode!==T.requestCode)).map(e=>(e.driverName||"").toUpperCase()).filter(Boolean));k((b||[]).filter(e=>!a.has((e.vehicleNumber||"").toUpperCase()))),C((w||[]).filter(e=>!n.has((e.name||"").toUpperCase())))}).catch(()=>{k(b),C(w)})},[t,F,P,b,w,null==T?void 0:T.dateOfTravel,null==T?void 0:T.timeFrom,null==T?void 0:T.timeTo,null==T?void 0:T.requestCode]),!t)return null;let Y=(()=>{let e=j.length?j:b;if(E&&!e.some(e=>e.vehicleNumber===E)){let t=b.find(e=>e.vehicleNumber===E);return t?[t,...e]:e}return e})(),G=(()=>{let e=I.length?I:w;if(S&&!e.some(e=>e.name===S)){let t=w.find(e=>e.name===S);return t?[t,...e]:e}return e})(),Q=T?T.returnDate?"".concat(T.dateOfTravel," → ").concat(T.returnDate):T.dateOfTravel||"—":"—",X=T?"".concat(T.timeFrom||"--:--"," – ").concat(T.timeTo||"--:--"):"—",Z=T?"".concat(T.fromLocation||"—"," → ").concat(T.toLocation||"—"):"—",$=async()=>{if(L(null),x)return void L(x);if(!E||!S||!F||!P)return void L("Please fill vehicle, driver, pickup and expected return.");let e=new Date(F),t=new Date(P);if(isNaN(e.getTime())||isNaN(t.getTime()))return void L("Invalid date/time values.");if(t<=e)return void L("Expected return must be after pickup.");if(!B.trim())return void L("Please confirm your password before saving changes.");J(!0);try{await (0,m.uK)(y,{vehicleNumber:E,driverName:S,driverPhone:K||void 0,pickupAt:e,expectedReturnAt:t,instructions:U||void 0}),null==f||f(),r()}catch(e){L((null==e?void 0:e.message)||"Failed to assign. Please try again.")}finally{J(!1)}},ee=e=>(0,a.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:e});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-4",onClick:r,children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 border-b bg-orange-50",children:[(0,a.jsx)("h3",{className:"font-bold text-orange-900",children:"Assign Vehicle & Driver"}),(0,a.jsx)("button",{className:"p-2 rounded hover:bg-orange-100",onClick:r,"aria-label":"Close",children:(0,a.jsx)(i.A,{size:18})})]}),x&&(0,a.jsx)("div",{className:"px-5 py-3 bg-red-50 border-b border-red-200 text-sm text-red-800",children:x}),(0,a.jsxs)("div",{className:"p-5 space-y-5",children:[T&&(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 grid grid-cols-1 md:grid-cols-3 gap-3 text-sm text-orange-900",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"text-xs uppercase tracking-wide text-orange-700 font-semibold",children:["Assign Vehicle • ",T.requestCode]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-orange-800",children:[(0,a.jsx)(l.A,{size:14})," ",(0,a.jsxs)("span",{children:[T.applicantName," (",T.employeeId,")"]})]}),(0,a.jsxs)("div",{className:"text-orange-700 text-xs",children:["Department: ",T.department||"—"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.A,{size:14}),(0,a.jsxs)("span",{children:["Travel Dates: ",Q]})]}),(0,a.jsxs)("div",{className:"text-orange-800 text-sm",children:["Time Window: ",X]}),T.overnight?(0,a.jsx)("div",{className:"text-xs text-emerald-700 font-semibold",children:"Overnight"}):null]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{size:14}),(0,a.jsx)("span",{children:Z})]}),(0,a.jsxs)("div",{className:"text-orange-800 text-sm truncate",children:["Purpose: ",T.officialDescription||"—"]}),(0,a.jsxs)("div",{className:"text-orange-700 text-xs",children:["Goods: ",T.goods||"—"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[ee("Pickup (date & time)"),(0,a.jsx)("input",{type:"datetime-local",className:"w-full border border-orange-200 rounded px-3 py-2",value:F,onChange:e=>!x&&z(e.target.value),disabled:!!x})]}),(0,a.jsxs)("div",{children:[ee("Expected Return"),(0,a.jsx)("input",{type:"datetime-local",className:"w-full border border-orange-200 rounded px-3 py-2",value:P,onChange:e=>!x&&R(e.target.value),disabled:!!x})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[ee("Instructions"),(0,a.jsx)("input",{className:"w-full border border-orange-200 rounded px-3 py-2",value:U,onChange:e=>!x&&V(e.target.value),placeholder:"Optional…",disabled:!!x})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:"Vehicle (available in this window)"}),(0,a.jsx)("input",{readOnly:!0,value:E||"Not selected",className:"w-full border border-orange-200 rounded px-3 py-2 mb-2 bg-white",disabled:!!x}),(0,a.jsxs)("div",{className:"max-h-64 overflow-auto border rounded",children:[(0,a.jsx)("select",{size:8,className:"w-full text-sm px-3 py-2 focus:outline-none",value:E,onChange:e=>!x&&q(e.target.value),disabled:!!x,children:Y.map(e=>{var t;return(0,a.jsxs)("option",{value:e.vehicleNumber,children:[e.vehicleNumber," — ",[e.vehicleType,e.brand,e.model].filter(Boolean).join(" ")]},String(null!=(t=e.id)?t:e.vehicleNumber))})}),!Y.length&&(0,a.jsx)("div",{className:"px-3 py-4 text-center text-gray-500 text-sm",children:"No vehicles"})]}),(0,a.jsxs)("p",{className:"text-[11px] text-gray-600 mt-1 flex items-center gap-1",children:[(0,a.jsx)(o.A,{size:12})," Selected: ",E||"—"]}),0===j.length&&b.length>0&&(0,a.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"All vehicles are busy for the selected time."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:"Driver (available in this window)"}),(0,a.jsx)("input",{readOnly:!0,value:S?"".concat(S).concat(K?" (".concat(K,")"):""):"Not selected",className:"w-full border border-orange-200 rounded px-3 py-2 mb-2 bg-white",disabled:!!x}),(0,a.jsxs)("div",{className:"max-h-64 overflow-auto border rounded",children:[(0,a.jsx)("select",{size:8,className:"w-full text-sm px-3 py-2 focus:outline-none",value:S,onChange:e=>{if(x)return;let t=w.find(t=>t.name===e.target.value);O(e.target.value),M((null==t?void 0:t.phone)||"")},disabled:!!x,children:G.map(e=>{var t;return(0,a.jsxs)("option",{value:e.name,children:[e.name," ",e.employeeId?"— ".concat(e.employeeId):""," ",e.phone?"(".concat(e.phone,")"):""]},null!=(t=e.employeeId)?t:e.name)})}),!G.length&&(0,a.jsx)("div",{className:"px-3 py-4 text-center text-gray-500 text-sm",children:"No drivers"})]}),(0,a.jsxs)("p",{className:"text-[11px] text-gray-600 mt-1 flex items-center gap-1",children:[(0,a.jsx)(l.A,{size:12})," Selected: ",S||"—"," ",K?"(".concat(K,")"):""]}),0===I.length&&w.length>0&&(0,a.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"All drivers are busy for the selected time."})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[ee("Confirm with your password to save changes"),(0,a.jsx)("input",{type:"password",className:"w-full border border-orange-200 rounded px-3 py-2",value:B,onChange:e=>H(e.target.value),placeholder:"Enter your account password",autoComplete:"new-password"}),W&&(0,a.jsx)("div",{className:"text-sm rounded border border-red-300 bg-red-50 text-red-800 px-3 py-2",children:W})]})]}),(0,a.jsxs)("div",{className:"px-5 py-3 border-t bg-orange-50 flex justify-end gap-2",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded border",onClick:r,children:"Cancel"}),(0,a.jsx)("button",{className:"px-4 py-2 rounded bg-orange-600 text-white disabled:opacity-60",onClick:$,disabled:_||!!x,children:_?"Assigning…":"Assign"})]})]})})}},93402:(e,t,r)=>{r.d(t,{mI:()=>i,ae:()=>l});var a=r(81242);let n=e=>{var t,r,a;return{id:e.id,entityType:"Vehicle"===e.entityType||"Driver"===e.entityType?e.entityType:"Vehicle",entityId:e.entityId,action:"Created"===e.action||"Updated"===e.action||"Deleted"===e.action?e.action:"Updated",previousData:null!=(t=e.previousJson)?t:null,newData:null!=(r=e.newJson)?r:null,performedBy:null!=(a=e.performedBy)?a:null,timestamp:e.timestamp}};async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t}=await a.A.get("/history/recent",{params:{size:e}});return(0,a.I)(t).map(n)}async function l(e,t){let{data:r}=await a.A.get("/history/".concat(e,"/").concat(t));return(0,a.I)(r).map(n)}},99265:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(71847).A)("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]])}}]);