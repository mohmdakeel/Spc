(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8708],{53060:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>F});var a=s(95155),t=s(12115),l=s(43566),n=s(36710),o=s(67097),i=s(5354),d=s(37621),c=s(4259),m=s(60049),u=s(11382),g=s(99947),x=s(20508),h=s(71847);let b=(0,h.A)("contact",[["path",{d:"M16 2v2",key:"scm5qe"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2",key:"1waht3"}],["path",{d:"M8 2v2",key:"pbkmx"}],["circle",{cx:"12",cy:"11",r:"3",key:"itu57m"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",key:"12vinp"}]]);var f=s(65993);let p=(0,h.A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var N=s(91169),j=s(42529),v=s(78874),y=s(86651),w=s(39867),C=s(309),A=s(57828),k=s(11010),E=s(71360),S=s(90368),P=s(27937);let D=e=>{if(null==e)return"—";if("string"==typeof e){let r=e.trim();return(0,u.ZD)(r.length?r:"—")}return(0,u.ZD)(String(e))};function F(){let{user:e,loading:r,refresh:s}=(0,c.A)(),h=(0,g.x)("cache:auth:employees")||[],[F,M]=(0,t.useState)(h),[R,I]=(0,t.useState)(!1),[O,U]=(0,t.useState)(!1),[B,L]=(0,t.useState)(!1),[T,q]=(0,t.useState)(1),[_,W]=(0,t.useState)({epfNo:"",fullName:"",nicNo:"",dateOfBirth:"",civilStatus:"",gender:"",race:"",religion:"",bloodGroup:"",permanentAddress:"",district:"",mobileNo:"",personalEmail:"",cardStatus:"",imageUrl:"",currentAddress:"",dsDivision:"",residencePhone:"",emergencyContact:"",workingStatus:"",department:"",attendanceNo:"",nameWithInitials:"",surname:""}),[z,G]=(0,t.useState)(null),[V,Y]=(0,t.useState)(!1),[Z,H]=(0,t.useState)(""),[J,$]=(0,t.useState)(""),[K,Q]=(0,t.useState)(!h.length),[X,ee]=(0,t.useState)(""),[er,es]=(0,t.useState)(1),[ea,et]=(0,t.useState)(10),[el,en]=(0,t.useState)(null),{canRead:eo,canCreate:ei,canUpdate:ed,canDelete:ec,canPrint:em}=(0,m.a)(),eu=X.trim().toLowerCase(),eg=(0,t.useMemo)(()=>eu?F.filter(e=>{var r,s,a,t,l;return(null==(r=e.epfNo)?void 0:r.toLowerCase().includes(eu))||(null==(s=e.fullName)?void 0:s.toLowerCase().includes(eu))||(null==(a=e.nicNo)?void 0:a.toLowerCase().includes(eu))||(null==(t=e.department)?void 0:t.toLowerCase().includes(eu))||(null==(l=e.mobileNo)?void 0:l.toLowerCase().includes(eu))}):F,[F,eu]);(0,t.useEffect)(()=>{es(1)},[eu,ea]);let ex=Math.max(1,Math.ceil(eg.length/ea)),eh=Math.min(er,ex),eb=(0,t.useMemo)(()=>{let e=(eh-1)*ea;return eg.slice(e,e+ea)},[eg,eh,ea]),ef=(0,a.jsx)("div",{className:"grid gap-3",children:Array.from({length:6}).map((e,r)=>(0,a.jsx)("div",{className:"h-12 rounded-lg bg-orange-100/60 animate-pulse"},r))}),ep=K&&0===F.length,eN=K&&F.length>0;(0,t.useEffect)(()=>{e&&eo&&(h.length&&M(h),ej({silent:!!h.length}))},[e,eo]);let ej=async e=>{(null==e?void 0:e.silent)||Q(!0),H("");try{let{data:e}=await d.A.get("/registrations"),r=Array.isArray(e)?e:[];M(r),(0,g.a)("cache:auth:employees",r)}catch(e){var r;(null==e||null==(r=e.response)?void 0:r.status)===403?H("Forbidden (403): your account does not have READ permission."):H("Failed to load employees")}finally{Q(!1)}},ev=e=>e&&!ed?void H("You do not have UPDATE permission."):e||ei?void(e?(L(!0),W({...e,dateOfBirth:e.dateOfBirth?new Date(e.dateOfBirth).toISOString().split("T")[0]:""}),G(e)):(L(!1),W({epfNo:"",fullName:"",nicNo:"",dateOfBirth:"",civilStatus:"",gender:"",race:"",religion:"",bloodGroup:"",permanentAddress:"",district:"",mobileNo:"",personalEmail:"",cardStatus:"",imageUrl:"",currentAddress:"",dsDivision:"",residencePhone:"",emergencyContact:"",workingStatus:"",department:"",attendanceNo:"",nameWithInitials:"",surname:""}),G(null)),en(null),q(1),I(!0),H("")):void H("You do not have CREATE permission."),ey=async e=>{try{let{data:r}=await d.A.get("/registrations/".concat(encodeURIComponent(e)));G(r),U(!0)}catch(e){var r;(null==e||null==(r=e.response)?void 0:r.status)===403?(H("Forbidden (403): your account does not have READ permission for this employee."),await s()):H("Failed to load employee details")}},ew=e=>{e.target.files&&e.target.files[0]&&en(e.target.files[0])},eC=async()=>{if(!_.epfNo||!_.fullName||!_.nicNo)return void H("EPF No, Full Name, and NIC No are required");try{let e=_.imageUrl;if(el)try{let r=new FormData;r.append("file",el);let{data:s}=await d.A.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}});e=s.url}catch(r){console.warn("Image upload failed, continuing without image",r),e=e||""}let r={..._,imageUrl:e};B&&z?await d.A.put("/registrations/".concat(encodeURIComponent(z.epfNo)),r):await d.A.post("/registrations",r),await ej(),I(!1),$(B?"Employee updated successfully!":"Employee created successfully!"),setTimeout(()=>$(""),3e3)}catch(t){var e,r,a;(null==t||null==(e=t.response)?void 0:e.status)===403?(H("Forbidden (403): insufficient permission (need CREATE/UPDATE)."),await s()):H((null==(a=t.response)||null==(r=a.data)?void 0:r.message)||"Failed to save employee")}},eA=async e=>{if(!ec)return void H("You do not have DELETE permission.");if(confirm("Are you sure you want to delete this employee?"))try{await d.A.delete("/registrations/".concat(encodeURIComponent(e))),await ej(),$("Employee deleted successfully!"),setTimeout(()=>$(""),3e3)}catch(e){var r;(null==e||null==(r=e.response)?void 0:r.status)===403?(H("Forbidden (403): need DELETE permission."),await s()):H("Failed to delete employee")}};return r||!e?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-orange-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your workspace…"})]})}):e&&!eo?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100 p-6",children:(0,a.jsxs)("div",{className:"bg-white border border-orange-200 rounded-2xl shadow-xl p-8 max-w-md text-center space-y-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Access restricted"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"You do not have permission to view employee records. Please contact an administrator if you believe this is a mistake."})]})}):(0,a.jsxs)("div",{className:"auth-shell",children:[(0,a.jsx)(n.A,{user:e,isOpen:V,onClose:()=>Y(!1)}),(0,a.jsxs)("div",{className:"auth-shell__main overflow-hidden",children:[(0,a.jsx)(l.A,{user:e}),(0,a.jsxs)("main",{className:"auth-shell__content",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(N.A,{className:"w-8 h-8 text-orange-600"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Employee Management"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage employee records and information"})]}),J&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,a.jsx)(j.A,{className:"mr-2 text-green-600"}),(0,a.jsx)("span",{className:"text-green-800",children:J})]}),Z&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,a.jsx)(v.A,{className:"mr-2 text-red-600"}),(0,a.jsx)("span",{className:"text-red-800",children:Z})]}),(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-orange-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-orange-200 bg-orange-50",children:(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-orange-600"}),"System Employees"]})}),ep?(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),"Loading employees..."]}),ef]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-4 border-t border-b border-gray-200 bg-white flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"relative w-full md:max-w-sm",children:[(0,a.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search employees...",value:X,onChange:e=>ee(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[eN&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-orange-700",children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"}),"Refreshing"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Rows per page"}),(0,a.jsxs)("select",{value:ea,onChange:e=>et(Number(e.target.value)),className:"py-2 px-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,a.jsx)("option",{value:10,children:"10"}),(0,a.jsx)("option",{value:15,children:"15"})]})]})]})]}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)(i.B,{require:"CREATE",children:(0,a.jsxs)("button",{onClick:()=>ev(),className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors text-sm font-medium",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Add Employee"]})}),(0,a.jsx)(i.B,{require:"PRINT",children:(0,a.jsxs)("button",{onClick:()=>{if(0===F.length)return void H("No data to export");!function(e,r){var s;if(!e||0===e.length)return;let a=Object.keys(null!=(s=e[0])?s:{epfNo:"",fullName:""}),t=new Blob([[a.join(","),...e.map(e=>a.map(r=>{var s;return JSON.stringify(null!=(s=e[r])?s:"")}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.href=URL.createObjectURL(t),l.download=r,l.click()}(F,"employees.csv")},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[(0,a.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Export CSV"]})}),em&&(0,a.jsxs)("button",{onClick:()=>{var r;if(!em)return void H("You do not have PRINT permission.");let s=eg.map((e,r)=>"\n        <tr>\n          <td>".concat(D(r+1),"</td>\n          <td>").concat(D(e.epfNo),"</td>\n          <td>").concat(D(e.fullName),"</td>\n          <td>").concat(D(e.department),"</td>\n          <td>").concat(D(e.mobileNo),"</td>\n          <td>").concat(D(e.personalEmail),"</td>\n        </tr>\n      ")).join(""),a=eg.length?'<table class="spc-table">\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>EPF No</th>\n              <th>Full Name</th>\n              <th>Department</th>\n              <th>Mobile</th>\n              <th>Email</th>\n            </tr>\n          </thead>\n          <tbody>'.concat(s,"</tbody>\n        </table>"):'<div class="spc-empty">No employee records match the current filters.</div>';(0,u.dq)({title:"Employee Register",subtitle:eg.length?"Records shown: ".concat(eg.length):void 0,contentHtml:a,printedBy:(null==e||null==(r=e.fullName)?void 0:r.trim())||(null==e?void 0:e.username)||void 0})},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 mr-2"}),"Print"]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-orange-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-gray-700",children:"EPF No"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-gray-700",children:"Full Name"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-gray-700",children:"Mobile No"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-gray-700",children:"Emergency Contact"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-gray-700",children:"Department"}),(0,a.jsx)("th",{className:"p-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[eb.map(e=>{var r;return(0,a.jsxs)("tr",{className:"hover:bg-orange-50 transition-colors",children:[(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.epfNo})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("div",{className:"text-gray-900",children:e.fullName})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("div",{className:"text-gray-600",children:e.mobileNo||"N/A"})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("div",{className:"text-gray-600",children:e.emergencyContact||"N/A"})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)("div",{className:"text-gray-600",children:e.department||"N/A"})}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[eo&&(0,a.jsxs)("button",{onClick:()=>ey(e.epfNo),className:"flex items-center px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 mr-1"}),"View"]}),ed&&(0,a.jsxs)("button",{onClick:()=>ev(e),className:"flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,a.jsx)(i.B,{require:"DELETE",children:(0,a.jsxs)("button",{onClick:()=>eA(e.epfNo),className:"flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[(0,a.jsx)(E.A,{className:"w-4 h-4 mr-1"}),"Delete"]})})]})})]},null!=(r=e.id)?r:e.epfNo)}),0===eg.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"p-6 text-center text-gray-500",children:X?"No matching employees found":"No employees found"})})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border-t border-gray-200 text-sm bg-white",children:[(0,a.jsxs)("div",{className:"text-gray-600 mb-3 sm:mb-0",children:["Page ",eh," / ",ex," • Showing"," ",(0,a.jsx)("span",{className:"font-semibold",children:eb.length})," of"," ",(0,a.jsx)("span",{className:"font-semibold",children:eg.length})," employees"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>es(e=>Math.max(1,e-1)),disabled:1===eh,className:"flex items-center px-3 py-2 rounded-lg border text-sm ".concat(1===eh?"text-gray-400 border-gray-200 bg-gray-50 cursor-not-allowed":"text-gray-700 border-gray-300 bg-white hover:bg-gray-100"),children:[(0,a.jsx)(S.A,{className:"w-4 h-4 mr-1"}),"Prev"]}),(0,a.jsxs)("button",{onClick:()=>es(e=>Math.min(ex,e+1)),disabled:eh===ex,className:"flex items-center px-3 py-2 rounded-lg border text-sm ".concat(eh===ex?"text-gray-400 border-gray-200 bg-gray-50 cursor-not-allowed":"text-gray-700 border-gray-300 bg-white hover:bg-gray-100"),children:["Next",(0,a.jsx)(P.A,{className:"w-4 h-4 ml-1"})]})]})]})]})]})})}),(0,a.jsxs)(o.A,{isOpen:R,onClose:()=>I(!1),title:B?"Edit Employee":"Add New Employee",onSubmit:4===T?eC:void 0,submitText:B?"Update Employee":"Create Employee",size:"xl",loading:K,showFooter:!1,children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-3",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(T>=e?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"),children:e}),(0,a.jsxs)("span",{className:"text-xs mt-2 text-gray-600 text-center",children:[1===e&&"Basic Info",2===e&&"Personal",3===e&&"Address",4===e&&"Employment"]})]},e))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-4 left-0 right-0 h-0.5 bg-gray-200 -z-10"}),(0,a.jsx)("div",{className:"absolute top-4 left-0 h-0.5 bg-orange-600 -z-10 transition-all duration-300",style:{width:"".concat((T-1)/3*100,"%")}})]})]}),(()=>{switch(T){case 1:var e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(x.A,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"EPF Number *"}),(0,a.jsx)("input",{name:"epfNo",placeholder:"EPF number",value:_.epfNo,onChange:e=>W({..._,epfNo:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0,disabled:B})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,a.jsx)("input",{name:"fullName",placeholder:"Full name",value:_.fullName,onChange:e=>W({..._,fullName:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NIC Number *"}),(0,a.jsx)("input",{name:"nicNo",placeholder:"NIC number",value:null!=(e=_.nicNo)?e:"",onChange:e=>W({..._,nicNo:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),(0,a.jsx)("input",{type:"date",name:"dateOfBirth",value:_.dateOfBirth,onChange:e=>W({..._,dateOfBirth:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Civil Status"}),(0,a.jsxs)("select",{name:"civilStatus",value:_.civilStatus,onChange:e=>W({..._,civilStatus:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,a.jsx)("option",{value:"",children:"Select"}),(0,a.jsx)("option",{value:"Single",children:"Single"}),(0,a.jsx)("option",{value:"Married",children:"Married"}),(0,a.jsx)("option",{value:"Divorced",children:"Divorced"}),(0,a.jsx)("option",{value:"Widowed",children:"Widowed"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),(0,a.jsxs)("select",{name:"gender",value:_.gender,onChange:e=>W({..._,gender:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,a.jsx)("option",{value:"",children:"Select"}),(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"})]})]})]})]});case 2:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(b,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name with Initials"}),(0,a.jsx)("input",{name:"nameWithInitials",placeholder:"Name with initials",value:_.nameWithInitials,onChange:e=>W({..._,nameWithInitials:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Surname"}),(0,a.jsx)("input",{name:"surname",placeholder:"Surname",value:_.surname,onChange:e=>W({..._,surname:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Race"}),(0,a.jsx)("input",{name:"race",placeholder:"Race",value:_.race,onChange:e=>W({..._,race:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Religion"}),(0,a.jsx)("input",{name:"religion",placeholder:"Religion",value:_.religion,onChange:e=>W({..._,religion:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),(0,a.jsx)("input",{name:"bloodGroup",placeholder:"Blood group",value:_.bloodGroup,onChange:e=>W({..._,bloodGroup:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number"}),(0,a.jsx)("input",{name:"mobileNo",placeholder:"Mobile number",value:_.mobileNo,onChange:e=>W({..._,mobileNo:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Personal Email"}),(0,a.jsx)("input",{name:"personalEmail",placeholder:"Personal email",value:_.personalEmail,onChange:e=>W({..._,personalEmail:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact"}),(0,a.jsx)("input",{name:"emergencyContact",placeholder:"Emergency contact",value:_.emergencyContact,onChange:e=>W({..._,emergencyContact:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Photo"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:ew,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"}),(el||_.imageUrl)&&(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-orange-300 bg-orange-50 flex items-center justify-center",children:(0,a.jsx)("img",{src:el?URL.createObjectURL(el):_.imageUrl||"",alt:"Preview",className:"w-full h-full object-cover"})}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Image Preview"})]})]})]})]});case 3:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(f.A,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Address Information"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permanent Address"}),(0,a.jsx)("input",{name:"permanentAddress",placeholder:"Permanent address",value:_.permanentAddress,onChange:e=>W({..._,permanentAddress:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),(0,a.jsx)("input",{name:"district",placeholder:"District",value:_.district,onChange:e=>W({..._,district:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DS Division"}),(0,a.jsx)("input",{name:"dsDivision",placeholder:"DS division",value:_.dsDivision,onChange:e=>W({..._,dsDivision:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Address"}),(0,a.jsx)("input",{name:"currentAddress",placeholder:"Current address",value:_.currentAddress,onChange:e=>W({..._,currentAddress:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Residence Phone"}),(0,a.jsx)("input",{name:"residencePhone",placeholder:"Residence phone",value:_.residencePhone,onChange:e=>W({..._,residencePhone:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]})]});case 4:return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(p,{className:"w-5 h-5 text-orange-600"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Employment Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attendance Number"}),(0,a.jsx)("input",{name:"attendanceNo",placeholder:"Attendance number",value:_.attendanceNo,onChange:e=>W({..._,attendanceNo:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),(0,a.jsx)("input",{name:"department",placeholder:"Department",value:_.department,onChange:e=>W({..._,department:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Status"}),(0,a.jsx)("input",{name:"workingStatus",placeholder:"Working status",value:_.workingStatus,onChange:e=>W({..._,workingStatus:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Status"}),(0,a.jsx)("input",{name:"cardStatus",placeholder:"Card status",value:_.cardStatus,onChange:e=>W({..._,cardStatus:e.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-orange-800 mb-1",children:"Review Information"}),(0,a.jsx)("p",{className:"text-sm text-orange-700",children:"Please review all information before submitting."})]})]});default:return null}})(),(0,a.jsxs)("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>{q(e=>e-1),H("")},disabled:1===T,className:"flex items-center px-4 py-2 rounded-lg transition-colors ".concat(1===T?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[(0,a.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Previous"]}),T<4?(0,a.jsxs)("button",{onClick:()=>{if(1===T&&(!_.epfNo||!_.fullName||!_.nicNo))return void H("EPF No, Full Name, and NIC No are required");q(e=>e+1),H("")},className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:["Next",(0,a.jsx)(P.A,{className:"w-4 h-4 ml-2"})]}):(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:eC,disabled:K,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed transition-colors",children:K?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{className:"w-4 h-4 mr-2"}),B?"Update Employee":"Create Employee"]})})]})]})]}),(0,a.jsx)(o.A,{isOpen:O,onClose:()=>U(!1),title:"Employee Details",size:"lg",showFooter:!1,children:z&&(0,a.jsxs)("div",{className:"space-y-6",children:[z.imageUrl&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("img",{src:z.imageUrl,alt:"Profile",className:"w-24 h-24 object-cover rounded-full border-4 border-orange-200"})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto",children:Object.entries(z).map(e=>{let[r,s]=e;return s&&!["id","imageUrl"].includes(r)&&(0,a.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-orange-700 capitalize mb-1",children:r.replace(/([A-Z])/g," $1").toLowerCase()}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:s||"N/A"})]},r)})})]})}),(0,a.jsx)("button",{onClick:()=>Y(!0),className:"md:hidden fixed bottom-6 right-6 w-14 h-14 bg-orange-600 text-white rounded-full shadow-lg hover:bg-orange-700 transition-all flex items-center justify-center z-40",children:(0,a.jsx)("span",{className:"text-lg font-bold",children:"☰"})})]})]})]})}},57828:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(71847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},71360:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(71847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},75215:(e,r,s)=>{Promise.resolve().then(s.bind(s,53060))}},e=>{e.O(0,[5125,6394,2619,9447,3566,9022,8441,1255,7358],()=>e(e.s=75215)),_N_E=e.O()}]);