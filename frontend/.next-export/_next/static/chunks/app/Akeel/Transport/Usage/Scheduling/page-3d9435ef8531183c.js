(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1412],{680:(e,s,t)=>{Promise.resolve().then(t.bind(t,6059))},6059:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(95155),a=t(12115),n=t(12008),l=t(78827),i=t(7640),d=t(71420),o=t(11924),c=t(6257);let x=e=>null==e||""===e?"—":e;function h(){var e,s,t;let[h,m]=(0,a.useState)([]),[u,g]=(0,a.useState)(""),[p,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(!0),f=async()=>{N(!0);try{let e=await (0,o.iv)("APPROVED");m(e||[])}catch(e){n.oR.error(e instanceof Error?e.message:"Failed to load approved requests"),m([])}finally{N(!1)}};(0,a.useEffect)(()=>{f()},[]);let b=(0,a.useMemo)(()=>{let e=u.trim().toLowerCase();return e?h.filter(s=>[s.requestCode,s.applicantName,s.employeeId,s.department,s.fromLocation,s.toLocation,s.assignedVehicleNumber,s.assignedDriverName].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(e)):h},[h,u]);return(0,r.jsxs)("div",{className:"min-h-screen bg-orange-50 p-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-orange-200 p-4 space-y-3 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Assign Vehicle"}),(0,r.jsx)("p",{className:"text-sm text-orange-700",children:"Approved requests ready for vehicle/driver assignment."})]}),(0,r.jsx)("button",{className:"px-3 py-2 rounded bg-orange-600 text-white text-sm font-semibold",onClick:f,children:j?"Loading…":"Refresh"})]}),(0,r.jsx)(l.A,{value:u,onChange:g,placeholder:"Search code, applicant, route, vehicle, driver…"}),(0,r.jsx)("div",{className:"mt-3 overflow-x-auto rounded-lg border border-orange-100",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-orange-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)(i.Th,{children:"Code"}),(0,r.jsx)(i.Th,{children:"Applicant"}),(0,r.jsx)(i.Th,{children:"Dept"}),(0,r.jsx)(i.Th,{children:"Route / Travel"}),(0,r.jsx)(i.Th,{children:"Status"}),(0,r.jsx)(i.Th,{children:"Current Assignment"}),(0,r.jsx)(i.Th,{className:"text-center",children:"Actions"})]})}),(0,r.jsxs)("tbody",{className:"divide-y",children:[b.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-orange-50",children:[(0,r.jsx)(i.Td,{className:"font-semibold text-orange-900",children:x(e.requestCode)}),(0,r.jsxs)(i.Td,{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:x(e.applicantName)}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:["Emp ID: ",x(e.employeeId)]})]}),(0,r.jsx)(i.Td,{children:x(e.department)}),(0,r.jsxs)(i.Td,{children:[(0,r.jsxs)("div",{className:"font-medium",children:[x(e.fromLocation)," → ",x(e.toLocation)]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[x(e.dateOfTravel)," • ",x(e.timeFrom)," - ",x(e.timeTo)]})]}),(0,r.jsx)(i.Td,{children:x(e.status)}),(0,r.jsxs)(i.Td,{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900",children:x(e.assignedVehicleNumber)}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:x(e.assignedDriverName)}),e.assignedDriverPhone&&(0,r.jsx)("div",{className:"text-[11px] text-gray-500",children:e.assignedDriverPhone})]}),(0,r.jsx)(i.Td,{className:"text-center",children:(0,r.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[(0,r.jsx)("button",{className:"px-3 py-1 rounded bg-orange-600 text-white text-sm font-semibold",onClick:()=>v(e),children:"Assign / Edit"}),(0,r.jsx)("button",{className:"px-3 py-1 rounded bg-green-600 text-white text-sm font-semibold",onClick:()=>(0,c.du)(e),children:"Print Slip"})]})})]},e.id)),!b.length&&(0,r.jsx)("tr",{children:(0,r.jsx)(i.Td,{colSpan:7,className:"text-center text-gray-500 py-6",children:j?"Loading…":"No approved requests"})})]})]})})]}),p&&(0,r.jsx)(d.A,{open:!0,onClose:()=>v(null),requestId:p.id,defaultValues:{vehicleNumber:null!=(e=p.assignedVehicleNumber)?e:"",driverName:null!=(s=p.assignedDriverName)?s:"",driverPhone:null!=(t=p.assignedDriverPhone)?t:""},onAssigned:()=>{n.oR.success("Assignment saved"),v(null),f()}})]})}},78827:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(95155);t(12115);var a=t(86651),n=t(65229);function l(e){let{value:s,onChange:t,placeholder:l="Search…",className:i=""}=e;return(0,r.jsxs)("div",{className:"relative ".concat(i),children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(a.A,{size:18,className:"text-orange-500"})}),(0,r.jsx)("input",{value:s,onChange:e=>t(e.target.value),placeholder:l,autoComplete:"off",className:"w-full border border-orange-200 rounded-xl px-10 py-3 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-orange-400 text-sm bg-white placeholder-orange-400/70 text-orange-900 font-medium transition-all duration-200 shadow-sm hover:shadow-md"}),s&&(0,r.jsx)("button",{onClick:()=>t(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-orange-100 rounded-r-xl transition-colors","aria-label":"Clear search",children:(0,r.jsx)(n.A,{size:18,className:"text-orange-500 hover:text-orange-700"})})]})}}},e=>{e.O(0,[5125,970,6737,1420,8441,1255,7358],()=>e(e.s=680)),_N_E=e.O()}]);