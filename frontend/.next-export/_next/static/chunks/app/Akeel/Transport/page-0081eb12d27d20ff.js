(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1485],{2989:(e,t,r)=>{"use strict";r.d(t,{Du:()=>p,Hv:()=>u,JY:()=>y,Q3:()=>m,Tz:()=>f,WR:()=>c,W_:()=>h,ih:()=>g,p0:()=>d,vs:()=>v});var a=r(81242);r(93402);let n="/vehicles",s=e=>""===e||null==e?void 0:Number(e)||void 0,l=(e,t)=>{var r,a;return(null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.message)||(null==e?void 0:e.message)||t};function i(e){let t=(0,a.I)(e);return Array.isArray(t)?t:t&&Array.isArray(t.content)?t.content:[]}function o(e,t){if(Array.isArray(t))t.forEach(t=>e.append("files",t));else for(let r=0;r<t.length;r++){let a=t.item(r);a&&e.append("files",a)}}async function c(e){try{let{data:t}=await a.A.get(n,{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return i(t)}catch(e){throw Error(l(e,"Failed to fetch vehicles"))}}async function u(e){try{let{data:t}=await a.A.get("/vehicles/deleted",{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return i(t)}catch(e){throw Error(l(e,"Failed to fetch deleted vehicles"))}}async function d(e){try{let{data:t}=await a.A.get("".concat(n,"/").concat(e));return(0,a.I)(t)}catch(e){throw Error(l(e,"Vehicle not found"))}}async function h(e){try{let t={...e};delete t.id,"registeredKm"in t&&(t.registeredKm=s(t.registeredKm)),"totalKmDriven"in t&&(t.totalKmDriven=s(t.totalKmDriven)),"fuelEfficiency"in t&&(t.fuelEfficiency=s(t.fuelEfficiency));let{data:r}=await a.A.post(n,t);return(0,a.I)(r)}catch(e){throw Error(l(e,"Failed to add vehicle"))}}async function m(e,t){try{let r={...t};"registeredKm"in r&&(r.registeredKm=s(r.registeredKm)),"totalKmDriven"in r&&(r.totalKmDriven=s(r.totalKmDriven)),"fuelEfficiency"in r&&(r.fuelEfficiency=s(r.fuelEfficiency));let{data:l}=await a.A.put("".concat(n,"/").concat(e),r);return(0,a.I)(l)}catch(e){throw Error(l(e,"Failed to update vehicle"))}}async function g(e){try{await a.A.delete("".concat(n,"/").concat(e))}catch(e){throw Error(l(e,"Failed to delete vehicle"))}}async function y(e,t){let r=new FormData,l={...e};delete l.id,"registeredKm"in l&&(l.registeredKm=s(l.registeredKm)),"totalKmDriven"in l&&(l.totalKmDriven=s(l.totalKmDriven)),"fuelEfficiency"in l&&(l.fuelEfficiency=s(l.fuelEfficiency)),r.append("vehicle",JSON.stringify(l)),o(r,t);let{data:i}=await a.A.post("".concat(n,"/with-images"),r,{headers:{"Content-Type":"multipart/form-data"}});return(0,a.I)(i)}async function f(e){let{data:t}=await a.A.get("".concat(n,"/").concat(e,"/images"));return(0,a.I)(t)}async function p(e,t){let r=new FormData;o(r,t);let{data:s}=await a.A.post("".concat(n,"/").concat(e,"/images"),r,{headers:{"Content-Type":"multipart/form-data"}});return(0,a.I)(s)}async function v(e,t){await a.A.delete("".concat(n,"/").concat(e,"/images/").concat(t))}},4259:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(12115),n=r(68209),s=r(20063);let l=["/login","/_error","/403"],i="auth:user-cache",o=()=>{try{let e=window.sessionStorage.getItem(i);if(!e)return null;let t=JSON.parse(e);if(!(null==t?void 0:t.user)||!(null==t?void 0:t.ts)||Date.now()-t.ts>3e5)return null;return t.user}catch(e){return null}},c=e=>{try{e?window.sessionStorage.setItem(i,JSON.stringify({user:e,ts:Date.now()})):window.sessionStorage.removeItem(i)}catch(e){}},u=()=>{let e=o(),[t,r]=(0,a.useState)(e),[i,u]=(0,a.useState)(!e),[d,h]=(0,a.useState)(null),m=(0,s.useRouter)(),g=(0,s.usePathname)(),y=(0,a.useRef)(!1),f=e=>{y.current&&(r(e),c(e))};(0,a.useEffect)(()=>{y.current=!0;let e=!1,t=l.some(e=>null==g?void 0:g.startsWith(e)),r=()=>{null!=g&&g.startsWith("/login")||m.replace("/login")};return t?(u(!1),h(null),()=>{y.current=!1,e=!0}):((async()=>{h(null);let t=o();t&&f(t);let a=!t;a&&u(!0);try{let t=await (0,n.me)();if(e||!y.current)return;if(!t){f(null),h(null),c(null),(0,n.bC)(),r();return}f(t),h(null),(0,n.bC)()}catch(t){var s,l;if(console.error("Auth check failed:",t),e||!y.current)return;h((null==t||null==(l=t.response)||null==(s=l.data)?void 0:s.message)||(null==t?void 0:t.message)||"Authentication failed"),f(null),c(null),(0,n.bC)(),r()}finally{!e&&y.current&&a&&u(!1)}})(),()=>{e=!0,y.current=!1})},[g,m]);let p=async()=>{if(!y.current)return null;u(!0),h(null);try{let e=await (0,n.me)();if(!y.current)return null;if(!e)return f(null),h("Session expired. Please sign in again."),(0,n.bC)(),(null==g?void 0:g.startsWith("/login"))||m.replace("/login"),null;return(0,n.bC)(),f(e),h(null),e}catch(r){var e,t;throw h((null==(t=r.response)||null==(e=t.data)?void 0:e.message)||"Failed to refresh user data"),r}finally{u(!1)}};return(0,a.useEffect)(()=>{(null==t?void 0:t.username)?window.localStorage.setItem("username",t.username):window.localStorage.removeItem("username")},[null==t?void 0:t.username]),{user:t,setUser:f,loading:i,error:d,refresh:p,hasRole:e=>{if(!(null==t?void 0:t.roles))return!1;let r=Array.isArray(e)?e:[e],a=t.roles.map(e=>e.toUpperCase());return r.some(e=>a.includes(e.toUpperCase()))},can:e=>{if(!(null==t?void 0:t.permissions))return!1;let r=Array.isArray(e)?e:[e];return t.permissions.some(e=>r.includes(e))},hasAnyRole:()=>!!((null==t?void 0:t.roles)&&t.roles.length>0)}}},8503:(e,t,r)=>{"use strict";r.d(t,{H5:()=>c,IY:()=>u,UU:()=>i,cI:()=>d,gP:()=>h,z:()=>o});var a=r(81242);r(93402);let n="/drivers",s=(e,t)=>{var r,a;return(null==e||null==(a=e.response)||null==(r=a.data)?void 0:r.message)||(null==e?void 0:e.message)||t};function l(e){let t=(0,a.I)(e);return Array.isArray(t)?t:t&&Array.isArray(t.content)?t.content:[]}async function i(e){try{let{data:t}=await a.A.get(n,{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return l(t)}catch(e){throw Error(s(e,"Failed to fetch drivers"))}}async function o(e){try{let{data:t}=await a.A.get("/drivers/deleted",{params:{page:0,size:1e3,...(null==e?void 0:e.trim())?{search:e.trim()}:{}}});return l(t)}catch(e){throw Error(s(e,"Failed to fetch deleted drivers"))}}async function c(e){try{let{data:t}=await a.A.get("".concat(n,"/").concat(e));return(0,a.I)(t)}catch(e){throw Error(s(e,"Driver not found"))}}async function u(e){try{let{data:t}=await a.A.post(n,e);return(0,a.I)(t)}catch(e){throw Error(s(e,"Failed to add driver"))}}async function d(e,t){try{let{data:r}=await a.A.put("".concat(n,"/").concat(e),t);return(0,a.I)(r)}catch(e){throw Error(s(e,"Failed to update driver"))}}async function h(e){try{await a.A.delete("".concat(n,"/").concat(e))}catch(e){throw Error(s(e,"Failed to delete driver"))}}},15870:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},16485:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},20508:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21873:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},26848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(95155),n=r(12115),s=r(52619),l=r.n(s),i=r(46398),o=r(20508),c=r(54485),u=r(16485),d=r(21873),h=r(15870),m=r(80598),g=r(12008),y=r(4259),f=r(2989),p=r(8503);function v(){var e,t;let{user:r,can:s,hasRole:v}=(0,y.A)(),[A,w]=(0,n.useState)([]),[x,b]=(0,n.useState)([]),[k,N]=(0,n.useState)(!0),E=v(["ADMIN"]),j=v(["TRANSPORT_ADMIN"]),T=v(["TRANSPORT"]),I=s(["CREATE"]),S=s(["UPDATE"]),C=s(["PRINT"]);(0,n.useEffect)(()=>{(async()=>{N(!0);try{let[e,t]=await Promise.all([(0,f.WR)(),(0,p.UU)()]);w(Array.isArray(e)?e:[]),b(Array.isArray(t)?t:[])}catch(e){g.oR.error(e instanceof Error?e.message:"Failed to load dashboard data"),w([]),b([])}finally{N(!1)}})()},[]);let P=A.length,D=x.length,R=(0,n.useMemo)(()=>A.filter(e=>"AVAILABLE"===e.status).length,[A]),M=(0,n.useMemo)(()=>x.filter(e=>"ACTIVE"===e.status).length,[x]),_=[{key:"vehicles",title:"Manage Vehicles",description:I||S?"View, add, or edit vehicle records":"View vehicle records (read-only)",link:"/Akeel/Transport/Vehicle",icon:(0,a.jsx)(i.A,{size:32,className:"text-orange-600"}),show:E||j||T},{key:"drivers",title:"Manage Drivers",description:I||S?"View, add, or edit driver records":"View driver records (read-only)",link:"/Akeel/Transport/Driver",icon:(0,a.jsx)(o.A,{size:32,className:"text-orange-600"}),show:E||j||T},{key:"history",title:"Change History",description:"View audit logs and change history",link:"/Akeel/Transport/History",icon:(0,a.jsx)(c.A,{size:32,className:"text-orange-600"}),show:C},{key:"scheduling",title:"Scheduling",description:"Manage vehicle schedules and assignments",link:"/Akeel/Transport/Scheduling",icon:(0,a.jsx)(u.A,{size:32,className:"text-orange-600"}),show:E||j||I},{key:"tracking",title:"GPS Tracking",description:"Track vehicle locations in real-time",link:"/Akeel/Transport/Tracking",icon:(0,a.jsx)(d.A,{size:32,className:"text-orange-600"}),show:E||j||T},{key:"settings",title:"Settings",description:"Configure transport management settings",link:"/Akeel/Transport/Settings",icon:(0,a.jsx)(h.A,{size:32,className:"text-orange-600"}),show:E||j}].filter(e=>e.show),O=[{key:"vehicles",title:"Total Vehicles",value:k?"—":P,note:"Active (non-deleted) vehicles",icon:i.A,accent:"bg-orange-100 text-orange-700",badgeClass:"bg-orange-50 text-orange-700 border border-orange-100",badge:"Vehicles"},{key:"available-vehicles",title:"Available Vehicles",value:k?"—":R,note:"Status = AVAILABLE",icon:m.A,accent:"bg-green-100 text-green-700",badgeClass:"bg-green-50 text-green-700 border border-green-100",badge:"Available"},{key:"drivers",title:"Total Drivers",value:k?"—":D,note:"Active (non-deleted) drivers",icon:o.A,accent:"bg-orange-100 text-orange-700",badgeClass:"bg-orange-50 text-orange-700 border border-orange-100",badge:"Drivers"},{key:"active-drivers",title:"Available Drivers",value:k?"—":M,note:"Status = ACTIVE",icon:o.A,accent:"bg-emerald-100 text-emerald-700",badgeClass:"bg-emerald-50 text-emerald-700 border border-emerald-100",badge:"Available"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Transport Management Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage all transport operations from a single dashboard"})]}),r&&(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white/70 px-3 py-2 rounded-lg border border-orange-100 shadow-sm",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-800",children:null!=(t=r.fullName||r.username)?t:"User"}),(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsx)("span",{className:"text-xs text-orange-700 bg-orange-50 px-2 py-1 rounded-full border border-orange-100",children:(null==(e=r.roles)?void 0:e.join(", "))||"Roles"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:O.map(e=>{let t=e.icon;return(0,a.jsxs)("div",{className:"auth-card p-5 shadow-sm border border-orange-100/60",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.accent),children:(0,a.jsx)(t,{className:"w-6 h-6"})}),(0,a.jsx)("span",{className:"text-xs font-semibold px-2 py-1 rounded-full ".concat(e.badgeClass),children:e.badge})]}),(0,a.jsx)("p",{className:"mt-4 text-sm font-medium text-gray-600",children:e.title}),(0,a.jsx)("div",{className:"mt-1 text-3xl font-bold text-gray-900",children:e.value}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.note})]},e.key)})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(e=>(0,a.jsx)(l(),{href:e.link,className:"block h-full",children:(0,a.jsxs)("div",{className:"auth-card h-full p-6 hover:-translate-y-0.5 transition-all duration-200 border border-orange-100/60",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl bg-orange-50 text-orange-700 flex items-center justify-center mb-4 shadow-inner",children:e.icon}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,a.jsx)("span",{className:"inline-flex items-center text-xs font-semibold text-orange-700 bg-orange-50 border border-orange-100 rounded-full px-3 py-1",children:"View details"})]})},e.key))})]})}},37621:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(95125),n=r(95704);let s=(n.env.NEXT_PUBLIC_AUTH_BASE||"").replace(/\/$/,""),l=Math.min(Number(n.env.NEXT_PUBLIC_API_TIMEOUT)||1e4,15e3),i=a.A.create({baseURL:s?"".concat(s,"/api"):"/aapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:l});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>{let t=e.data;if((e=>!!(e&&"object"==typeof e&&"ok"in e))(t)){if(t.ok){var r;return e.data=Object.prototype.hasOwnProperty.call(t,"data")&&null!=(r=t.data)?r:null,e}let a=Error(t.message||"Request failed");return a.response={status:e.status,data:t},Promise.reject(a)}return e},e=>{var t,r,a,n,s;let l=null==(t=e.response)?void 0:t.status,i=e.code,o=((null==e?void 0:e.message)||"").toLowerCase();return 401===l?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.resolve({status:null!=l?l:0,statusText:"Unauthorized",data:null,headers:null!=(a=null==(r=e.response)?void 0:r.headers)?a:{},config:e.config,request:e.request})):403===l?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(e)):"ECONNABORTED"===i||o.includes("timeout")?(console.warn("API timeout – returning empty response to keep UI responsive"),Promise.resolve({status:null!=l?l:0,statusText:"Request Timeout",data:null,headers:null!=(s=null==(n=e.response)?void 0:n.headers)?s:{},config:e.config,request:e.request})):Promise.reject(e)});let o=i},46398:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},54485:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},68209:(e,t,r)=>{"use strict";r.d(t,{bC:()=>l,iD:()=>i,me:()=>c,mt:()=>o,ri:()=>u});var a=r(37621),n=r(99947);let s=["auth:user-cache","cache:auth:roles","cache:auth:perms","cache:auth:users"];function l(){try{s.forEach(e=>window.sessionStorage.removeItem(e))}catch(e){}}async function i(e){l(),await a.A.post("/auth/login",e)}async function o(){let e=[a.A.get("/registrations",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:employees",t),(0,n.a)("cache:auth:employees:list",t),(0,n.a)("cache:auth:reports:employees",t)}).catch(()=>{}),a.A.get("/users",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:users",t.map(e=>({id:e.id,username:e.username,fullName:e.fullName,roles:Array.isArray(e.roles)?e.roles:[],permissions:Array.isArray(e.permissions)?e.permissions:[]}))),(0,n.a)("cache:auth:users:list",t)}).catch(()=>{}),a.A.get("/roles",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:roles",t),(0,n.a)("cache:auth:roles:list",t)}).catch(()=>{}),a.A.get("/roles/permissions",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:perms",t)}).catch(()=>{})];await Promise.allSettled(e)}async function c(){try{let{data:e}=await a.A.get("/auth/me");return e}catch(n){var e;let t=null==n?void 0:n.code,r=((null==n?void 0:n.message)||"").toLowerCase(),a=null==n||null==(e=n.response)?void 0:e.status;if("ECONNABORTED"===t||r.includes("timeout")||r.includes("network error")||401===a||403===a)return null;throw n}}async function u(){try{await a.A.post("/auth/logout")}catch(r){var e;let t=null==r||null==(e=r.response)?void 0:e.status;if(401===t||403===t)return;throw r}finally{l()}}},80598:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]])},81242:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,I:()=>c});var a=r(95125),n=r(95704);let s=(n.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),l=Math.min(Number(n.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),i=a.A.create({baseURL:s?"".concat(s,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:l}),o=i;function c(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}i.interceptors.request.use(e=>{{var t,r;let a=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;a&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=a);let n=localStorage.getItem("role")||void 0;n&&(e.headers=null!=(r=e.headers)?r:{},e.headers["X-Role"]=n)}return e}),i.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,r=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||r.includes("timeout")){var a,n,s,l;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(s=null==(a=e.response)?void 0:a.status)?s:0,statusText:"Request Timeout",data:null,headers:null!=(l=null==(n=e.response)?void 0:n.headers)?l:{},config:e.config,request:e.request})}return Promise.reject(e)})},83011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=r(12115);function n(e,t){let r=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=s(e,a)),t&&(n.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83669:(e,t,r)=>{Promise.resolve().then(r.bind(r,26848))},93402:(e,t,r)=>{"use strict";r.d(t,{mI:()=>s,ae:()=>l});var a=r(81242);let n=e=>{var t,r,a;return{id:e.id,entityType:"Vehicle"===e.entityType||"Driver"===e.entityType?e.entityType:"Vehicle",entityId:e.entityId,action:"Created"===e.action||"Updated"===e.action||"Deleted"===e.action?e.action:"Updated",previousData:null!=(t=e.previousJson)?t:null,newData:null!=(r=e.newJson)?r:null,performedBy:null!=(a=e.performedBy)?a:null,timestamp:e.timestamp}};async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t}=await a.A.get("/history/recent",{params:{size:e}});return(0,a.I)(t).map(n)}async function l(e,t){let{data:r}=await a.A.get("/history/".concat(e,"/").concat(t));return(0,a.I)(r).map(n)}},99947:(e,t,r)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5;try{let r=window.sessionStorage.getItem(e);if(!r)return null;let a=JSON.parse(r);if(!(null==a?void 0:a.data)||!(null==a?void 0:a.ts))return null;if(Date.now()-a.ts>t)return window.sessionStorage.removeItem(e),null;return a.data}catch(e){return null}}function n(e,t){try{if(null===t)return void window.sessionStorage.removeItem(e);let r={data:t,ts:Date.now()};window.sessionStorage.setItem(e,JSON.stringify(r))}catch(e){}}r.d(t,{a:()=>n,x:()=>a})}},e=>{e.O(0,[5125,970,2619,8441,1255,7358],()=>e(e.s=83669)),_N_E=e.O()}]);