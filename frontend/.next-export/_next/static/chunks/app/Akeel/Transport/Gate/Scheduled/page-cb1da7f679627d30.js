(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6713],{7640:(e,t,r)=>{"use strict";r.d(t,{Td:()=>n,Th:()=>a});var s=r(95155);function a(e){let{children:t,className:r="",sortable:a,sortDirection:n,onClick:l,...i}=e;return(0,s.jsx)("th",{...i,"aria-sort":"asc"===n?"ascending":"desc"===n?"descending":"none",onClick:a?l:void 0,onKeyDown:a?e=>{a&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==l||l())}:void 0,tabIndex:a?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",a?"cursor-pointer hover:bg-orange-200 transition-colors":"",n?"bg-orange-200":"",r].join(" "),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,a&&(0,s.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===n?"↑":"desc"===n?"↓":"↕"})]})})}function n(e){let{children:t,className:r="",highlight:a,...n}=e;return(0,s.jsx)("td",{...n,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",a?"bg-orange-50 font-medium":"",r].join(" "),children:t})}r(12115)},11924:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>p,Lh:()=>c,bB:()=>a,bk:()=>d,cK:()=>l,iq:()=>o,iv:()=>i,kM:()=>g,lm:()=>n,qd:()=>h,rg:()=>m,rr:()=>u,uK:()=>x});var s=r(81242);async function a(e){let{data:t}=await s.A.post("/usage-requests",e);return(0,s.I)(t)}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:a}=await s.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:r}});return(0,s.I)(a)}async function l(){try{let{data:e}=await s.A.get("/usage-requests/all");return(0,s.I)(e)}catch(r){let{data:e}=await s.A.get("/usage-requests"),t=(0,s.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function i(e){try{let{data:t}=await s.A.get("/usage-requests/status/".concat(e));return(0,s.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function o(e){let{data:t}=await s.A.get("/usage-requests/".concat(e));return(0,s.I)(t)}let c=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),d=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),u=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),m=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function x(e,t){let r={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:a}=await s.A.post("/usage-requests/".concat(e,"/assign"),r);return(0,s.I)(a)}async function g(e,t){let r={};"number"==typeof t.exitOdometer&&(r.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==r.exitOdometer&&(r.exitOdometer=t.odometerStartKm);let a=[];t.remarks&&a.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&a.push(...t.exitManifest),a.length&&(r.exitManifest=a);let{data:n}=await s.A.post("/usage-requests/".concat(e,"/gate/exit"),r);return(0,s.I)(n)}async function p(e,t){let r={};"number"==typeof t.entryOdometer&&(r.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==r.entryOdometer&&(r.entryOdometer=t.odometerEndKm);let a=[];t.remarks&&a.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&a.push(...t.entryManifest),a.length&&(r.entryManifest=a);let{data:n}=await s.A.post("/usage-requests/".concat(e,"/gate/entry"),r);return(0,s.I)(n)}async function h(){let{data:e}=await s.A.get("/usage-requests/metrics");return(0,s.I)(e)}},37621:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(95125),a=r(95704);let n=(a.env.NEXT_PUBLIC_AUTH_BASE||"").replace(/\/$/,""),l=Math.min(Number(a.env.NEXT_PUBLIC_API_TIMEOUT)||1e4,15e3),i=s.A.create({baseURL:n?"".concat(n,"/api"):"/aapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:l});i.interceptors.request.use(e=>e,e=>Promise.reject(e)),i.interceptors.response.use(e=>{let t=e.data;if((e=>!!(e&&"object"==typeof e&&"ok"in e))(t)){if(t.ok){var r;return e.data=Object.prototype.hasOwnProperty.call(t,"data")&&null!=(r=t.data)?r:null,e}let s=Error(t.message||"Request failed");return s.response={status:e.status,data:t},Promise.reject(s)}return e},e=>{var t,r,s,a,n;let l=null==(t=e.response)?void 0:t.status,i=e.code,o=((null==e?void 0:e.message)||"").toLowerCase();return 401===l?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.resolve({status:null!=l?l:0,statusText:"Unauthorized",data:null,headers:null!=(s=null==(r=e.response)?void 0:r.headers)?s:{},config:e.config,request:e.request})):403===l?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(e)):"ECONNABORTED"===i||o.includes("timeout")?(console.warn("API timeout – returning empty response to keep UI responsive"),Promise.resolve({status:null!=l?l:0,statusText:"Request Timeout",data:null,headers:null!=(n=null==(a=e.response)?void 0:a.headers)?n:{},config:e.config,request:e.request})):Promise.reject(e)});let o=i},62294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(95155),a=r(12115),n=r(7640),l=r(11924),i=r(63914),o=r(12008),c=r(68209),d=r(78827);let u=e=>e?new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"—";function m(e){var t;if(null==e?void 0:e.officerId)return String(e.officerId);let r="".concat((null==e?void 0:e.officialDescription)||"","\n").concat((null==e?void 0:e.remarks)||""),s=/\(\s*(?:Employee\s*ID|Emp\.?\s*ID|ID)\s*:\s*([^)]+)\)/i.exec(r);return null==s||null==(t=s[1])?void 0:t.trim()}function x(){let[e,t]=(0,a.useState)([]),[r,x]=(0,a.useState)(""),[g,p]=(0,a.useState)(!0),[h,y]=(0,a.useState)(null),[f,v]=(0,a.useState)(null),w=async()=>{p(!0);try{let[e,r]=await Promise.all([(0,l.iv)("SCHEDULED"),(0,l.iv)("DISPATCHED")]),s=[...e||[],...r||[]],a=new Set,n=s.filter(e=>{var t,r;let s=String(null!=(r=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.requestCode)?r:"");return!(!s||a.has(s))&&(a.add(s),!0)});n.sort((e,t)=>{let r=e.gateEntryAt?2:+!!e.gateExitAt,s=t.gateEntryAt?2:+!!t.gateExitAt;if(r!==s)return r-s;let a=0===r?e.scheduledPickupAt?new Date(e.scheduledPickupAt).getTime():0:1===r?e.gateExitAt?new Date(e.gateExitAt).getTime():0:e.gateEntryAt?new Date(e.gateEntryAt).getTime():0,n=0===s?t.scheduledPickupAt?new Date(t.scheduledPickupAt).getTime():0:1===s?t.gateExitAt?new Date(t.gateExitAt).getTime():0:t.gateEntryAt?new Date(t.gateEntryAt).getTime():0;return a-n}),t(n)}finally{p(!1)}};(0,a.useEffect)(()=>{w()},[]);let j=(0,a.useMemo)(()=>{let t=r.trim().toLowerCase();return t?e.filter(e=>[e.requestCode,e.assignedVehicleNumber,e.assignedDriverName,e.assignedDriverPhone,e.assignedDriverId,e.fromLocation,e.toLocation,e.department,m(e)||""].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(t)):e},[e,r]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,s.jsx)("h1",{className:"text-[14px] md:text-lg font-bold text-orange-900",children:"Scheduled & Dispatched"}),(0,s.jsx)("div",{className:"w-full max-w-sm",children:(0,s.jsx)(d.A,{value:r,onChange:x,placeholder:"Search code, vehicle, driver, route…"})})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-orange-200 overflow-auto",children:(0,s.jsxs)("table",{className:"min-w-[980px] w-full table-fixed text-[10px] leading-tight",children:[(0,s.jsxs)("colgroup",{children:[(0,s.jsx)("col",{className:"w-[12%]"}),(0,s.jsx)("col",{className:"w-[22%]"}),(0,s.jsx)("col",{className:"w-[19%]"}),(0,s.jsx)("col",{className:"w-[13%]"}),(0,s.jsx)("col",{className:"w-[12%]"}),(0,s.jsx)("col",{className:"w-[11%]"}),(0,s.jsx)("col",{className:"w-[11%]"})]}),(0,s.jsx)("thead",{className:"bg-orange-50 text-[9px] uppercase tracking-wide",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)(n.Th,{className:"px-3 py-2 text-left",children:"Request"}),(0,s.jsx)(n.Th,{className:"px-3 py-2 text-left",children:"Schedule"}),(0,s.jsx)(n.Th,{className:"px-3 py-2 text-left",children:"Vehicle / Driver"}),(0,s.jsx)(n.Th,{className:"px-3 py-2 text-left",children:"Route"}),(0,s.jsx)(n.Th,{className:"px-3 py-2 text-left",children:"Odometer (km)"}),(0,s.jsx)(n.Th,{className:"px-3 py-2 text-center",children:"Status"}),(0,s.jsx)(n.Th,{className:"px-3 py-2 text-center",children:"Action"})]})}),(0,s.jsxs)("tbody",{className:"divide-y",children:[g&&(0,s.jsx)("tr",{children:(0,s.jsx)(n.Td,{colSpan:7,className:"px-3 py-6 text-center text-gray-500",children:"Loading…"})}),!g&&j.map(e=>{var t,r;let a,l=!!e.gateExitAt&&!e.gateEntryAt,i=!!e.gateEntryAt,o=(null!=(a=e.assignedDriverPhone)?a:"").replace(/[^\d+()\-\s./;]/g,"").replace(/^[;,\s-]+/,"").replace(/\s{2,}/g," ").trim(),c=m(e);return(0,s.jsxs)("tr",{className:"align-top",children:[(0,s.jsxs)(n.Td,{className:"px-3 py-2",children:[(0,s.jsx)("div",{className:"font-semibold text-orange-900 text-[11px]",children:e.requestCode||"—"}),(0,s.jsx)("div",{className:"text-[9px] text-gray-600",children:e.department||"—"})]}),(0,s.jsxs)(n.Td,{className:"px-3 py-2",children:[(0,s.jsxs)("div",{className:"font-medium",children:["Pickup: ",e.timeFrom||u(e.scheduledPickupAt)]}),(0,s.jsxs)("div",{children:["Return: ",e.timeTo||u(e.scheduledReturnAt)]}),(0,s.jsxs)("div",{className:"text-blue-700",children:["Departed: ",u(e.gateExitAt)]}),(0,s.jsxs)("div",{className:"text-green-600",children:["Returned: ",u(e.gateEntryAt)]})]}),(0,s.jsxs)(n.Td,{className:"px-3 py-2",children:[(0,s.jsx)("div",{className:"font-medium",children:e.assignedVehicleNumber||"—"}),(0,s.jsxs)("div",{className:"text-[10px] text-gray-800",children:[e.assignedDriverName||"—",e.assignedDriverId?(0,s.jsxs)("span",{className:"text-gray-600",children:[" (",e.assignedDriverId,")"]}):null]}),(0,s.jsx)("div",{className:"text-[9px] text-gray-700",children:o||"—"}),c?(0,s.jsxs)("div",{className:"text-[9px] text-gray-500",children:["Officer ID: ",c]}):null]}),(0,s.jsx)(n.Td,{className:"px-3 py-2",children:(0,s.jsxs)("div",{children:[e.fromLocation||"—"," → ",e.toLocation||"—"]})}),(0,s.jsxs)(n.Td,{className:"px-3 py-2",children:[(0,s.jsxs)("div",{className:"text-[10px] text-gray-800",children:["Exit: ",null!=(t=e.exitOdometer)?t:"—"]}),(0,s.jsxs)("div",{className:"text-[10px] text-gray-800",children:["Entry: ",null!=(r=e.entryOdometer)?r:"—"]}),null!=e.exitOdometer&&null!=e.entryOdometer?(0,s.jsxs)("div",{className:"text-[9px] text-orange-700",children:["Δ ",Math.max(0,e.entryOdometer-e.exitOdometer)," km"]}):null]}),(0,s.jsx)(n.Td,{className:"px-3 py-2 text-center",children:(e=>{let t="Scheduled"===e?"bg-yellow-200 text-yellow-900 ring-1 ring-yellow-400/70":"Departed"===e?"bg-blue-600 text-white ring-1 ring-blue-700/60":"bg-green-500 text-white ring-1 ring-green-600/60";return(0,s.jsx)("span",{className:"inline-block text-[10px] px-2.5 py-1 rounded-full ".concat(t),children:e})})(i?"Return":l?"Departed":"Scheduled")}),(0,s.jsxs)(n.Td,{className:"px-3 py-2 text-center",children:[!e.gateExitAt&&(0,s.jsx)("button",{className:"inline-flex items-center justify-center px-3 py-1.5 rounded bg-orange-600 hover:bg-orange-700 text-white text-[11px]",onClick:()=>y(e),title:"Mark vehicle exit",children:"Log Exit"}),l&&(0,s.jsx)("button",{className:"inline-flex items-center justify-center px-3 py-1.5 rounded bg-green-600 hover:bg-green-700 text-white text-[11px]",onClick:()=>v(e),title:"Mark vehicle return",children:"Log Return"}),i&&(0,s.jsx)("span",{className:"text-gray-500 text-[10px]",children:"Done"})]})]},e.id)}),!g&&!j.length&&(0,s.jsx)("tr",{children:(0,s.jsx)(n.Td,{colSpan:7,className:"px-3 py-6 text-center text-gray-500",children:"No active trips"})})]})]})}),h&&(0,s.jsx)(i.A,{mode:"exit",open:!0,onClose:()=>y(null),onSubmit:async e=>{try{var t,r;let s=window.localStorage.getItem("username");if(!s)throw Error("Session user missing. Please re-login.");await (0,c.iD)({username:s,password:e.password}),await (0,l.kM)(h.id,{odometerStartKm:null!=(t=e.odometer)?t:void 0,remarks:null!=(r=e.remarks)?r:void 0}),o.oR.success("Exit logged"),y(null),w()}catch(e){o.oR.error((null==e?void 0:e.message)||"Failed to log exit")}}}),f&&(0,s.jsx)(i.A,{mode:"entry",open:!0,onClose:()=>v(null),onSubmit:async e=>{try{var t,r;let s=window.localStorage.getItem("username");if(!s)throw Error("Session user missing. Please re-login.");await (0,c.iD)({username:s,password:e.password}),await (0,l.Cd)(f.id,{odometerEndKm:null!=(t=e.odometer)?t:void 0,remarks:null!=(r=e.remarks)?r:void 0}),o.oR.success("Entry logged"),v(null),w()}catch(e){o.oR.error((null==e?void 0:e.message)||"Failed to log entry")}}})]})}},63914:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(95155),a=r(12115),n=r(65229);function l(e){let{mode:t,open:r,onClose:l,onSubmit:i}=e,[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[g,p]=(0,a.useState)(null);return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-4",onClick:l,children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 border-b bg-orange-50",children:[(0,s.jsx)("h3",{className:"font-semibold text-orange-900",children:"exit"===t?"Log Gate EXIT":"Log Gate ENTRY"}),(0,s.jsx)("button",{className:"p-2 rounded hover:bg-orange-100",onClick:l,"aria-label":"Close",children:(0,s.jsx)(n.A,{size:18})})]}),(0,s.jsxs)("div",{className:"p-5 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:["Odometer (km) — ","exit"===t?"Start":"End"]}),(0,s.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:o,onChange:e=>c(""===e.target.value?"":Number(e.target.value)),min:0,placeholder:"exit"===t?"e.g., 125000":"e.g., 125320"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:"Remarks"}),(0,s.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:3,value:d,onChange:e=>u(e.target.value),placeholder:"Optional note"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:"Confirm with password"}),(0,s.jsx)("input",{type:"password",className:"w-full border rounded px-3 py-2",value:m,onChange:e=>x(e.target.value),placeholder:"Enter your password to confirm"})]}),g&&(0,s.jsx)("div",{className:"text-sm text-red-700 bg-red-50 border border-red-200 rounded px-3 py-2",children:g})]}),(0,s.jsxs)("div",{className:"px-5 py-3 border-t bg-orange-50 flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded border",onClick:l,children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-orange-600 text-white",onClick:()=>{if(""===m.trim())return void p("Password required to confirm.");p(null),i({odometer:""===o?null:Number(o),remarks:(null==d?void 0:d.trim())||null,password:m.trim()})},children:"Save"})]})]})}):null}},65229:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},68209:(e,t,r)=>{"use strict";r.d(t,{bC:()=>l,iD:()=>i,me:()=>c,mt:()=>o,ri:()=>d});var s=r(37621),a=r(99947);let n=["auth:user-cache","cache:auth:roles","cache:auth:perms","cache:auth:users"];function l(){try{n.forEach(e=>window.sessionStorage.removeItem(e))}catch(e){}}async function i(e){l(),await s.A.post("/auth/login",e)}async function o(){let e=[s.A.get("/registrations",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,a.a)("cache:auth:employees",t),(0,a.a)("cache:auth:employees:list",t),(0,a.a)("cache:auth:reports:employees",t)}).catch(()=>{}),s.A.get("/users",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,a.a)("cache:auth:users",t.map(e=>({id:e.id,username:e.username,fullName:e.fullName,roles:Array.isArray(e.roles)?e.roles:[],permissions:Array.isArray(e.permissions)?e.permissions:[]}))),(0,a.a)("cache:auth:users:list",t)}).catch(()=>{}),s.A.get("/roles",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,a.a)("cache:auth:roles",t),(0,a.a)("cache:auth:roles:list",t)}).catch(()=>{}),s.A.get("/roles/permissions",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,a.a)("cache:auth:perms",t)}).catch(()=>{})];await Promise.allSettled(e)}async function c(){try{let{data:e}=await s.A.get("/auth/me");return e}catch(a){var e;let t=null==a?void 0:a.code,r=((null==a?void 0:a.message)||"").toLowerCase(),s=null==a||null==(e=a.response)?void 0:e.status;if("ECONNABORTED"===t||r.includes("timeout")||r.includes("network error")||401===s||403===s)return null;throw a}}async function d(){try{await s.A.post("/auth/logout")}catch(r){var e;let t=null==r||null==(e=r.response)?void 0:e.status;if(401===t||403===t)return;throw r}finally{l()}}},78827:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(95155);r(12115);var a=r(86651),n=r(65229);function l(e){let{value:t,onChange:r,placeholder:l="Search…",className:i=""}=e;return(0,s.jsxs)("div",{className:"relative ".concat(i),children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(a.A,{size:18,className:"text-orange-500"})}),(0,s.jsx)("input",{value:t,onChange:e=>r(e.target.value),placeholder:l,autoComplete:"off",className:"w-full border border-orange-200 rounded-xl px-10 py-3 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-orange-400 text-sm bg-white placeholder-orange-400/70 text-orange-900 font-medium transition-all duration-200 shadow-sm hover:shadow-md"}),t&&(0,s.jsx)("button",{onClick:()=>r(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-orange-100 rounded-r-xl transition-colors","aria-label":"Clear search",children:(0,s.jsx)(n.A,{size:18,className:"text-orange-500 hover:text-orange-700"})})]})}},81242:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,I:()=>c});var s=r(95125),a=r(95704);let n=(a.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),l=Math.min(Number(a.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),i=s.A.create({baseURL:n?"".concat(n,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:l}),o=i;function c(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}i.interceptors.request.use(e=>{{var t,r;let s=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;s&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=s);let a=localStorage.getItem("role")||void 0;a&&(e.headers=null!=(r=e.headers)?r:{},e.headers["X-Role"]=a)}return e}),i.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,r=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||r.includes("timeout")){var s,a,n,l;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(n=null==(s=e.response)?void 0:s.status)?n:0,statusText:"Request Timeout",data:null,headers:null!=(l=null==(a=e.response)?void 0:a.headers)?l:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},96667:(e,t,r)=>{Promise.resolve().then(r.bind(r,62294))},99947:(e,t,r)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5;try{let r=window.sessionStorage.getItem(e);if(!r)return null;let s=JSON.parse(r);if(!(null==s?void 0:s.data)||!(null==s?void 0:s.ts))return null;if(Date.now()-s.ts>t)return window.sessionStorage.removeItem(e),null;return s.data}catch(e){return null}}function a(e,t){try{if(null===t)return void window.sessionStorage.removeItem(e);let r={data:t,ts:Date.now()};window.sessionStorage.setItem(e,JSON.stringify(r))}catch(e){}}r.d(t,{a:()=>a,x:()=>s})}},e=>{e.O(0,[5125,970,8441,1255,7358],()=>e(e.s=96667)),_N_E=e.O()}]);