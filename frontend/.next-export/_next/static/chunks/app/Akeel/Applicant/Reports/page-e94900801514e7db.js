(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{4181:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var a=r(95155),s=r(12115),l=r(71847);let n=(0,l.A)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var o=r(39867);let i=(0,l.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var d=r(86651),c=r(10383),u=r(11924),p=r(7640),m=r(99947);let x=[{key:"PENDING",label:"Pending",statuses:["PENDING_HOD","PENDING_MANAGEMENT"],description:"Awaiting approvals"},{key:"APPROVED",label:"Approved",statuses:["APPROVED"],description:"Ready for scheduling"},{key:"ACTIVE",label:"Active",statuses:["SCHEDULED","DISPATCHED"],description:"Currently scheduled/ongoing"},{key:"COMPLETED",label:"Completed",statuses:["RETURNED","COMPLETED"],description:"Trips returned & closed"},{key:"REJECTED",label:"Rejected",statuses:["REJECTED"],description:"Declined or cancelled"}],g=[{key:"ALL",label:"All time",days:null},{key:"365",label:"Last 12 months",days:365},{key:"90",label:"Last 90 days",days:90},{key:"30",label:"Last 30 days",days:30}],h={PENDING_HOD:"Pending HOD",PENDING_MANAGEMENT:"Pending Management",APPROVED:"Approved",SCHEDULED:"Scheduled",DISPATCHED:"Dispatched",RETURNED:"Returned",COMPLETED:"Completed",REJECTED:"Rejected"},y={PENDING_HOD:"bg-amber-50 text-amber-700 border border-amber-200",PENDING_MANAGEMENT:"bg-amber-50 text-amber-700 border border-amber-200",APPROVED:"bg-emerald-50 text-emerald-700 border border-emerald-200",SCHEDULED:"bg-sky-50 text-sky-700 border border-sky-200",DISPATCHED:"bg-indigo-50 text-indigo-700 border border-indigo-200",RETURNED:"bg-slate-100 text-slate-700 border border-slate-200",COMPLETED:"bg-slate-100 text-slate-700 border border-slate-200",REJECTED:"bg-rose-50 text-rose-700 border border-rose-200"},b=e=>e?new Date(e).toLocaleString():"",f=e=>{if(!e)return;let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t},v=e=>{if(!e)return"";let t=(null==e?void 0:e.appliedDate)||(null==e?void 0:e.applied_on)||(null==e?void 0:e.appliedOn),r=(null==e?void 0:e.appliedTime)||(null==e?void 0:e.applied_time);if(t&&r)return"".concat(t," ").concat(r);if(t&&(null==e?void 0:e.createdAt)){let r=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(t," ").concat(r)}return(null==e?void 0:e.createdAt)?b(e.createdAt):""},N=e=>{var t,r;let{status:s}=e,l=null!=s?s:"",n=null!=(t=y[l])?t:"bg-gray-100 text-gray-700 border border-gray-200",o=null!=(r=h[l])?r:s||"Unknown";return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-medium ".concat(n),children:o})};function j(){let e=Array.from(new Set([localStorage.getItem("employeeId")||"",localStorage.getItem("actor")||"",localStorage.getItem("username")||""].filter(Boolean))),t=e.flatMap(e=>(0,m.x)("cache:applicant:requests:".concat(e))||[]),r=(0,m.x)("cache:applicant:requests:all")||[],l=t.length?t:r,[y,j]=s.useState(l),[w,A]=s.useState(e),[E,k]=s.useState(!1),[D,S]=s.useState(!l.length),[T,I]=s.useState(""),[C,R]=s.useState("ALL"),[L,M]=s.useState([]),[O,q]=s.useState(null);s.useEffect(()=>{let e=localStorage.getItem("employeeId")||"",t=Array.from(new Set([e,localStorage.getItem("actor")||"",localStorage.getItem("username")||""].filter(Boolean)));if(A(t),k(!0),q(null),!t.length){j([]),S(!1);return}(async()=>{S(!0);let e=[];try{for(let s of t){let t=0,l=1;for(;t<l;)try{var r,a;let n=await (0,u.lm)(s,t,100);e=e.concat((null==n?void 0:n.content)||[]),l=null!=(r=null==n?void 0:n.totalPages)?r:1,t=(null!=(a=null==n?void 0:n.number)?a:t)+1}catch(e){console.warn("Failed to load requests for",s,(null==e?void 0:e.message)||e),q(e=>null!=e?e:"Some requests could not be loaded (server error).");break}}try{let r=(await (0,u.cK)()||[]).filter(e=>{var r,a;let s=null!=(a=null!=(r=null==e?void 0:e.createdBy)?r:null==e?void 0:e.created_by)?a:"";return t.includes(null==e?void 0:e.employeeId)||t.includes(s)});e=e.concat(r)}catch(e){}let s=new Set;(e=e.filter(e=>{var t,r;let a=String(null!=(r=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.requestCode)?r:"".concat((null==e?void 0:e.employeeId)||"","|").concat((null==e?void 0:e.dateOfTravel)||"","|").concat((null==e?void 0:e.timeFrom)||""));return!(!a||s.has(a))&&(s.add(a),!0)})).sort((e,t)=>{let r=(null==e?void 0:e.createdAt)?Date.parse(e.createdAt):0;return((null==t?void 0:t.createdAt)?Date.parse(t.createdAt):0)-r})}finally{t.forEach(t=>(0,m.a)("cache:applicant:requests:".concat(t),e)),(0,m.a)("cache:applicant:requests:all",e),j(e),S(!1)}})()},[]);let P=s.useMemo(()=>y.reduce((e,t)=>{let r=null==t?void 0:t.status;return r&&(e[r]=(e[r]||0)+1),e},{}),[y]),_=s.useMemo(()=>g.find(e=>e.key===C)||g[0],[C]),U=s.useMemo(()=>{if(!L.length)return null;let e=new Set;return L.forEach(t=>{let r=x.find(e=>e.key===t);null==r||r.statuses.forEach(t=>e.add(t))}),e.size?e:null},[L]),B=s.useMemo(()=>{let e=T.trim().toLowerCase(),t=_.days?Date.now()-24*_.days*36e5:null;return y.filter(r=>{if(U&&(!r.status||!U.has(r.status)))return!1;if(t){let e=(e=>{if(!e)return;let t=f(e.createdAt);if(t)return t;let r=(null==e?void 0:e.appliedDate)||(null==e?void 0:e.applied_on)||(null==e?void 0:e.appliedOn);if(!r)return;let a=(null==e?void 0:e.appliedTime)||(null==e?void 0:e.applied_time)||"00:00";return f("".concat(r,"T").concat(a))})(r);if(!e||e.getTime()<t)return!1}return!e||[r.requestCode,r.applicantName,r.employeeId,r.fromLocation,r.toLocation,r.assignedVehicleNumber,r.status].filter(Boolean).map(e=>e.toString().toLowerCase()).join(" ").includes(e)})},[y,T,U,_]),H=(P.PENDING_HOD||0)+(P.PENDING_MANAGEMENT||0),V=P.APPROVED||0,G=P.REJECTED||0,z=(P.SCHEDULED||0)+(P.DISPATCHED||0),K=(P.RETURNED||0)+(P.COMPLETED||0),J=[{label:"Filtered results",value:B.length,helper:"Match current filters"},{label:"Pending",value:H,helper:"Awaiting approval"},{label:"Approved",value:V,helper:"Ready to dispatch"},{label:"Active trips",value:z,helper:"Scheduled or dispatched"},{label:"Completed",value:K,helper:"Returned vehicles"},{label:"Rejected",value:G,helper:"Need revisions"}],F=!!(L.length||T.trim()||"ALL"!==C),W=s.useCallback(()=>{if(!B.length)return;let e=new Blob([[["Request Code","Status","Applicant","Employee ID","Route","Travel Date","Travel Time","Vehicle","Applied On"],...B.map(e=>[e.requestCode||"",h[e.status]||e.status||"",e.applicantName||"",e.employeeId||"",[e.fromLocation,e.toLocation].filter(Boolean).join(" → "),e.dateOfTravel||"",[e.timeFrom,e.timeTo].filter(Boolean).join("-"),e.assignedVehicleNumber||"",v(e)])].map(e=>e.map(e=>(e=>{if(null==e)return"";let t=String(e);return/[",\n]/.test(t)?'"'.concat(t.replace(/"/g,'""'),'"'):t})(e)).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="transport-requests-report.csv",r.click(),URL.revokeObjectURL(t)},[B]);return E?w.length?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-5",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-orange-600",children:"Applicant reports"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold text-orange-950",children:"Usage request intelligence"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Slice your transport requests by status or timeframe, then export a ready-to-share CSV."})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{M([]),I(""),R("ALL")},disabled:!F,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border text-sm font-medium transition ".concat(F?"text-orange-700 border-orange-300 hover:bg-orange-50":"text-gray-400 border-gray-200 cursor-not-allowed"),children:[(0,a.jsx)(n,{size:16}),"Reset"]}),(0,a.jsxs)("button",{type:"button",onClick:W,disabled:!B.length,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition ".concat(B.length?"bg-orange-600 text-white hover:bg-orange-700":"bg-gray-200 text-gray-500 cursor-not-allowed"),children:[(0,a.jsx)(o.A,{size:16}),"Export CSV"]})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-3",children:J.map(e=>(0,a.jsxs)("div",{className:"bg-white border border-orange-200 rounded-2xl px-4 py-3",children:[(0,a.jsx)("p",{className:"text-[11px] uppercase text-gray-500 font-semibold",children:e.label}),(0,a.jsx)("p",{className:"text-3xl font-semibold text-orange-900",children:e.value}),(0,a.jsx)("p",{className:"text-[11px] text-gray-500",children:e.helper})]},e.label))}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[11px] font-semibold text-orange-700 uppercase tracking-wide",children:[(0,a.jsx)(i,{size:14}),"Status filters"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>M([]),className:"px-4 py-2 rounded-xl border text-xs font-semibold ".concat(L.length?"border-orange-200 text-orange-900 hover:bg-orange-50":"bg-orange-600 border-orange-600 text-white shadow-sm"),children:"All statuses"}),x.map(e=>(e=>{let t=L.includes(e.key),r=e.statuses.reduce((e,t)=>e+(P[t]||0),0);return(0,a.jsxs)("button",{type:"button",onClick:()=>{var t;return t=e.key,void M(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"px-3 py-2 rounded-xl border text-xs font-medium transition ".concat(t?"bg-orange-600 border-orange-600 text-white shadow-sm":"bg-white border-orange-200 text-orange-900 hover:bg-orange-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full border ".concat(t?"border-white/40 bg-white/10 text-white":"border-orange-200 bg-orange-50 text-orange-700"),children:r})]}),(0,a.jsx)("p",{className:"mt-1 text-[10px] ".concat(t?"text-orange-50":"text-gray-500"),children:e.description})]},e.key)})(e))]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 bg-orange-50 border border-orange-200 rounded-xl px-3 py-2",children:[(0,a.jsx)(d.A,{size:16,className:"text-orange-500"}),(0,a.jsx)("input",{className:"flex-1 bg-transparent text-sm outline-none text-orange-900 placeholder:text-orange-400",placeholder:"Search by code, employee, route or vehicle",value:T,onChange:e=>I(e.target.value)})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 bg-orange-50 border border-orange-200 rounded-xl px-3 py-2",children:[(0,a.jsx)(c.A,{size:16,className:"text-orange-500"}),(0,a.jsx)("select",{className:"flex-1 bg-transparent text-sm outline-none text-orange-900",value:C,onChange:e=>R(e.target.value),children:g.map(e=>(0,a.jsx)("option",{value:e.key,className:"text-gray-900",children:e.label},e.key))})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 bg-orange-50 border border-dashed border-orange-200 rounded-xl px-3 py-2 flex items-center",children:[L.length?(0,a.jsxs)("span",{children:["Showing ",(0,a.jsx)("strong",{children:B.length})," rows across ",L.length," selected filter",L.length>1?"s":"","."]}):(0,a.jsxs)("span",{children:["Showing ",(0,a.jsx)("strong",{children:"all statuses"})," over ",_.label.toLowerCase(),"."]}),O?(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:O}):null]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-orange-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-orange-100",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-orange-900",children:"Detailed request log"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[B.length," result(s)"]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-orange-50 text-[11px] uppercase text-orange-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(p.Th,{className:"px-3 py-2 text-left",children:"Request"}),(0,a.jsx)(p.Th,{className:"px-3 py-2 text-left",children:"Status"}),(0,a.jsx)(p.Th,{className:"px-3 py-2 text-left",children:"Route"}),(0,a.jsx)(p.Th,{className:"px-3 py-2 text-left",children:"Travel window"}),(0,a.jsx)(p.Th,{className:"px-3 py-2 text-left",children:"Vehicle"}),(0,a.jsx)(p.Th,{className:"px-3 py-2 text-left",children:"Applied / Updated"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-orange-100 text-[13px]",children:D?(0,a.jsx)("tr",{children:(0,a.jsx)(p.Td,{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:"Loading report…"})}):B.length?B.map(e=>{let t=[e.applicantName,e.employeeId].filter(Boolean).join(" • "),r=[e.fromLocation,e.toLocation].filter(Boolean).join(" → "),s=[e.timeFrom,e.timeTo].filter(Boolean).join(" – "),l=v(e),n=b(e.updatedAt);return(0,a.jsxs)("tr",{className:"align-top",children:[(0,a.jsxs)(p.Td,{className:"px-3 py-3",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-900",children:e.requestCode||""}),t?(0,a.jsx)("div",{className:"text-xs text-gray-500",children:t}):null]}),(0,a.jsxs)(p.Td,{className:"px-3 py-3",children:[(0,a.jsx)(N,{status:e.status}),e.department?(0,a.jsx)("div",{className:"text-[11px] text-gray-500 mt-1",children:e.department}):null]}),(0,a.jsxs)(p.Td,{className:"px-3 py-3",children:[(0,a.jsx)("div",{className:"font-medium text-orange-900",children:r}),e.officialDescription?(0,a.jsx)("div",{className:"text-[11px] text-gray-500",children:e.officialDescription}):null]}),(0,a.jsxs)(p.Td,{className:"px-3 py-3",children:[(0,a.jsx)("div",{children:e.dateOfTravel||""}),s||e.overnight?(0,a.jsxs)("div",{className:"font-mono text-[11px] text-gray-600",children:[s,e.overnight?" (overnight)":""]}):null]}),(0,a.jsxs)(p.Td,{className:"px-3 py-3",children:[(0,a.jsx)("div",{className:"font-medium text-orange-900",children:e.assignedVehicleNumber||""}),e.assignedDriverName?(0,a.jsx)("div",{className:"text-[11px] text-gray-500",children:e.assignedDriverName}):null]}),(0,a.jsxs)(p.Td,{className:"px-3 py-3",children:[(0,a.jsx)("div",{className:"font-medium text-orange-900",children:l}),n?(0,a.jsxs)("div",{className:"text-[11px] text-gray-500",children:["Updated ",n]}):null]})]},e.id)}):(0,a.jsx)("tr",{children:(0,a.jsx)(p.Td,{colSpan:6,className:"px-3 py-6 text-center text-gray-500",children:"No requests match the selected filters."})})})]})})]})]}):(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-6",children:[(0,a.jsx)("p",{className:"text-sm text-orange-900 font-semibold",children:"Save your first request to unlock reporting"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"We could not find an Employee ID in this browser. Submit a request or log back in to view reports."})]}):(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-6 text-sm text-gray-600",children:"Preparing your report workspace…"})}},7640:(e,t,r)=>{"use strict";r.d(t,{Td:()=>l,Th:()=>s});var a=r(95155);function s(e){let{children:t,className:r="",sortable:s,sortDirection:l,onClick:n,...o}=e;return(0,a.jsx)("th",{...o,"aria-sort":"asc"===l?"ascending":"desc"===l?"descending":"none",onClick:s?n:void 0,onKeyDown:s?e=>{s&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==n||n())}:void 0,tabIndex:s?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",s?"cursor-pointer hover:bg-orange-200 transition-colors":"",l?"bg-orange-200":"",r].join(" "),children:(0,a.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,s&&(0,a.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===l?"↑":"desc"===l?"↓":"↕"})]})})}function l(e){let{children:t,className:r="",highlight:s,...l}=e;return(0,a.jsx)("td",{...l,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",s?"bg-orange-50 font-medium":"",r].join(" "),children:t})}r(12115)},10383:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},11924:(e,t,r)=>{"use strict";r.d(t,{Cd:()=>g,Lh:()=>d,bB:()=>s,bk:()=>c,cK:()=>n,iq:()=>i,iv:()=>o,kM:()=>x,lm:()=>l,qd:()=>h,rg:()=>p,rr:()=>u,uK:()=>m});var a=r(81242);async function s(e){let{data:t}=await a.A.post("/usage-requests",e);return(0,a.I)(t)}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:s}=await a.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:r}});return(0,a.I)(s)}async function n(){try{let{data:e}=await a.A.get("/usage-requests/all");return(0,a.I)(e)}catch(r){let{data:e}=await a.A.get("/usage-requests"),t=(0,a.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function o(e){try{let{data:t}=await a.A.get("/usage-requests/status/".concat(e));return(0,a.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function i(e){let{data:t}=await a.A.get("/usage-requests/".concat(e));return(0,a.I)(t)}let d=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),c=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),u=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),p=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function m(e,t){let r={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:s}=await a.A.post("/usage-requests/".concat(e,"/assign"),r);return(0,a.I)(s)}async function x(e,t){let r={};"number"==typeof t.exitOdometer&&(r.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==r.exitOdometer&&(r.exitOdometer=t.odometerStartKm);let s=[];t.remarks&&s.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&s.push(...t.exitManifest),s.length&&(r.exitManifest=s);let{data:l}=await a.A.post("/usage-requests/".concat(e,"/gate/exit"),r);return(0,a.I)(l)}async function g(e,t){let r={};"number"==typeof t.entryOdometer&&(r.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==r.entryOdometer&&(r.entryOdometer=t.odometerEndKm);let s=[];t.remarks&&s.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&s.push(...t.entryManifest),s.length&&(r.entryManifest=s);let{data:l}=await a.A.post("/usage-requests/".concat(e,"/gate/entry"),r);return(0,a.I)(l)}async function h(){let{data:e}=await a.A.get("/usage-requests/metrics");return(0,a.I)(e)}},12873:(e,t,r)=>{Promise.resolve().then(r.bind(r,4181))},39867:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...p}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:i?24*Number(o)/Number(s):o,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:i,...d}=r;return(0,a.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...d})});return r.displayName=s(e),r}},81242:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,I:()=>d});var a=r(95125),s=r(95704);let l=(s.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),n=Math.min(Number(s.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),o=a.A.create({baseURL:l?"".concat(l,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:n}),i=o;function d(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}o.interceptors.request.use(e=>{{var t,r;let a=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;a&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=a);let s=localStorage.getItem("role")||void 0;s&&(e.headers=null!=(r=e.headers)?r:{},e.headers["X-Role"]=s)}return e}),o.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,r=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||r.includes("timeout")){var a,s,l,n;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(l=null==(a=e.response)?void 0:a.status)?l:0,statusText:"Request Timeout",data:null,headers:null!=(n=null==(s=e.response)?void 0:s.headers)?n:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},99947:(e,t,r)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5;try{let r=window.sessionStorage.getItem(e);if(!r)return null;let a=JSON.parse(r);if(!(null==a?void 0:a.data)||!(null==a?void 0:a.ts))return null;if(Date.now()-a.ts>t)return window.sessionStorage.removeItem(e),null;return a.data}catch(e){return null}}function s(e,t){try{if(null===t)return void window.sessionStorage.removeItem(e);let r={data:t,ts:Date.now()};window.sessionStorage.setItem(e,JSON.stringify(r))}catch(e){}}r.d(t,{a:()=>s,x:()=>a})}},e=>{e.O(0,[5125,8441,1255,7358],()=>e(e.s=12873)),_N_E=e.O()}]);