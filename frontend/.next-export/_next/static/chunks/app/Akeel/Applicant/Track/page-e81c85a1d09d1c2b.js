(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6310],{309:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},7640:(e,t,n)=>{"use strict";n.d(t,{Td:()=>a,Th:()=>s});var r=n(95155);function s(e){let{children:t,className:n="",sortable:s,sortDirection:a,onClick:i,...c}=e;return(0,r.jsx)("th",{...c,"aria-sort":"asc"===a?"ascending":"desc"===a?"descending":"none",onClick:s?i:void 0,onKeyDown:s?e=>{s&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==i||i())}:void 0,tabIndex:s?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",s?"cursor-pointer hover:bg-orange-200 transition-colors":"",a?"bg-orange-200":"",n].join(" "),children:(0,r.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,s&&(0,r.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===a?"↑":"desc"===a?"↓":"↕"})]})})}function a(e){let{children:t,className:n="",highlight:s,...a}=e;return(0,r.jsx)("td",{...a,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",s?"bg-orange-50 font-medium":"",n].join(" "),children:t})}n(12115)},11382:(e,t,n)=>{"use strict";n.d(t,{ZD:()=>s,ZS:()=>i,dq:()=>a});let r={name:"State Printing Corporation",tagline:"Official ERP Workspace",address:"Panaluwa, Watareka, Padukka, Sri Lanka",contact:"Phone: 0112757505 / 0112859308 • Fax: 011-2757506 • Email: chairmanspc2022@gmail.com • www.spclanka.gov.lk"},s=e=>null==e?"":String(e).replace(/[&<>"']/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return e}}),a=e=>{let t=(e=>{let{title:t,subtitle:n,contentHtml:a,printedBy:i,pageOrientation:c,extraCss:o}=e,d=new Date,l="".concat(d.toLocaleDateString()," ").concat(d.toLocaleTimeString()),p=new URL("/spclogopic.png",window.location.origin).toString();return'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <title>'.concat(s(t),"</title>\n    <style>\n      @page {\n        margin: 15mm;\n        size: A4 ").concat("landscape"===c?"landscape":"portrait",";\n      }\n      body {\n        margin: 0;\n        font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\n        color: #1f2937;\n        background: #ffffff;\n      }\n      .spc-print {\n        max-width: 960px;\n        margin: 0 auto;\n        padding: 32px 36px;\n      }\n      .spc-print__header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 2px solid #ea580c;\n        padding-bottom: 16px;\n        margin-bottom: 24px;\n        gap: 24px;\n      }\n      .spc-brand {\n        display: flex;\n        align-items: center;\n        gap: 16px;\n      }\n      .spc-brand__logo {\n        width: 64px;\n        height: 64px;\n        border-radius: 18px;\n        border: 1px solid rgba(249, 115, 22, 0.35);\n        background: rgba(249, 115, 22, 0.08);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 8px;\n      }\n      .spc-brand__logo img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n      .spc-brand__text {\n        line-height: 1.3;\n      }\n      .spc-brand__name {\n        font-size: 1.25rem;\n        font-weight: 700;\n        margin: 0;\n        color: #7c2d12;\n      }\n      .spc-brand__tagline {\n        font-size: 0.9rem;\n        margin: 0;\n        color: #9a3412;\n      }\n      .spc-brand__meta {\n        font-size: 0.8rem;\n        margin: 4px 0 0;\n        color: #6b7280;\n      }\n      .spc-document-meta {\n        text-align: right;\n        font-size: 0.85rem;\n        color: #4b5563;\n      }\n      .spc-document-meta strong {\n        display: block;\n        color: #111827;\n      }\n      .spc-print__body h1 {\n        font-size: 1.4rem;\n        margin: 0 0 6px;\n        color: #111827;\n      }\n      .spc-print__body h2 {\n        font-size: 1rem;\n        margin: 0 0 18px;\n        color: #6b7280;\n        font-weight: 500;\n      }\n      .spc-table {\n        width: 100%;\n        border-collapse: separate;\n        border-spacing: 0;\n        margin-top: 12px;\n        font-size: 0.88rem;\n        border: 1px solid #f0d5bf;\n        border-radius: 12px;\n        overflow: hidden;\n      }\n      .spc-table thead th {\n        text-align: left;\n        padding: 8px 10px;\n        background: #fff1e6;\n        color: #7c2d12;\n        border: 1px solid #f9d6b4;\n        font-size: 0.82rem;\n      }\n      .spc-table tbody td {\n        padding: 8px 10px;\n        border-bottom: 1px solid #f0d5bf;\n        border-right: 1px solid #f0d5bf;\n        color: #374151;\n      }\n      .spc-table tr:last-child td {\n        border-bottom: none;\n      }\n      .spc-empty {\n        padding: 16px;\n        border: 1px dashed #f8c4a0;\n        background: #fff8f0;\n        text-align: center;\n        font-size: 0.9rem;\n        color: #92400e;\n        border-radius: 8px;\n        margin-top: 16px;\n      }\n      .spc-section {\n        border: 1px solid #f4d6be;\n        border-radius: 14px;\n        padding: 16px 20px;\n        margin-top: 16px;\n        background: #fffdfb;\n      }\n      .spc-section + .spc-section {\n        margin-top: 20px;\n      }\n      .spc-section__title {\n        font-size: 1rem;\n        font-weight: 600;\n        margin: 0 0 12px;\n        color: #1f2937;\n      }\n      .spc-definition {\n        width: 100%;\n        border-collapse: collapse;\n      }\n      .spc-definition td {\n        padding: 6px 0;\n        font-size: 0.9rem;\n        vertical-align: top;\n      }\n      .spc-definition td:first-child {\n        width: 35%;\n        font-weight: 600;\n        color: #4b5563;\n      }\n      .spc-definition td:last-child {\n        color: #111827;\n      }\n      .spc-chip {\n        display: inline-flex;\n        align-items: center;\n        padding: 2px 10px;\n        border-radius: 999px;\n        font-size: 0.78rem;\n        font-weight: 600;\n        margin: 2px 6px 0 0;\n      }\n      .spc-chip--role {\n        background: #fff3e0;\n        border: 1px solid #fdba74;\n        color: #9a3412;\n      }\n      .spc-chip--perm {\n        background: #e0f2fe;\n        border: 1px solid #93c5fd;\n        color: #1e3a8a;\n      }\n      .spc-print__footer {\n        margin-top: 32px;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 32px;\n        font-size: 0.85rem;\n        color: #374151;\n      }\n      .spc-signature__field {\n        min-width: 220px;\n      }\n      .spc-signature__value {\n        display: block;\n        min-height: 24px;\n        border-bottom: 1px solid #d1d5db;\n        margin-top: 6px;\n      }\n      @media print {\n        body {\n          background: #fff;\n        }\n        .spc-print {\n          padding: 0;\n        }\n      }\n      ").concat(o||"",'\n    </style>\n  </head>\n  <body>\n    <main class="spc-print">\n      <header class="spc-print__header">\n        <div class="spc-brand">\n          <div class="spc-brand__logo">\n            <img src="').concat(p,'" alt="').concat(s(r.name),' logo" />\n          </div>\n          <div class="spc-brand__text">\n            <p class="spc-brand__name">').concat(s(r.name),'</p>\n            <p class="spc-brand__tagline">').concat(s(r.tagline),'</p>\n            <p class="spc-brand__meta">').concat(s(r.address)," • ").concat(s(r.contact),'</p>\n          </div>\n        </div>\n        <div class="spc-document-meta">\n          <strong>').concat(s(t),"</strong>\n          ").concat(n?"<span>".concat(s(n),"</span>"):"","\n          <span>Printed on: ").concat(s(l),'</span>\n        </div>\n      </header>\n      <section class="spc-print__body">\n        ').concat(a,'\n      </section>\n      <section class="spc-print__footer">\n        <div class="spc-signature__field">\n          Printed by\n          <span class="spc-signature__value">').concat(i?s(i):"&nbsp;",'</span>\n        </div>\n        <div class="spc-signature__field">\n          Authorised Signature\n          <span class="spc-signature__value"></span>\n        </div>\n      </section>\n    </main>\n    <script>\n      window.addEventListener(\'load\', () => {\n        setTimeout(() => {\n          window.focus();\n          window.print();\n          setTimeout(() => window.close(), 400);\n        }, 200);\n      });\n    <\/script>\n  </body>\n</html>')})(e),n=window.open("","_blank","width=1024,height=768");if(n){try{n.opener=null}catch(e){}n.document.open(),n.document.write(t),n.document.close()}},i=()=>{for(let t of["fullName","username","actor","applicantName","employeeName"]){var e;let n=null==(e=window.localStorage)?void 0:e.getItem(t);if(n&&n.trim().length)return n}}},11924:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>h,Lh:()=>d,bB:()=>s,bk:()=>l,cK:()=>i,iq:()=>o,iv:()=>c,kM:()=>m,lm:()=>a,qd:()=>g,rg:()=>u,rr:()=>p,uK:()=>x});var r=n(81242);async function s(e){let{data:t}=await r.A.post("/usage-requests",e);return(0,r.I)(t)}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:s}=await r.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:n}});return(0,r.I)(s)}async function i(){try{let{data:e}=await r.A.get("/usage-requests/all");return(0,r.I)(e)}catch(n){let{data:e}=await r.A.get("/usage-requests"),t=(0,r.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function c(e){try{let{data:t}=await r.A.get("/usage-requests/status/".concat(e));return(0,r.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function o(e){let{data:t}=await r.A.get("/usage-requests/".concat(e));return(0,r.I)(t)}let d=async(e,t)=>(0,r.I)((await r.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),l=async(e,t)=>(0,r.I)((await r.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),p=async(e,t)=>(0,r.I)((await r.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),u=async(e,t)=>(0,r.I)((await r.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function x(e,t){let n={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:s}=await r.A.post("/usage-requests/".concat(e,"/assign"),n);return(0,r.I)(s)}async function m(e,t){let n={};"number"==typeof t.exitOdometer&&(n.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==n.exitOdometer&&(n.exitOdometer=t.odometerStartKm);let s=[];t.remarks&&s.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&s.push(...t.exitManifest),s.length&&(n.exitManifest=s);let{data:a}=await r.A.post("/usage-requests/".concat(e,"/gate/exit"),n);return(0,r.I)(a)}async function h(e,t){let n={};"number"==typeof t.entryOdometer&&(n.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==n.entryOdometer&&(n.entryOdometer=t.odometerEndKm);let s=[];t.remarks&&s.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&s.push(...t.entryManifest),s.length&&(n.entryManifest=s);let{data:a}=await r.A.post("/usage-requests/".concat(e,"/gate/entry"),n);return(0,r.I)(a)}async function g(){let{data:e}=await r.A.get("/usage-requests/metrics");return(0,r.I)(e)}},25599:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(95155),s=n(12115),a=n(11924),i=n(7640),c=n(309),o=n(65229),d=n(74794),l=n(11382);let p=e=>e?new Date(e).toLocaleString():"—",u=e=>{let t=(null==e?void 0:e.appliedDate)||(null==e?void 0:e.applied_on)||(null==e?void 0:e.appliedOn),n=(null==e?void 0:e.appliedTime)||(null==e?void 0:e.applied_time);if(t&&n)return"".concat(t," ").concat(n);if(t&&(null==e?void 0:e.createdAt)){let n=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(t," ").concat(n)}return(null==e?void 0:e.createdAt)?p(e.createdAt):"—"},x=e=>{if(null==e)return"—";if("string"==typeof e){let t=e.trim();return(0,l.ZD)(t.length?t:"—")}return(0,l.ZD)(String(e))},m=e=>(null!=e?e:"").replace(/[^\d+()\-\s./;]/g,"").replace(/^[;,\s-]+/,"").replace(/\s{2,}/g," ").trim();function h(e){var t;let n=String(null!=(t=null==e?void 0:e.officialDescription)?t:"").split(/\r?\n/).filter(e=>!/travell?ing\s+officer\s*:/i.test(e)).join("\n");return(n=(n=n.replace(/\b(?:Phone|Tel)\s*:\s*[\+\d()\-\s./;]+/gi,"")).replace(/\s{2,}/g," ").replace(/\s+(,|\.)/g,"$1").replace(/^[\s\-–,:]+/,"").trim())||"—"}function g(e){var t,n;if(e.travelWithOfficer||e.officerName||e.officerId||e.officerPhone)return{withOfficer:!0,name:e.officerName||void 0,id:e.officerId||void 0,phone:m(e.officerPhone)||void 0};let r="".concat((null==e?void 0:e.officialDescription)||"","\n").concat((null==e?void 0:e.remarks)||""),s=/Travelling Officer:\s*([^\(\n,]+)?(?:\s*\((?:Employee\s*ID|Emp\.?\s*ID|ID)\s*:\s*([^)]+)\))?(?:,\s*(?:Phone|Tel)\s*:\s*([^\n]+))?/i.exec(r);return s?{withOfficer:!0,name:(null==(t=s[1])?void 0:t.trim())||void 0,id:(null==(n=s[2])?void 0:n.trim())||void 0,phone:m(s[3])||void 0}:{withOfficer:!1}}let f="\n  .track-table th {\n    white-space: nowrap;\n  }\n  .rq {\n    font-weight: 600;\n    color: #9a3412;\n  }\n  .sub {\n    color: #6b7280;\n    font-size: 0.78rem;\n  }\n  .mono {\n    font-family: 'JetBrains Mono', 'Fira Mono', Consolas, monospace;\n  }\n";function b(){let[e,t]=s.useState([]),[n,o]=s.useState(!0),[m,b]=s.useState(""),[y,j]=s.useState(null);s.useEffect(()=>{(async()=>{o(!0);try{let e=await (0,a.cK)(),n=new Set,r=(e||[]).filter(e=>{var t,r;let s=String(null!=(r=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.requestCode)?r:"");return!(!s||n.has(s))&&(n.add(s),!0)}).sort((e,t)=>(Date.parse((null==t?void 0:t.createdAt)||"")||0)-(Date.parse((null==e?void 0:e.createdAt)||"")||0));t(r)}catch(e){t([])}o(!1)})()},[]);let w=s.useMemo(()=>{let t=m.trim().toLowerCase();return t?e.filter(e=>[e.requestCode,e.status,e.assignedVehicleNumber,e.assignedDriverName,e.assignedDriverPhone,e.scheduledPickupAt,e.scheduledReturnAt,e.gateExitAt,e.gateEntryAt,e.exitOdometer,e.entryOdometer].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(t)):e},[e,m]),N=s.useCallback(()=>{let e=w.map((e,t)=>{let n=[e.assignedDriverName||"—",e.assignedDriverPhone?" (".concat(e.assignedDriverPhone,")"):""].join("");return"\n  <tr>\n    <td>".concat(x(t+1),'</td>\n    <td>\n      <div class="rq">').concat(x(e.requestCode),'</div>\n      <div class="sub">').concat((0,l.ZD)(u(e)),'</div>\n    </td>\n    <td class="center">').concat(x(e.status),"</td>\n    <td>\n      <div>").concat(x(e.assignedVehicleNumber),'</div>\n      <div class="sub">').concat(x(n),"</div>\n    </td>\n    <td>\n      <div>P: ").concat((0,l.ZD)(p(e.scheduledPickupAt)),'</div>\n      <div class="sub">R: ').concat((0,l.ZD)(p(e.scheduledReturnAt)),"</div>\n    </td>\n    <td>\n      <div>Exit: ").concat((0,l.ZD)(p(e.gateExitAt)),' <span class="sub">• O ').concat(x(e.exitOdometer),"</span></div>\n      <div>Entry: ").concat((0,l.ZD)(p(e.gateEntryAt)),' <span class="sub">• O ').concat(x(e.entryOdometer),"</span></div>\n    </td>\n  </tr>")}).join("");(0,l.dq)({title:"Applicant Request Tracker",subtitle:"Records shown: ".concat(w.length),contentHtml:e?'<table class="spc-table track-table">\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>RQ ID / Applied</th>\n              <th>Status</th>\n              <th>Assignment</th>\n              <th>Schedule</th>\n              <th>Gate Activity</th>\n            </tr>\n          </thead>\n          <tbody>'.concat(e,"</tbody>\n        </table>"):'<div class="spc-empty">No requests match the current filters.</div>',printedBy:(0,l.ZS)(),pageOrientation:"landscape",extraCss:f})},[w]),A=s.useCallback(e=>{let t=g(e),n=[x(e.assignedVehicleNumber),"/",x(e.assignedDriverName),e.assignedDriverPhone?" (".concat((0,l.ZD)(e.assignedDriverPhone),")"):""].join(" ").trim(),r='\n      <div class="spc-section">\n        <p class="spc-section__title">Overview</p>\n        <table class="spc-definition">\n          <tr><td>Request Code</td><td>'.concat(x(e.requestCode),"</td></tr>\n          <tr><td>Status</td><td>").concat(x(e.status),"</td></tr>\n          <tr><td>Applied</td><td>").concat((0,l.ZD)(u(e)),"</td></tr>\n          <tr><td>Applicant</td><td>").concat(x(e.applicantName)," (").concat(x(e.employeeId),")</td></tr>\n          <tr><td>Department</td><td>").concat(x(e.department),'</td></tr>\n        </table>\n      </div>\n      <div class="spc-section">\n        <p class="spc-section__title">Travel & Route</p>\n        <table class="spc-definition">\n          <tr><td>Date of Travel</td><td>').concat(x(e.dateOfTravel),"</td></tr>\n          <tr><td>Time</td><td>").concat(x(e.timeFrom)," – ").concat(x(e.timeTo)," ").concat(e.overnight?"(overnight)":"","</td></tr>\n          <tr><td>Route</td><td>").concat(x(e.fromLocation)," → ").concat(x(e.toLocation),"</td></tr>\n          <tr><td>Official Description</td><td>").concat((0,l.ZD)(h(e)),"</td></tr>\n          <tr><td>Goods</td><td>").concat(x(e.goods),'</td></tr>\n        </table>\n      </div>\n      <div class="spc-section">\n        <p class="spc-section__title">Officer & Assignment</p>\n        <table class="spc-definition">\n          <tr><td>Travelling with Officer</td><td>').concat(t.withOfficer?"Yes":"No","</td></tr>\n          <tr><td>Officer</td><td>").concat(t.withOfficer?"".concat((0,l.ZD)(t.name||"—")).concat(t.id?" (".concat((0,l.ZD)(t.id),")"):"").concat(t.phone?", ".concat((0,l.ZD)(t.phone)):""):"—","</td></tr>\n          <tr><td>Vehicle / Driver</td><td>").concat(n,"</td></tr>\n          <tr><td>Pickup</td><td>").concat((0,l.ZD)(p(e.scheduledPickupAt)),"</td></tr>\n          <tr><td>Return</td><td>").concat((0,l.ZD)(p(e.scheduledReturnAt)),'</td></tr>\n        </table>\n      </div>\n      <div class="spc-section">\n        <p class="spc-section__title">Gate Logs</p>\n        <table class="spc-definition">\n          <tr><td>Gate Exit</td><td>').concat((0,l.ZD)(p(e.gateExitAt))," • O ").concat(x(e.exitOdometer),"</td></tr>\n          <tr><td>Gate Entry</td><td>").concat((0,l.ZD)(p(e.gateEntryAt))," • O ").concat(x(e.entryOdometer),"</td></tr>\n        </table>\n      </div>\n    ");(0,l.dq)({title:"Transport Request",subtitle:"Code: ".concat(e.requestCode||"—"),contentHtml:r,printedBy:(0,l.ZS)(),extraCss:f})},[]),k=s.useMemo(()=>["15%","12%","22%","21%","24%","6%"],[]);return(0,r.jsxs)("div",{className:"space-y-4 text-[13px]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-orange-700",children:"Track"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-orange-900",children:"Request progress"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Monitor assignments, schedule and gate activity in one place."})]}),(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2 lg:w-auto lg:flex-row lg:items-center",children:[(0,r.jsx)(d.A,{value:m,onChange:b,placeholder:"Search code, vehicle, driver, gate…",className:"w-full lg:w-80"}),(0,r.jsxs)("button",{type:"button",onClick:N,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-orange-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-orange-700",title:"Print all (current filter)",children:[(0,r.jsx)(c.A,{size:14}),"Print"]})]})]}),!e.length&&(0,r.jsx)("div",{className:"mb-3 text-[11px] rounded bg-yellow-50 border border-yellow-200 text-yellow-800 px-2 py-1",children:"Tip: after your first submission, your Employee ID is remembered automatically."}),(0,r.jsx)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full table-fixed text-[12.5px] leading-[1.25]",children:[(0,r.jsx)("colgroup",{children:k.map((e,t)=>(0,r.jsx)("col",{style:{width:e}},t))}),(0,r.jsx)("thead",{className:"bg-orange-50",children:(0,r.jsxs)("tr",{className:"text-[12px]",children:[(0,r.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"RQ ID / Applied"}),(0,r.jsx)(i.Th,{className:"px-2 py-1 text-center",children:"Status"}),(0,r.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Assigned"}),(0,r.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Schedule"}),(0,r.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Gate"}),(0,r.jsx)(i.Th,{className:"px-2 py-1 text-center",children:"Print"})]})}),(0,r.jsxs)("tbody",{className:"divide-y",children:[n&&(0,r.jsx)("tr",{children:(0,r.jsx)(i.Td,{colSpan:6,className:"px-2 py-6 text-center text-gray-500",children:"Loading…"})}),!n&&w.map(e=>{var t,n,s;return(0,r.jsxs)("tr",{className:"align-top hover:bg-orange-50/40 cursor-pointer",onClick:()=>j(e),children:[(0,r.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,r.jsx)("div",{className:"font-semibold text-orange-900",children:e.requestCode||"—"}),(0,r.jsx)("div",{className:"text-[11px] text-gray-600",children:u(e)})]}),(0,r.jsx)(i.Td,{className:"px-2 py-1 text-center align-top",children:(0,r.jsx)("div",{className:"flex items-start justify-center min-w-0",children:function(e){let t=(e||"—").toUpperCase().trim(),n=t.replaceAll("_"," ");return("PENDING_MANAGEMENT"===t||"PENDING MANAGMENT"===t)&&(n="PENDING MGMT"),"SENT_TO_MANAGEMENT"===t&&(n="SENT TO MGMT"),(0,r.jsx)("span",{className:"inline-flex items-center justify-center px-2 py-[3px] rounded leading-[1.05] text-[11px] bg-orange-100 text-orange-800 whitespace-normal break-words max-w-[9.5rem]",children:n||"—"})}(e.status)})}),(0,r.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,r.jsx)("div",{children:e.assignedVehicleNumber||"—"}),(0,r.jsxs)("div",{className:"text-[11px] text-gray-700",children:[e.assignedDriverName||"—",e.assignedDriverPhone?" (".concat(e.assignedDriverPhone,")"):""]})]}),(0,r.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,r.jsxs)("div",{children:["P: ",p(e.scheduledPickupAt)]}),(0,r.jsxs)("div",{className:"text-[11px] text-gray-700",children:["R: ",p(e.scheduledReturnAt)]})]}),(0,r.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,r.jsxs)("div",{children:["Ex ",p(e.gateExitAt)," ",(0,r.jsxs)("span",{className:"text-[11px] text-gray-600",children:["• O ",null!=(t=e.exitOdometer)?t:"—"]})]}),(0,r.jsxs)("div",{children:["En ",p(e.gateEntryAt)," ",(0,r.jsxs)("span",{className:"text-[11px] text-gray-600",children:["• O ",null!=(n=e.entryOdometer)?n:"—"]})]})]}),(0,r.jsx)(i.Td,{className:"px-2 py-1 text-center",children:(0,r.jsx)("button",{type:"button",className:"inline-flex items-center justify-center w-7 h-7 rounded bg-orange-600 text-white hover:bg-orange-700",title:"Print this row",onClick:t=>{t.stopPropagation(),A(e)},children:(0,r.jsx)(c.A,{size:13})})})]},String(null!=(s=null==e?void 0:e.id)?s:null==e?void 0:e.requestCode))}),!n&&!w.length&&(0,r.jsx)("tr",{children:(0,r.jsx)(i.Td,{colSpan:6,className:"px-2 py-6 text-center text-gray-500",children:"No requests found."})})]})]})}),y&&(0,r.jsx)(v,{request:y,onClose:()=>j(null)})]})}function v(e){var t,n;let{request:s,onClose:a}=e,i=g(s);return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-3",onClick:a,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-orange-50",children:[(0,r.jsxs)("h3",{className:"font-bold text-orange-900 text-[13px]",children:["Request • ",s.requestCode]}),(0,r.jsx)("button",{className:"p-1 rounded hover:bg-orange-100",onClick:a,"aria-label":"Close",children:(0,r.jsx)(o.A,{size:16})})]}),(0,r.jsx)("div",{className:"p-4 text-[12px] leading-tight space-y-3",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Applicant & Status"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Applicant:"})," ",s.applicantName||"—"," ",(0,r.jsxs)("span",{className:"text-[11px] text-gray-600",children:["(",s.employeeId||"—",")"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Department:"})," ",s.department||"—"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Status:"})," ",s.status]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Applied:"})," ",u(s)]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Travel Plan"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Date of Travel:"})," ",s.dateOfTravel||"—"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Time:"})," ",s.timeFrom||"—"," – ",s.timeTo||"—"," ",s.overnight?"(overnight)":""]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Route:"})," ",s.fromLocation||"—"," → ",s.toLocation||"—"]})]}),(0,r.jsxs)("section",{className:"md:col-span-2 border border-orange-100 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-2",children:"Official Description / Goods"}),(0,r.jsx)("div",{className:"text-orange-900 break-words break-all mb-1",children:h(s)}),(0,r.jsxs)("div",{className:"text-[11px] text-gray-700",children:["Goods: ",s.goods||"—"]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Officer"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Travelling with Officer:"})," ",s.travelWithOfficer||i.withOfficer?"Yes":"No"]}),(0,r.jsxs)("div",{className:"break-words break-all",children:[(0,r.jsx)("b",{children:"Officer:"})," ",i.withOfficer?(0,r.jsxs)(r.Fragment,{children:[i.name||"—"," ",i.id?(0,r.jsxs)("span",{className:"text-[11px] text-gray-600",children:["(",i.id,")"]}):null,i.phone?", ".concat(i.phone):""]}):"—"]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Assignment & Schedule"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Vehicle:"})," ",s.assignedVehicleNumber||"—"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Driver:"})," ",s.assignedDriverName||"—",s.assignedDriverPhone?" (".concat(s.assignedDriverPhone,")"):""]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Pickup:"})," ",p(s.scheduledPickupAt)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Return:"})," ",p(s.scheduledReturnAt)]})]}),(0,r.jsxs)("section",{className:"md:col-span-2",children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Gate / Trip"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Exit:"})," ",p(s.gateExitAt)," • ",(0,r.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(t=s.exitOdometer)?t:"—"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Entry:"})," ",p(s.gateEntryAt)," • ",(0,r.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(n=s.entryOdometer)?n:"—"]})]})]}),(0,r.jsxs)("section",{className:"md:col-span-2 border border-orange-100 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Audit"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Created by:"})," ",s.createdBy||"—"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Created at:"})," ",p(s.createdAt)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Updated by:"})," ",s.updatedBy||"—"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Updated at:"})," ",s.updatedAt?p(s.updatedAt):"—"]})]})]})})]})})}},29181:(e,t,n)=>{Promise.resolve().then(n.bind(n,25599))},65229:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71847:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:d="",children:l,iconNode:p,...u}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:n,strokeWidth:o?24*Number(c)/Number(s):c,className:a("lucide",d),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...p.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),o=(e,t)=>{let n=(0,r.forwardRef)((n,i)=>{let{className:o,...d}=n;return(0,r.createElement)(c,{ref:i,iconNode:t,className:a("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return n.displayName=s(e),n}},74794:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(95155),s=n(86651),a=n(65229);function i(e){let{value:t,onChange:n,placeholder:i="Search…",className:c=""}=e;return(0,r.jsx)("div",{className:"w-full ".concat(c).trim(),children:(0,r.jsxs)("div",{className:"relative flex items-center",children:[(0,r.jsx)(s.A,{size:16,className:"absolute left-3 text-orange-500 pointer-events-none","aria-hidden":"true"}),(0,r.jsx)("input",{value:t,onChange:e=>n(e.target.value),placeholder:i,className:"hod-search-input w-full rounded-xl border border-orange-200 bg-white py-2.5 pl-9 pr-8 text-sm text-orange-900 placeholder:text-orange-400/70 focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-300"}),t?(0,r.jsx)("button",{type:"button",onClick:()=>n(""),className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-full text-orange-500 hover:bg-orange-100","aria-label":"Clear search",children:(0,r.jsx)(a.A,{size:14})}):null]})})}},81242:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,I:()=>d});var r=n(95125),s=n(95704);let a=(s.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),i=Math.min(Number(s.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),c=r.A.create({baseURL:a?"".concat(a,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:i}),o=c;function d(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}c.interceptors.request.use(e=>{{var t,n;let r=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;r&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=r);let s=localStorage.getItem("role")||void 0;s&&(e.headers=null!=(n=e.headers)?n:{},e.headers["X-Role"]=s)}return e}),c.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,n=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||n.includes("timeout")){var r,s,a,i;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(a=null==(r=e.response)?void 0:r.status)?a:0,statusText:"Request Timeout",data:null,headers:null!=(i=null==(s=e.response)?void 0:s.headers)?i:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},e=>{e.O(0,[5125,8441,1255,7358],()=>e(e.s=29181)),_N_E=e.O()}]);