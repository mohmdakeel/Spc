(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9215],{309:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(71847).A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},7640:(e,t,n)=>{"use strict";n.d(t,{Td:()=>s,Th:()=>r});var a=n(95155);function r(e){let{children:t,className:n="",sortable:r,sortDirection:s,onClick:i,...l}=e;return(0,a.jsx)("th",{...l,"aria-sort":"asc"===s?"ascending":"desc"===s?"descending":"none",onClick:r?i:void 0,onKeyDown:r?e=>{r&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==i||i())}:void 0,tabIndex:r?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",r?"cursor-pointer hover:bg-orange-200 transition-colors":"",s?"bg-orange-200":"",n].join(" "),children:(0,a.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,r&&(0,a.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===s?"↑":"desc"===s?"↓":"↕"})]})})}function s(e){let{children:t,className:n="",highlight:r,...s}=e;return(0,a.jsx)("td",{...s,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",r?"bg-orange-50 font-medium":"",n].join(" "),children:t})}n(12115)},11382:(e,t,n)=>{"use strict";n.d(t,{ZD:()=>r,ZS:()=>i,dq:()=>s});let a={name:"State Printing Corporation",tagline:"Official ERP Workspace",address:"Panaluwa, Watareka, Padukka, Sri Lanka",contact:"Phone: 0112757505 / 0112859308 • Fax: 011-2757506 • Email: chairmanspc2022@gmail.com • www.spclanka.gov.lk"},r=e=>null==e?"":String(e).replace(/[&<>"']/g,e=>{switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return e}}),s=e=>{let t=(e=>{let{title:t,subtitle:n,contentHtml:s,printedBy:i,pageOrientation:l,extraCss:o}=e,c=new Date,d="".concat(c.toLocaleDateString()," ").concat(c.toLocaleTimeString()),p=new URL("/spclogopic.png",window.location.origin).toString();return'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <title>'.concat(r(t),"</title>\n    <style>\n      @page {\n        margin: 15mm;\n        size: A4 ").concat("landscape"===l?"landscape":"portrait",";\n      }\n      body {\n        margin: 0;\n        font-family: 'Inter', 'Segoe UI', Arial, sans-serif;\n        color: #1f2937;\n        background: #ffffff;\n      }\n      .spc-print {\n        max-width: 960px;\n        margin: 0 auto;\n        padding: 32px 36px;\n      }\n      .spc-print__header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 2px solid #ea580c;\n        padding-bottom: 16px;\n        margin-bottom: 24px;\n        gap: 24px;\n      }\n      .spc-brand {\n        display: flex;\n        align-items: center;\n        gap: 16px;\n      }\n      .spc-brand__logo {\n        width: 64px;\n        height: 64px;\n        border-radius: 18px;\n        border: 1px solid rgba(249, 115, 22, 0.35);\n        background: rgba(249, 115, 22, 0.08);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 8px;\n      }\n      .spc-brand__logo img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n      .spc-brand__text {\n        line-height: 1.3;\n      }\n      .spc-brand__name {\n        font-size: 1.25rem;\n        font-weight: 700;\n        margin: 0;\n        color: #7c2d12;\n      }\n      .spc-brand__tagline {\n        font-size: 0.9rem;\n        margin: 0;\n        color: #9a3412;\n      }\n      .spc-brand__meta {\n        font-size: 0.8rem;\n        margin: 4px 0 0;\n        color: #6b7280;\n      }\n      .spc-document-meta {\n        text-align: right;\n        font-size: 0.85rem;\n        color: #4b5563;\n      }\n      .spc-document-meta strong {\n        display: block;\n        color: #111827;\n      }\n      .spc-print__body h1 {\n        font-size: 1.4rem;\n        margin: 0 0 6px;\n        color: #111827;\n      }\n      .spc-print__body h2 {\n        font-size: 1rem;\n        margin: 0 0 18px;\n        color: #6b7280;\n        font-weight: 500;\n      }\n      .spc-table {\n        width: 100%;\n        border-collapse: separate;\n        border-spacing: 0;\n        margin-top: 12px;\n        font-size: 0.88rem;\n        border: 1px solid #f0d5bf;\n        border-radius: 12px;\n        overflow: hidden;\n      }\n      .spc-table thead th {\n        text-align: left;\n        padding: 8px 10px;\n        background: #fff1e6;\n        color: #7c2d12;\n        border: 1px solid #f9d6b4;\n        font-size: 0.82rem;\n      }\n      .spc-table tbody td {\n        padding: 8px 10px;\n        border-bottom: 1px solid #f0d5bf;\n        border-right: 1px solid #f0d5bf;\n        color: #374151;\n      }\n      .spc-table tr:last-child td {\n        border-bottom: none;\n      }\n      .spc-empty {\n        padding: 16px;\n        border: 1px dashed #f8c4a0;\n        background: #fff8f0;\n        text-align: center;\n        font-size: 0.9rem;\n        color: #92400e;\n        border-radius: 8px;\n        margin-top: 16px;\n      }\n      .spc-section {\n        border: 1px solid #f4d6be;\n        border-radius: 14px;\n        padding: 16px 20px;\n        margin-top: 16px;\n        background: #fffdfb;\n      }\n      .spc-section + .spc-section {\n        margin-top: 20px;\n      }\n      .spc-section__title {\n        font-size: 1rem;\n        font-weight: 600;\n        margin: 0 0 12px;\n        color: #1f2937;\n      }\n      .spc-definition {\n        width: 100%;\n        border-collapse: collapse;\n      }\n      .spc-definition td {\n        padding: 6px 0;\n        font-size: 0.9rem;\n        vertical-align: top;\n      }\n      .spc-definition td:first-child {\n        width: 35%;\n        font-weight: 600;\n        color: #4b5563;\n      }\n      .spc-definition td:last-child {\n        color: #111827;\n      }\n      .spc-chip {\n        display: inline-flex;\n        align-items: center;\n        padding: 2px 10px;\n        border-radius: 999px;\n        font-size: 0.78rem;\n        font-weight: 600;\n        margin: 2px 6px 0 0;\n      }\n      .spc-chip--role {\n        background: #fff3e0;\n        border: 1px solid #fdba74;\n        color: #9a3412;\n      }\n      .spc-chip--perm {\n        background: #e0f2fe;\n        border: 1px solid #93c5fd;\n        color: #1e3a8a;\n      }\n      .spc-print__footer {\n        margin-top: 32px;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 32px;\n        font-size: 0.85rem;\n        color: #374151;\n      }\n      .spc-signature__field {\n        min-width: 220px;\n      }\n      .spc-signature__value {\n        display: block;\n        min-height: 24px;\n        border-bottom: 1px solid #d1d5db;\n        margin-top: 6px;\n      }\n      @media print {\n        body {\n          background: #fff;\n        }\n        .spc-print {\n          padding: 0;\n        }\n      }\n      ").concat(o||"",'\n    </style>\n  </head>\n  <body>\n    <main class="spc-print">\n      <header class="spc-print__header">\n        <div class="spc-brand">\n          <div class="spc-brand__logo">\n            <img src="').concat(p,'" alt="').concat(r(a.name),' logo" />\n          </div>\n          <div class="spc-brand__text">\n            <p class="spc-brand__name">').concat(r(a.name),'</p>\n            <p class="spc-brand__tagline">').concat(r(a.tagline),'</p>\n            <p class="spc-brand__meta">').concat(r(a.address)," • ").concat(r(a.contact),'</p>\n          </div>\n        </div>\n        <div class="spc-document-meta">\n          <strong>').concat(r(t),"</strong>\n          ").concat(n?"<span>".concat(r(n),"</span>"):"","\n          <span>Printed on: ").concat(r(d),'</span>\n        </div>\n      </header>\n      <section class="spc-print__body">\n        ').concat(s,'\n      </section>\n      <section class="spc-print__footer">\n        <div class="spc-signature__field">\n          Printed by\n          <span class="spc-signature__value">').concat(i?r(i):"&nbsp;",'</span>\n        </div>\n        <div class="spc-signature__field">\n          Authorised Signature\n          <span class="spc-signature__value"></span>\n        </div>\n      </section>\n    </main>\n    <script>\n      window.addEventListener(\'load\', () => {\n        setTimeout(() => {\n          window.focus();\n          window.print();\n          setTimeout(() => window.close(), 400);\n        }, 200);\n      });\n    <\/script>\n  </body>\n</html>')})(e),n=window.open("","_blank","width=1024,height=768");if(n){try{n.opener=null}catch(e){}n.document.open(),n.document.write(t),n.document.close()}},i=()=>{for(let t of["fullName","username","actor","applicantName","employeeName"]){var e;let n=null==(e=window.localStorage)?void 0:e.getItem(t);if(n&&n.trim().length)return n}}},11924:(e,t,n)=>{"use strict";n.d(t,{Cd:()=>h,Lh:()=>c,bB:()=>r,bk:()=>d,cK:()=>i,iq:()=>o,iv:()=>l,kM:()=>x,lm:()=>s,qd:()=>g,rg:()=>u,rr:()=>p,uK:()=>m});var a=n(81242);async function r(e){let{data:t}=await a.A.post("/usage-requests",e);return(0,a.I)(t)}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:r}=await a.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:n}});return(0,a.I)(r)}async function i(){try{let{data:e}=await a.A.get("/usage-requests/all");return(0,a.I)(e)}catch(n){let{data:e}=await a.A.get("/usage-requests"),t=(0,a.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function l(e){try{let{data:t}=await a.A.get("/usage-requests/status/".concat(e));return(0,a.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function o(e){let{data:t}=await a.A.get("/usage-requests/".concat(e));return(0,a.I)(t)}let c=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),d=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),p=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),u=async(e,t)=>(0,a.I)((await a.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function m(e,t){let n={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:r}=await a.A.post("/usage-requests/".concat(e,"/assign"),n);return(0,a.I)(r)}async function x(e,t){let n={};"number"==typeof t.exitOdometer&&(n.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==n.exitOdometer&&(n.exitOdometer=t.odometerStartKm);let r=[];t.remarks&&r.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&r.push(...t.exitManifest),r.length&&(n.exitManifest=r);let{data:s}=await a.A.post("/usage-requests/".concat(e,"/gate/exit"),n);return(0,a.I)(s)}async function h(e,t){let n={};"number"==typeof t.entryOdometer&&(n.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==n.entryOdometer&&(n.entryOdometer=t.odometerEndKm);let r=[];t.remarks&&r.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&r.push(...t.entryManifest),r.length&&(n.entryManifest=r);let{data:s}=await a.A.post("/usage-requests/".concat(e,"/gate/entry"),n);return(0,a.I)(s)}async function g(){let{data:e}=await a.A.get("/usage-requests/metrics");return(0,a.I)(e)}},36104:(e,t,n)=>{Promise.resolve().then(n.bind(n,56592))},56592:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var a=n(95155),r=n(12115),s=n(11924),i=n(7640),l=n(309),o=n(65229),c=n(74794),d=n(11382),p=n(99947);let u=e=>e?new Date(e).toLocaleString():"—",m=e=>{let t=(null==e?void 0:e.appliedDate)||(null==e?void 0:e.applied_on)||(null==e?void 0:e.appliedOn),n=(null==e?void 0:e.appliedTime)||(null==e?void 0:e.applied_time);if(t&&n)return"".concat(t," ").concat(n);if(t&&(null==e?void 0:e.createdAt)){let n=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(t," ").concat(n)}return(null==e?void 0:e.createdAt)?u(e.createdAt):"—"},x=e=>[null==e?void 0:e.createdBy,null==e?void 0:e.created_by,null==e?void 0:e.actor].map(e=>null==e?"":String(e).trim()).find(e=>e&&!["system","null","undefined","-"].includes(e.toLowerCase()))||"—",h=(e,t)=>{var n;let a=null!=(n=null==e?void 0:e.updatedBy)?n:null==e?void 0:e.updated_by,r=null==a?"":String(a).trim();return r&&!["system","null","undefined","-"].includes(r.toLowerCase())?r:t||"—"},g=e=>(null!=e?e:"").replace(/[^\d+()\-\s./;]/g,"").replace(/^[;,\s-]+/,"").replace(/\s{2,}/g," ").trim();function f(e){var t;let n=String(null!=(t=null==e?void 0:e.officialDescription)?t:"").split(/\r?\n/).filter(e=>!/travell?ing\s+officer\s*:/i.test(e)).join("\n");return(n=(n=n.replace(/\b(?:Phone|Tel)\s*:\s*[\+\d()\-\s./;]+/gi,"")).replace(/\s{2,}/g," ").replace(/\s+(,|\.)/g,"$1").replace(/^[\s\-–,:]+/,"").trim())||"—"}function v(e){var t,n;if(e.travelWithOfficer||e.officerName||e.officerId||e.officerPhone)return{withOfficer:!0,name:e.officerName||void 0,id:e.officerId||void 0,phone:g(e.officerPhone)||void 0};let a="".concat((null==e?void 0:e.officialDescription)||"","\n").concat((null==e?void 0:e.remarks)||""),r=/Travelling Officer:\s*([^\(\n,]+)?(?:\s*\((?:Employee\s*ID|Emp\.?\s*ID|ID)\s*:\s*([^)]+)\))?(?:,\s*(?:Phone|Tel)\s*:\s*([^\n]+))?/i.exec(a);return r?{withOfficer:!0,name:(null==(t=r[1])?void 0:t.trim())||void 0,id:(null==(n=r[2])?void 0:n.trim())||void 0,phone:g(r[3])||void 0}:{withOfficer:!1}}let b=e=>{if(null==e)return"—";if("string"==typeof e){let t=e.trim();return(0,d.ZD)(t.length?t:"—")}return(0,d.ZD)(String(e))},y="\n  .rq {\n    font-weight: 600;\n    color: #9a3412;\n  }\n  .sub {\n    color: #6b7280;\n    font-size: 0.78rem;\n  }\n  .mono {\n    font-family: 'JetBrains Mono', 'Fira Mono', Consolas, monospace;\n  }\n",j=e=>{var t,n,a,r,s,i,l;let o=null!=(n=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.requestCode)?n:"".concat((null==e?void 0:e.employeeId)||"emp","-").concat((null==e?void 0:e.dateOfTravel)||"date","-").concat((null==e?void 0:e.timeFrom)||"time"),c=null!=(l=null!=(i=null!=(s=null!=(r=null!=(a=null==e?void 0:e.updatedAt)?a:null==e?void 0:e.createdAt)?r:null==e?void 0:e.appliedDate)?s:null==e?void 0:e.appliedOn)?i:null==e?void 0:e.appliedTime)?l:"";return"".concat(String(o)).concat(c?"-".concat(c):"")},w=e=>{let t=new Set;return e.filter(e=>{let n=j(e);return!t.has(n)&&(t.add(n),!0)})};function N(){let e=Array.from(new Set([localStorage.getItem("employeeId")||"",localStorage.getItem("actor")||"",localStorage.getItem("username")||""].filter(Boolean))),t=e.flatMap(e=>(0,p.x)("cache:applicant:requests:".concat(e))||[]),n=(0,p.x)("cache:applicant:requests:all")||[],o=w(t.length?t:n),[g,N]=r.useState(o),[k,T]=r.useState(e),[_,S]=r.useState(!o.length),[O,I]=r.useState(""),[D,E]=r.useState(null);r.useEffect(()=>{let e=localStorage.getItem("employeeId")||"",t=Array.from(new Set([e,localStorage.getItem("actor")||"",localStorage.getItem("username")||""].filter(Boolean)));T(t),(async()=>{S(!0);let e=[];for(let r of t)try{let t=0,i=1;for(;t<i;){var n,a;let l=await (0,s.lm)(r,t,100);e=e.concat((null==l?void 0:l.content)||[]),i=null!=(n=null==l?void 0:l.totalPages)?n:1,t=(null!=(a=null==l?void 0:l.number)?a:t)+1}}catch(e){}try{let n=(await (0,s.cK)()).filter(e=>{var n,a;let r=null!=(a=null!=(n=null==e?void 0:e.createdBy)?n:null==e?void 0:e.created_by)?a:"";return t.includes(null==e?void 0:e.employeeId)||t.includes(r)});e=e.concat(n)}catch(e){}(e=w(e)).sort((e,t)=>(Date.parse((null==t?void 0:t.createdAt)||"")||0)-(Date.parse((null==e?void 0:e.createdAt)||"")||0)),t.forEach(t=>(0,p.a)("cache:applicant:requests:".concat(t),e)),(0,p.a)("cache:applicant:requests:all",e),N(e),S(!1)})()},[]);let C=r.useMemo(()=>{let e=O.trim().toLowerCase();return e?g.filter(t=>[null==t?void 0:t.requestCode,null==t?void 0:t.status,null==t?void 0:t.applicantName,null==t?void 0:t.employeeId,null==t?void 0:t.department,null==t?void 0:t.fromLocation,null==t?void 0:t.toLocation,null==t?void 0:t.officialDescription,null==t?void 0:t.goods,null==t?void 0:t.appliedDate,null==t?void 0:t.appliedTime].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(e)):g},[g,O]),q=r.useCallback(()=>{let e=C.map(e=>{let t=v(e),n=x(e),a=t.withOfficer?"".concat(b(t.name)).concat(t.id?' <span class="sub">('.concat(b(t.id),")</span>"):"").concat(t.phone?", ".concat(b(t.phone)):""):"—";return'\n  <tr>\n    <td>\n      <div class="rq">'.concat(b(e.requestCode),'</div>\n      <div class="sub">').concat((0,d.ZD)(m(e)),"</div>\n    </td>\n    <td>\n      ").concat(b(e.applicantName),' <span class="sub">(').concat(b(e.employeeId),')</span>\n      <div class="sub">').concat(b(e.department),'</div>\n      <div class="sub">Account: ').concat(b(n),'</div>\n    </td>\n    <td class="center">').concat(b(e.status),"</td>\n    <td>\n      <div>").concat(b(e.dateOfTravel),'</div>\n      <div class="sub mono">').concat(b(e.timeFrom)," – ").concat(b(e.timeTo)," ").concat(e.overnight?"(overnight)":"","</div>\n    </td>\n    <td>").concat(b(e.fromLocation)," → ").concat(b(e.toLocation),"</td>\n    <td>").concat(a,"</td>\n    <td>\n      <div>").concat((0,d.ZD)(f(e)),'</div>\n      <div class="sub">').concat(b(e.goods),"</div>\n    </td>\n  </tr>")}).join("");(0,d.dq)({title:"Applicant Requests",subtitle:"Records shown: ".concat(C.length),contentHtml:e?'<table class="spc-table">\n          <thead>\n            <tr>\n              <th>RQ ID / Applied</th>\n              <th>Applicant / Dept</th>\n              <th>Status</th>\n              <th>Travel</th>\n              <th>Route</th>\n              <th>Officer</th>\n              <th>Purpose / Goods</th>\n            </tr>\n          </thead>\n          <tbody>'.concat(e,"</tbody>\n        </table>"):'<div class="spc-empty">No requests match the current filters.</div>',pageOrientation:"landscape",printedBy:(0,d.ZS)(),extraCss:y})},[C]),P=r.useCallback(e=>{let t=v(e),n=x(e),a=h(e,n),r=t.withOfficer?"".concat(b(t.name)).concat(t.id?" (".concat(b(t.id),")"):"").concat(t.phone?", ".concat(b(t.phone)):""):"—",s='\n      <div class="spc-section">\n        <p class="spc-section__title">Applicant Details</p>\n        <table class="spc-definition">\n          <tr><td>Applicant</td><td>'.concat(b(e.applicantName)," (").concat(b(e.employeeId),")</td></tr>\n          <tr><td>Department</td><td>").concat(b(e.department),"</td></tr>\n          <tr><td>Status</td><td>").concat(b(e.status),"</td></tr>\n          <tr><td>Applied</td><td>").concat((0,d.ZD)(m(e)),"</td></tr>\n          <tr><td>Account Username</td><td>").concat((0,d.ZD)(n),"</td></tr>\n          <tr><td>Last Updated By</td><td>").concat((0,d.ZD)(a),'</td></tr>\n        </table>\n      </div>\n      <div class="spc-section">\n        <p class="spc-section__title">Travel Plan</p>\n        <table class="spc-definition">\n          <tr><td>Date of Travel</td><td>').concat(b(e.dateOfTravel),"</td></tr>\n          <tr><td>Time</td><td>").concat(b(e.timeFrom)," – ").concat(b(e.timeTo)," ").concat(e.overnight?"(overnight)":"","</td></tr>\n          <tr><td>Route</td><td>").concat(b(e.fromLocation)," → ").concat(b(e.toLocation),"</td></tr>\n          <tr><td>Pickup</td><td>").concat((0,d.ZD)(u(e.scheduledPickupAt)),"</td></tr>\n          <tr><td>Return</td><td>").concat((0,d.ZD)(u(e.scheduledReturnAt)),'</td></tr>\n        </table>\n      </div>\n      <div class="spc-section">\n        <p class="spc-section__title">Officer & Purpose</p>\n        <table class="spc-definition">\n          <tr><td>Travelling Officer</td><td>').concat(r,"</td></tr>\n          <tr><td>Official Description</td><td>").concat((0,d.ZD)(f(e)),"</td></tr>\n          <tr><td>Goods</td><td>").concat(b(e.goods),'</td></tr>\n        </table>\n      </div>\n      <div class="spc-section">\n        <p class="spc-section__title">Gate</p>\n        <table class="spc-definition">\n          <tr><td>Exit</td><td>').concat((0,d.ZD)(u(e.gateExitAt))," • O ").concat(b(e.exitOdometer),"</td></tr>\n          <tr><td>Entry</td><td>").concat((0,d.ZD)(u(e.gateEntryAt))," • O ").concat(b(e.entryOdometer),"</td></tr>\n        </table>\n      </div>\n    ");(0,d.dq)({title:"Transport Request",subtitle:"Code: ".concat(e.requestCode||"—"),contentHtml:s,printedBy:(0,d.ZS)(),extraCss:y})},[]),L=r.useMemo(()=>["12%","17%","10%","12%","15%","14%","14%","6%"],[]);return(0,a.jsxs)("div",{className:"space-y-4 text-[13px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-orange-700",children:"Requests"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-orange-900",children:"My submissions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Search, print or drill into your transport requests."})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-2 lg:w-auto lg:flex-row lg:items-center",children:[(0,a.jsx)(c.A,{value:O,onChange:I,placeholder:"Search code, applicant, dept, route…",className:"w-full lg:w-80"}),(0,a.jsxs)("button",{type:"button",onClick:q,className:"inline-flex items-center justify-center gap-2 rounded-xl bg-orange-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-orange-700",title:"Print all (current filter)",children:[(0,a.jsx)(l.A,{size:14}),"Print"]})]})]}),!k.length&&(0,a.jsx)("div",{className:"mb-3 text-[11px] rounded bg-yellow-50 border border-yellow-200 text-yellow-800 px-2 py-1",children:"Tip: after your first submission, your Employee ID is remembered automatically."}),(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full table-fixed text-[12.5px] leading-[1.25]",children:[(0,a.jsx)("colgroup",{children:L.map((e,t)=>(0,a.jsx)("col",{style:{width:e}},t))}),(0,a.jsx)("thead",{className:"bg-orange-50",children:(0,a.jsxs)("tr",{className:"text-[12px]",children:[(0,a.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"RQ ID / Applied"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Applicant / Dept"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-center",children:"Status"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Travel"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Route"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Officer"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Purpose / Goods"}),(0,a.jsx)(i.Th,{className:"px-2 py-1 text-center",children:"Print"})]})}),(0,a.jsxs)("tbody",{className:"divide-y",children:[_&&(0,a.jsx)("tr",{children:(0,a.jsx)(i.Td,{colSpan:8,className:"px-2 py-6 text-center text-gray-500",children:"Loading…"})}),!_&&C.map(e=>{var t;let n=v(e),r=j(e);return(0,a.jsxs)("tr",{className:"align-top hover:bg-orange-50/40 cursor-pointer",onClick:()=>E(e),children:[(0,a.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,a.jsx)("div",{className:"font-semibold text-orange-900",children:e.requestCode||"—"}),(0,a.jsx)("div",{className:"text-[11px] text-gray-600",children:m(e)})]}),(0,a.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-orange-900",children:e.applicantName||"—"})," ",(0,a.jsxs)("span",{className:"text-gray-600 text-[11px]",children:["(",e.employeeId||"—",")"]})]}),(0,a.jsx)("div",{className:"text-[11px] text-gray-700",children:e.department||"—"}),(0,a.jsxs)("div",{className:"text-[10px] text-gray-500",children:["Account: ",x(e)]})]}),(0,a.jsx)(i.Td,{className:"px-2 py-1 text-center align-top",children:(0,a.jsx)("div",{className:"flex items-start justify-center min-w-0",children:function(e){let t=(e||"—").toUpperCase().trim(),n="APPROVED"===t?"bg-green-100 text-green-800":"REJECTED"===t?"bg-red-100 text-red-800":"ASSIGNED"===t?"bg-blue-100 text-blue-800":"COMPLETED"===t?"bg-slate-100 text-slate-800":"bg-orange-100 text-orange-800",r=t.replaceAll("_"," ");return("PENDING_MANAGEMENT"===t||"PENDING MANAGMENT"===t)&&(r="PENDING MGMT"),"SENT_TO_MANAGEMENT"===t&&(r="SENT TO MGMT"),"PENDING_HOD"===t&&(r="PENDING HOD"),(0,a.jsx)("span",{className:["inline-flex items-center justify-center px-2 py-[3px] rounded leading-[1.05] text-[11px]",n,"whitespace-normal break-words text-center max-w-[9.5rem]"].join(" "),children:r||"—"})}(e.status)})}),(0,a.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,a.jsx)("div",{children:e.dateOfTravel||"—"}),(0,a.jsxs)("div",{className:"text-[11px] text-gray-600",children:[(0,a.jsx)("span",{className:"font-mono",children:e.timeFrom||"—"}),"–",(0,a.jsx)("span",{className:"font-mono",children:e.timeTo||"—"})," ",e.overnight?"(overnight)":""]})]}),(0,a.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[e.fromLocation||"—"," → ",e.toLocation||"—"]}),(0,a.jsx)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:n.withOfficer?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[null!=(t=n.name)?t:"—"," ",n.id?(0,a.jsxs)("span",{className:"text-[11px] text-gray-600",children:["(",n.id,")"]}):null]}),n.phone?(0,a.jsx)("div",{className:"text-[11px] text-gray-700 break-all",children:n.phone}):null]}):"—"}),(0,a.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal break-words",children:[(0,a.jsx)("div",{className:"break-words break-all",children:f(e)}),(0,a.jsx)("div",{className:"text-[11px] text-gray-700",children:e.goods||"—"})]}),(0,a.jsx)(i.Td,{className:"px-2 py-1 text-center",children:(0,a.jsx)("button",{type:"button",className:"inline-flex items-center justify-center w-7 h-7 rounded bg-orange-600 text-white hover:bg-orange-700",title:"Print this row",onClick:t=>{t.stopPropagation(),P(e)},children:(0,a.jsx)(l.A,{size:13})})})]},r)}),!_&&!C.length&&(0,a.jsx)("tr",{children:(0,a.jsx)(i.Td,{colSpan:8,className:"px-2 py-6 text-center text-gray-500",children:"No requests found."})})]})]})}),D&&(0,a.jsx)(A,{request:D,onClose:()=>E(null)})]})}function A(e){var t,n;let{request:r,onClose:s}=e,i=v(r),l=x(r),c=h(r,l),d="".concat(r.applicantName||"—").concat(r.employeeId?" (".concat(r.employeeId,")"):"");return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-3",onClick:s,"aria-modal":!0,role:"dialog",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-orange-50",children:[(0,a.jsxs)("h3",{className:"font-bold text-orange-900 text-[13px]",children:["Request • ",r.requestCode]}),(0,a.jsx)("button",{className:"p-1 rounded hover:bg-orange-100",onClick:s,"aria-label":"Close",children:(0,a.jsx)(o.A,{size:16})})]}),(0,a.jsx)("div",{className:"p-4 text-[12px] leading-tight space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Applicant & Department"}),(0,a.jsxs)("div",{className:"truncate",children:[(0,a.jsx)("span",{className:"font-medium text-orange-900",children:"Applicant Name:"})," ",r.applicantName,(0,a.jsxs)("span",{className:"text-gray-600 text-[11px]",children:[" (",r.employeeId,")"]})]}),(0,a.jsxs)("div",{className:"truncate",children:[(0,a.jsx)("span",{className:"font-medium",children:"Department:"})," ",r.department||"—"]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Status"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Status:"})," ",r.status]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Applied:"})," ",m(r)]}),(0,a.jsxs)("div",{className:"text-[11px] text-gray-600 mt-1",children:["Created ",u(r.createdAt),r.updatedAt?" • Updated ".concat(u(r.updatedAt)):""]})]}),(0,a.jsxs)("section",{className:"md:col-span-2 border border-orange-100 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Account trail"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Submitted by account:"})," ",l]}),(0,a.jsxs)("div",{className:"text-[11px] text-gray-600",children:[(0,a.jsx)("b",{children:"Applicant:"})," ",d]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Created at:"})," ",u(r.createdAt)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Last updated by:"})," ",c]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Updated at:"})," ",r.updatedAt?u(r.updatedAt):"—"]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Date & Time"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Date of Travel:"})," ",r.dateOfTravel]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Time From:"})," ",r.timeFrom||"—"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Time To:"})," ",r.timeTo||"—"," ",r.overnight?"(overnight)":""]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Route"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"From Location:"})," ",r.fromLocation]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"To Location:"})," ",r.toLocation]})]}),(0,a.jsxs)("section",{className:"md:col-span-2 border border-orange-100 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-2",children:"Official Trip Description / Goods"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Official Trip Description"}),(0,a.jsx)("div",{className:"text-orange-900 break-words break-all",children:f(r)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Goods being transported (if any)"}),(0,a.jsx)("div",{className:"text-orange-800/90 break-words",children:r.goods||"—"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Travelling with Officer"}),(0,a.jsx)("div",{children:r.travelWithOfficer||i.withOfficer?"Yes":"No"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-600",children:"Officer"}),(0,a.jsx)("div",{className:"break-words break-all",children:i.withOfficer?(0,a.jsxs)(a.Fragment,{children:[i.name||"—"," ",i.id?(0,a.jsxs)("span",{className:"text-[11px] text-gray-600",children:["(",i.id,")"]}):null,i.phone?", ".concat(i.phone):""]}):"—"})]})]})]})]}),(0,a.jsxs)("section",{className:"md:col-span-2",children:[(0,a.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Gate / Trip"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Pickup:"})," ",u(r.scheduledPickupAt)," • ",(0,a.jsx)("b",{children:"Return:"})," ",u(r.scheduledReturnAt)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Exit:"})," ",u(r.gateExitAt)," • ",(0,a.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(t=r.exitOdometer)?t:"—"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Entry:"})," ",u(r.gateEntryAt)," • ",(0,a.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(n=r.entryOdometer)?n:"—"]})]})]})]})})]})})}},65229:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71847:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:p,...u}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:n,strokeWidth:o?24*Number(l)/Number(r):l,className:s("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...p.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let n=(0,a.forwardRef)((n,i)=>{let{className:o,...c}=n;return(0,a.createElement)(l,{ref:i,iconNode:t,className:s("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return n.displayName=r(e),n}},74794:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(95155),r=n(86651),s=n(65229);function i(e){let{value:t,onChange:n,placeholder:i="Search…",className:l=""}=e;return(0,a.jsx)("div",{className:"w-full ".concat(l).trim(),children:(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)(r.A,{size:16,className:"absolute left-3 text-orange-500 pointer-events-none","aria-hidden":"true"}),(0,a.jsx)("input",{value:t,onChange:e=>n(e.target.value),placeholder:i,className:"hod-search-input w-full rounded-xl border border-orange-200 bg-white py-2.5 pl-9 pr-8 text-sm text-orange-900 placeholder:text-orange-400/70 focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-300"}),t?(0,a.jsx)("button",{type:"button",onClick:()=>n(""),className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-full text-orange-500 hover:bg-orange-100","aria-label":"Clear search",children:(0,a.jsx)(s.A,{size:14})}):null]})})}},81242:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,I:()=>c});var a=n(95125),r=n(95704);let s=(r.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),i=Math.min(Number(r.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),l=a.A.create({baseURL:s?"".concat(s,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:i}),o=l;function c(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}l.interceptors.request.use(e=>{{var t,n;let a=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;a&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=a);let r=localStorage.getItem("role")||void 0;r&&(e.headers=null!=(n=e.headers)?n:{},e.headers["X-Role"]=r)}return e}),l.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,n=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||n.includes("timeout")){var a,r,s,i;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(s=null==(a=e.response)?void 0:a.status)?s:0,statusText:"Request Timeout",data:null,headers:null!=(i=null==(r=e.response)?void 0:r.headers)?i:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=(0,n(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},99947:(e,t,n)=>{"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5;try{let n=window.sessionStorage.getItem(e);if(!n)return null;let a=JSON.parse(n);if(!(null==a?void 0:a.data)||!(null==a?void 0:a.ts))return null;if(Date.now()-a.ts>t)return window.sessionStorage.removeItem(e),null;return a.data}catch(e){return null}}function r(e,t){try{if(null===t)return void window.sessionStorage.removeItem(e);let n={data:t,ts:Date.now()};window.sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}}n.d(t,{a:()=>r,x:()=>a})}},e=>{e.O(0,[5125,8441,1255,7358],()=>e(e.s=36104)),_N_E=e.O()}]);