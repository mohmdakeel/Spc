(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2371],{309:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},5917:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7640:(e,t,a)=>{"use strict";a.d(t,{Td:()=>r,Th:()=>n});var s=a(95155);function n(e){let{children:t,className:a="",sortable:n,sortDirection:r,onClick:l,...i}=e;return(0,s.jsx)("th",{...i,"aria-sort":"asc"===r?"ascending":"desc"===r?"descending":"none",onClick:n?l:void 0,onKeyDown:n?e=>{n&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==l||l())}:void 0,tabIndex:n?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",n?"cursor-pointer hover:bg-orange-200 transition-colors":"",r?"bg-orange-200":"",a].join(" "),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,n&&(0,s.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===r?"↑":"desc"===r?"↓":"↕"})]})})}function r(e){let{children:t,className:a="",highlight:n,...r}=e;return(0,s.jsx)("td",{...r,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",n?"bg-orange-50 font-medium":"",a].join(" "),children:t})}a(12115)},11924:(e,t,a)=>{"use strict";a.d(t,{Cd:()=>h,Lh:()=>o,bB:()=>n,bk:()=>d,cK:()=>l,iq:()=>c,iv:()=>i,kM:()=>x,lm:()=>r,qd:()=>g,rg:()=>u,rr:()=>m,uK:()=>p});var s=a(81242);async function n(e){let{data:t}=await s.A.post("/usage-requests",e);return(0,s.I)(t)}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:n}=await s.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:a}});return(0,s.I)(n)}async function l(){try{let{data:e}=await s.A.get("/usage-requests/all");return(0,s.I)(e)}catch(a){let{data:e}=await s.A.get("/usage-requests"),t=(0,s.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function i(e){try{let{data:t}=await s.A.get("/usage-requests/status/".concat(e));return(0,s.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function c(e){let{data:t}=await s.A.get("/usage-requests/".concat(e));return(0,s.I)(t)}let o=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),d=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),m=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),u=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function p(e,t){let a={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:n}=await s.A.post("/usage-requests/".concat(e,"/assign"),a);return(0,s.I)(n)}async function x(e,t){let a={};"number"==typeof t.exitOdometer&&(a.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==a.exitOdometer&&(a.exitOdometer=t.odometerStartKm);let n=[];t.remarks&&n.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&n.push(...t.exitManifest),n.length&&(a.exitManifest=n);let{data:r}=await s.A.post("/usage-requests/".concat(e,"/gate/exit"),a);return(0,s.I)(r)}async function h(e,t){let a={};"number"==typeof t.entryOdometer&&(a.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==a.entryOdometer&&(a.entryOdometer=t.odometerEndKm);let n=[];t.remarks&&n.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&n.push(...t.entryManifest),n.length&&(a.entryManifest=n);let{data:r}=await s.A.post("/usage-requests/".concat(e,"/gate/entry"),a);return(0,s.I)(r)}async function g(){let{data:e}=await s.A.get("/usage-requests/metrics");return(0,s.I)(e)}},38094:(e,t,a)=>{"use strict";a.d(t,{A:()=>s.A});var s=a(74794)},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(12115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:a,strokeWidth:c?24*Number(i)/Number(n):i,className:r("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:c,...o}=a;return(0,s.createElement)(i,{ref:l,iconNode:t,className:r("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return a.displayName=n(e),a}},72319:(e,t,a)=>{Promise.resolve().then(a.bind(a,97298))},74794:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(95155),n=a(86651),r=a(65229);function l(e){let{value:t,onChange:a,placeholder:l="Search…",className:i=""}=e;return(0,s.jsx)("div",{className:"w-full ".concat(i).trim(),children:(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)(n.A,{size:16,className:"absolute left-3 text-orange-500 pointer-events-none","aria-hidden":"true"}),(0,s.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:l,className:"hod-search-input w-full rounded-xl border border-orange-200 bg-white py-2.5 pl-9 pr-8 text-sm text-orange-900 placeholder:text-orange-400/70 focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-300"}),t?(0,s.jsx)("button",{type:"button",onClick:()=>a(""),className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-full text-orange-500 hover:bg-orange-100","aria-label":"Clear search",children:(0,s.jsx)(r.A,{size:14})}):null]})})}},81242:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,I:()=>o});var s=a(95125),n=a(95704);let r=(n.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),l=Math.min(Number(n.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),i=s.A.create({baseURL:r?"".concat(r,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:l}),c=i;function o(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}i.interceptors.request.use(e=>{{var t,a;let s=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;s&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=s);let n=localStorage.getItem("role")||void 0;n&&(e.headers=null!=(a=e.headers)?a:{},e.headers["X-Role"]=n)}return e}),i.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,a=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||a.includes("timeout")){var s,n,r,l;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(r=null==(s=e.response)?void 0:s.status)?r:0,statusText:"Request Timeout",data:null,headers:null!=(l=null==(n=e.response)?void 0:n.headers)?l:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},89559:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},97298:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(95155),n=a(12115),r=a(11924),l=a(7640),i=a(89559),c=a(309),o=a(5917),d=a(65229),m=a(38094);let u=e=>e?new Date(e).toLocaleString():"-";function p(){let[e,t]=(0,n.useState)([]),[a,u]=(0,n.useState)([]),[p,h]=(0,n.useState)([]),[g,f]=(0,n.useState)(!0),[b,y]=(0,n.useState)("PENDING_HOD"),[j,N]=(0,n.useState)(""),[v,w]=(0,n.useState)(null),A=(0,n.useCallback)(async()=>{f(!0);try{let[e,a,s]=await Promise.all([(0,r.iv)("PENDING_HOD"),(0,r.iv)("PENDING_MANAGEMENT"),(0,r.iv)("REJECTED")]);t(e||[]),u(a||[]),h(s||[])}finally{f(!1)}},[]);(0,n.useEffect)(()=>{A()},[A]);let k=(0,n.useMemo)(()=>[{label:"Pending HOD",n:e.length,hint:"Awaiting your decision",key:"PENDING_HOD"},{label:"Sent to Management",n:a.length,hint:"Approved by HOD",key:"PENDING_MANAGEMENT"},{label:"Rejected",n:p.length,hint:"Rejected at any stage",key:"REJECTED"}],[e,a,p]),C="PENDING_HOD"===b?e:"PENDING_MANAGEMENT"===b?a:p,T=(0,n.useMemo)(()=>{let t=new Map,s=(e,a)=>{e.forEach(e=>{var s;let n=e.createdAt||e.appliedDate||e.dateOfTravel;if(!n)return;let r=new Date(n);if(Number.isNaN(r.getTime()))return;let l=12*r.getFullYear()+r.getMonth(),i=r.toLocaleString("default",{month:"short",year:"numeric"}),c=null!=(s=t.get(l))?s:{label:i,order:l,pending:0,management:0,rejected:0};c[a]+=1,t.set(l,c)})};return s(e,"pending"),s(a,"management"),s(p,"rejected"),Array.from(t.values()).sort((e,t)=>e.order-t.order).slice(-6).map(e=>{let t=e.pending+e.management+e.rejected,a=t||1;return{...e,total:t,pendingPct:e.pending/a*100,managementPct:e.management/a*100,rejectedPct:e.rejected/a*100}})},[e,a,p]),I=(0,n.useMemo)(()=>{let e=j.trim().toLowerCase();return e?C.filter(t=>[t.requestCode,t.status,t.applicantName,t.employeeId,t.officerName,t.officerId,t.fromLocation,t.toLocation,t.assignedVehicleNumber,t.assignedDriverName,t.department,t.dateOfTravel].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(e)):C},[C,j]),O=j.trim().length>0,E=async e=>{let t=prompt("Approve ".concat(e.requestCode," and forward to Management.\nRemarks:"),"HOD approved");if(t&&t.trim()){f(!0);try{await (0,r.Lh)(e.id,t.trim()),await A()}finally{f(!1)}}},R=async e=>{let t=prompt("Reject ".concat(e.requestCode,".\nRemarks:"),"");if(t&&t.trim()){f(!0);try{await (0,r.bk)(e.id,t.trim()),await A()}finally{f(!1)}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-3 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsx)(m.A,{value:j,onChange:N,placeholder:"Search by request code, applicant, officer or route",className:"w-full md:flex-1"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end w-full md:w-auto",children:[(0,s.jsx)("button",{type:"button",disabled:!O,onClick:()=>N(""),className:"px-3 py-2 rounded-lg border border-orange-200 text-sm font-medium text-orange-700 hover:bg-orange-50 disabled:opacity-50",children:"Clear"}),(0,s.jsxs)("button",{type:"button",onClick:()=>A(),disabled:g,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-orange-200 text-sm font-medium text-orange-700 hover:bg-orange-50 disabled:opacity-50",children:[(0,s.jsx)(i.A,{size:16,className:g?"animate-spin":""}),"Refresh"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{var e,t;let a=I.map(e=>{let t=!!e.travelWithOfficer;return'\n<tr>\n  <td><div class="rq">'.concat(e.requestCode||"",'</div><div class="sub">').concat(e.department||"","</div></td>\n  <td>\n    <div><b>Applicant:</b> ").concat(e.applicantName||"",' <span class="sub">(').concat(e.employeeId||"",")</span></div>\n    <div><b>Officer:</b> ").concat(t?"".concat(e.officerName||"-",' <span class="sub">(').concat(e.officerId||"-",")</span>"):"—","</div>\n  </td>\n  <td>").concat(e.fromLocation||""," → ").concat(e.toLocation||"","</td>\n  <td>").concat(e.dateOfTravel||"",'<div class="sub mono">').concat(e.timeFrom||""," – ").concat(e.timeTo||""," ").concat(e.overnight?"(overnight)":"",'</div></td>\n  <td class="center">').concat(e.status||"","</td>\n</tr>")}).join(""),s='<!doctype html><html><head><meta charset="utf-8"/>\n<title>HOD Queue</title>\n<style>\nbody{font-family:system-ui,Arial,sans-serif;margin:0;padding:12mm;color:#111}\nh3{margin:0 0 8px 0}\n.meta{color:#666;font-size:12px;margin-bottom:8px}\ntable{width:100%;border-collapse:collapse;table-layout:fixed}\nthead{display:table-header-group}\ntr,td,th{page-break-inside:avoid;break-inside:avoid}\nth,td{border:1px solid #ddd;padding:6px 8px;vertical-align:top;font-size:12px}\nth{background:#faf5f0;text-align:left}\n.center{text-align:center}.sub{color:#666;font-size:11px}.mono{font-family:ui-monospace,Menlo,Consolas,monospace}.rq{font-weight:600;color:#8b4513}\n@media print{@page{size:A4 landscape;margin:10mm}body{padding:0}}\n</style></head>\n<body>\n<h3>HOD Queue — '.concat(b.replace("_"," "),'</h3>\n<div class="meta">Results: ').concat(I.length,'</div>\n<table>\n  <colgroup><col style="width:18%"/><col style="width:28%"/><col style="width:24%"/><col style="width:20%"/><col style="width:10%"/></colgroup>\n  <thead><tr><th>Code / Dept</th><th>People</th><th>Route</th><th>Travel</th><th class="center">Status</th></tr></thead>\n  <tbody>').concat(a||'<tr><td colspan="5">No data</td></tr>',"</tbody>\n</table>\n<script>window.addEventListener('load',()=>setTimeout(()=>{window.focus();window.print();},150));<\/script>\n</body></html>");try{let e=new Blob([s],{type:"text/html"}),a=URL.createObjectURL(e),n=window.open(a,"_blank","noopener");if(n){null==(t=n.addEventListener)||t.call(n,"load",()=>{try{n.focus(),n.print()}catch(e){}}),setTimeout(()=>URL.revokeObjectURL(a),6e4);return}}catch(e){}let n=document.createElement("iframe");n.style.position="fixed",n.style.right="0",n.style.bottom="0",n.style.width="0",n.style.height="0",n.style.border="0",document.body.appendChild(n);let r=null==(e=n.contentWindow)?void 0:e.document;r&&(r.open(),r.write(s),r.close(),n.onload=()=>{var e,t;null==(e=n.contentWindow)||e.focus(),null==(t=n.contentWindow)||t.print(),setTimeout(()=>document.body.removeChild(n),1e3)})},disabled:!I.length,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-orange-600 text-white text-sm font-semibold hover:bg-orange-700 disabled:bg-orange-300",children:[(0,s.jsx)(c.A,{size:16}),"Print queue"]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-3",children:k.map(e=>(0,s.jsxs)("button",{onClick:()=>y(e.key),className:"rounded-lg border ".concat(b===e.key?"border-orange-300 ring-1 ring-orange-300":"border-orange-200"," bg-white p-4 text-left"),children:[(0,s.jsx)("div",{className:"text-sm text-orange-700",children:e.label}),(0,s.jsx)("div",{className:"text-3xl font-bold text-orange-900",children:g?"—":e.n}),(0,s.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:e.hint})]},e.label))}),T.length>0&&(0,s.jsxs)("section",{className:"hod-card bg-white rounded-2xl border border-orange-200 p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-wide text-orange-600 font-semibold",children:"Monthly flow"}),(0,s.jsx)("h2",{className:"text-lg font-bold text-orange-900",children:"Request journey snapshot"})]}),(0,s.jsxs)("div",{className:"flex gap-4 text-[11px] text-gray-600",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-orange-500"})," Pending"]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-500"})," Sent to Mgmt"]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-rose-500"})," Rejected"]})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:T.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsxs)("span",{children:[e.total||0," requests"]})]}),(0,s.jsxs)("div",{className:"flex h-3 rounded-full overflow-hidden bg-orange-100/70 mt-1",children:[(0,s.jsx)("span",{className:"bg-orange-500",style:{width:"".concat(e.pendingPct,"%")},title:"Pending HOD: ".concat(e.pending)}),(0,s.jsx)("span",{className:"bg-emerald-500",style:{width:"".concat(e.managementPct,"%")},title:"Sent to Management: ".concat(e.management)}),(0,s.jsx)("span",{className:"bg-rose-500",style:{width:"".concat(e.rejectedPct,"%")},title:"Rejected: ".concat(e.rejected)})]})]},e.label))})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-orange-200 overflow-auto",children:(0,s.jsxs)("table",{className:"w-full table-fixed text-[10px] leading-[1.15]",children:[(0,s.jsxs)("colgroup",{children:[(0,s.jsx)("col",{className:"w-28"}),(0,s.jsx)("col",{className:"w-56"}),(0,s.jsx)("col",{className:"w-44"}),(0,s.jsx)("col",{className:"w-36"}),(0,s.jsx)("col",{className:"w-24"}),(0,s.jsx)("col",{className:"w-20"})]}),(0,s.jsx)("thead",{className:"bg-orange-50",children:(0,s.jsxs)("tr",{className:"text-[9.5px]",children:[(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Code / Dept"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"APPLICANT / OFFICER"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Route"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Travel"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-center",children:"Status"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-center",children:"Action"})]})}),(0,s.jsxs)("tbody",{className:"divide-y",children:[g&&(0,s.jsx)("tr",{children:(0,s.jsx)(l.Td,{colSpan:6,className:"px-2 py-6 text-center text-gray-500",children:"Loading…"})}),!g&&I.map(e=>{let t,a=!!e.travelWithOfficer;return(0,s.jsxs)("tr",{className:"align-top hover:bg-orange-50/40",children:[(0,s.jsxs)(l.Td,{className:"px-2 py-1",children:[(0,s.jsx)("div",{className:"font-semibold text-orange-900 truncate",title:e.requestCode,children:e.requestCode}),(0,s.jsx)("div",{className:"text-[9px] text-gray-600 truncate",title:e.department||"-",children:e.department||"-"})]}),(0,s.jsxs)(l.Td,{className:"px-2 py-1",children:[(0,s.jsxs)("div",{className:"truncate",title:"".concat(e.applicantName," (").concat(e.employeeId,")"),children:[(0,s.jsx)("span",{className:"font-medium text-orange-900",children:"Applicant:"})," ",e.applicantName,(0,s.jsxs)("span",{className:"text-gray-600 text-[9px]",children:[" (",e.employeeId,")"]})]}),(0,s.jsxs)("div",{className:"text-[9.5px] text-gray-700 truncate",title:a?"".concat(e.officerName||"-"," (").concat(e.officerId||"-",")"):"—",children:[(0,s.jsx)("span",{className:"font-medium",children:"Officer:"})," ",a?(0,s.jsxs)(s.Fragment,{children:[e.officerName||"-",(0,s.jsxs)("span",{className:"text-gray-600 text-[9px]",children:[" (",e.officerId||"-",")"]})]}):"—"]})]}),(0,s.jsxs)(l.Td,{className:"px-2 py-1",children:[(0,s.jsxs)("div",{className:"truncate",title:"".concat(e.fromLocation," → ").concat(e.toLocation),children:[e.fromLocation," → ",e.toLocation]}),(0,s.jsx)("div",{className:"text-[9px] text-gray-600 truncate",title:e.assignedVehicleNumber||"—",children:e.assignedVehicleNumber||"—"})]}),(0,s.jsxs)(l.Td,{className:"px-2 py-1",children:[(0,s.jsx)("div",{className:"truncate",children:e.dateOfTravel}),(0,s.jsxs)("div",{className:"text-[9px] text-gray-600",children:[(0,s.jsx)("span",{className:"font-mono",children:e.timeFrom}),"–",(0,s.jsx)("span",{className:"font-mono",children:e.timeTo})," ",e.overnight?"(overnight)":""]})]}),(0,s.jsx)(l.Td,{className:"px-2 py-1 text-center",children:(0,s.jsx)("div",{className:"mb-1",children:(t=e.status,(0,s.jsx)("span",{className:"inline-block whitespace-nowrap text-[10px] px-1.5 py-[2px] rounded bg-orange-100 text-orange-800 leading-none",children:t}))})}),(0,s.jsx)(l.Td,{className:"px-2 py-1 text-center",children:(0,s.jsx)("div",{className:"inline-flex items-center justify-center gap-1",children:"PENDING_HOD"===b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{type:"button",className:"p-[6px] rounded bg-green-600 text-white hover:bg-green-700 text-[10px] inline-flex items-center",onClick:()=>E(e),title:"Approve & send to Management","aria-label":"Approve",children:(0,s.jsx)(o.A,{size:14})}),(0,s.jsx)("button",{type:"button",className:"p-[6px] rounded bg-red-600 text-white hover:bg-red-700 text-[10px] inline-flex items-center",onClick:()=>R(e),title:"Reject","aria-label":"Reject",children:(0,s.jsx)(d.A,{size:14})})]}):(0,s.jsx)("span",{className:"text-[10px] text-gray-500",children:"—"})})})]},e.id)}),!g&&!I.length&&(0,s.jsx)("tr",{children:(0,s.jsx)(l.Td,{colSpan:6,className:"px-2 py-6 text-center text-gray-500",children:"No results"})})]})]})}),v&&(0,s.jsx)(x,{request:v,onClose:()=>w(null)})]})}function x(e){let{request:t,onClose:a}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-3",onClick:a,children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-orange-50",children:[(0,s.jsxs)("h3",{className:"font-bold text-orange-900 text-[12px]",children:["Request • ",t.requestCode]}),(0,s.jsx)("button",{className:"p-1 rounded hover:bg-orange-100",onClick:a,"aria-label":"Close",children:"✕"})]}),(0,s.jsx)("div",{className:"p-4 text-[11px] leading-tight space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"People"}),(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("span",{className:"font-medium text-orange-900",children:"Applicant:"})," ",t.applicantName,(0,s.jsxs)("span",{className:"text-gray-600 text-[10px]",children:[" (",t.employeeId,")"]})]}),(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("span",{className:"font-medium",children:"Officer:"})," ",t.travelWithOfficer?(0,s.jsxs)(s.Fragment,{children:[t.officerName||"-"," ",(0,s.jsxs)("span",{className:"text-gray-600 text-[10px]",children:["(",t.officerId||"-",")"]})]}):"—"]}),(0,s.jsxs)("div",{className:"text-gray-700",children:[(0,s.jsx)("span",{className:"font-medium",children:"Department:"})," ",t.department]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Status & Dates"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Status:"})," ",t.status]}),(0,s.jsxs)("div",{className:"text-[10px] text-gray-600 mt-1",children:["Created ",u(t.createdAt),t.updatedAt?" • Updated ".concat(u(t.updatedAt)):""]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Travel"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Date:"})," ",t.dateOfTravel]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Time:"})," ",t.timeFrom," – ",t.timeTo," ",t.overnight?"(overnight)":""]}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("b",{children:"Route:"})," ",t.fromLocation," → ",t.toLocation]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Assignment"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Vehicle:"})," ",t.assignedVehicleNumber||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Driver:"})," ",t.assignedDriverName||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Pickup:"})," ",u(t.scheduledPickupAt)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Return:"})," ",u(t.scheduledReturnAt)]})]}),(0,s.jsxs)("section",{className:"md:col-span-2",children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Purpose / Goods"}),(0,s.jsx)("div",{children:t.officialDescription||"—"}),(0,s.jsx)("div",{className:"text-gray-700",children:t.goods||"—"})]})]})})]})})}}},e=>{e.O(0,[5125,8441,1255,7358],()=>e(e.s=72319)),_N_E=e.O()}]);