(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5746],{309:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(71847).A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},7640:(e,t,a)=>{"use strict";a.d(t,{Td:()=>s,Th:()=>r});var n=a(95155);function r(e){let{children:t,className:a="",sortable:r,sortDirection:s,onClick:l,...i}=e;return(0,n.jsx)("th",{...i,"aria-sort":"asc"===s?"ascending":"desc"===s?"descending":"none",onClick:r?l:void 0,onKeyDown:r?e=>{r&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==l||l())}:void 0,tabIndex:r?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",r?"cursor-pointer hover:bg-orange-200 transition-colors":"",s?"bg-orange-200":"",a].join(" "),children:(0,n.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,r&&(0,n.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===s?"↑":"desc"===s?"↓":"↕"})]})})}function s(e){let{children:t,className:a="",highlight:r,...s}=e;return(0,n.jsx)("td",{...s,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",r?"bg-orange-50 font-medium":"",a].join(" "),children:t})}a(12115)},11924:(e,t,a)=>{"use strict";a.d(t,{Cd:()=>x,Lh:()=>c,bB:()=>r,bk:()=>d,cK:()=>l,iq:()=>o,iv:()=>i,kM:()=>h,lm:()=>s,qd:()=>g,rg:()=>p,rr:()=>u,uK:()=>m});var n=a(81242);async function r(e){let{data:t}=await n.A.post("/usage-requests",e);return(0,n.I)(t)}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:r}=await n.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:a}});return(0,n.I)(r)}async function l(){try{let{data:e}=await n.A.get("/usage-requests/all");return(0,n.I)(e)}catch(a){let{data:e}=await n.A.get("/usage-requests"),t=(0,n.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function i(e){try{let{data:t}=await n.A.get("/usage-requests/status/".concat(e));return(0,n.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function o(e){let{data:t}=await n.A.get("/usage-requests/".concat(e));return(0,n.I)(t)}let c=async(e,t)=>(0,n.I)((await n.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),d=async(e,t)=>(0,n.I)((await n.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),u=async(e,t)=>(0,n.I)((await n.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),p=async(e,t)=>(0,n.I)((await n.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function m(e,t){let a={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:r}=await n.A.post("/usage-requests/".concat(e,"/assign"),a);return(0,n.I)(r)}async function h(e,t){let a={};"number"==typeof t.exitOdometer&&(a.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==a.exitOdometer&&(a.exitOdometer=t.odometerStartKm);let r=[];t.remarks&&r.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&r.push(...t.exitManifest),r.length&&(a.exitManifest=r);let{data:s}=await n.A.post("/usage-requests/".concat(e,"/gate/exit"),a);return(0,n.I)(s)}async function x(e,t){let a={};"number"==typeof t.entryOdometer&&(a.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==a.entryOdometer&&(a.entryOdometer=t.odometerEndKm);let r=[];t.remarks&&r.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&r.push(...t.entryManifest),r.length&&(a.entryManifest=r);let{data:s}=await n.A.post("/usage-requests/".concat(e,"/gate/entry"),a);return(0,n.I)(s)}async function g(){let{data:e}=await n.A.get("/usage-requests/metrics");return(0,n.I)(e)}},17921:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(95155),r=a(12115),s=a(47650),l=a(11924),i=a(7640),o=a(38094),c=a(89559),d=a(309),u=a(65229);let p=e=>e?new Date(e).toLocaleString():"—",m=e=>{let t=(null==e?void 0:e.appliedDate)||(null==e?void 0:e.applied_at)||(null==e?void 0:e.appliedOn),a=(null==e?void 0:e.appliedTime)||(null==e?void 0:e.applied_time);if(t&&a)return"".concat(t," ").concat(a);if(t&&(null==e?void 0:e.createdAt)){let a=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(t," ").concat(a)}return(null==e?void 0:e.createdAt)?p(e.createdAt):"—"},h=e=>(null!=e?e:"").replace(/[^\d+()\-\s./;]/g,"").replace(/^[;,\s-]+/,"").replace(/\s{2,}/g," ").trim();function x(e){var t;let a=String(null!=(t=null==e?void 0:e.officialDescription)?t:"").split(/\r?\n/).filter(e=>!/travell?ing\s+officer\s*:/i.test(e)).join("\n");return(a=(a=a.replace(/\b(?:Phone|Tel)\s*:\s*[\+\d()\-\s./;]+/gi,"")).replace(/\s{2,}/g," ").replace(/\s+(,|\.)/g,"$1").replace(/^[\s\-–,:]+/,"").trim())||"—"}function g(e){var t,a;if((null==e?void 0:e.travelWithOfficer)||(null==e?void 0:e.officerName)||(null==e?void 0:e.officerId)||(null==e?void 0:e.officerPhone))return{withOfficer:!0,name:e.officerName||void 0,id:e.officerId||void 0,phone:h(e.officerPhone)||void 0};let n="".concat((null==e?void 0:e.officialDescription)||"","\n").concat((null==e?void 0:e.remarks)||""),r=/Travelling Officer:\s*([^\(\n,]+)?(?:\s*\((?:Employee\s*ID|Emp\.?\s*ID|ID)\s*:\s*([^)]+)\))?(?:,\s*(?:Phone|Tel)\s*:\s*([^\n]+))?/i.exec(n);return r?{withOfficer:!0,name:(null==(t=r[1])?void 0:t.trim())||void 0,id:(null==(a=r[2])?void 0:a.trim())||void 0,phone:h(r[3])||void 0}:{withOfficer:!1}}function f(e){var t;let a=document.createElement("iframe");Object.assign(a.style,{position:"fixed",right:"0",bottom:"0",width:"0",height:"0",border:"0"}),document.body.appendChild(a);let n=null==(t=a.contentWindow)?void 0:t.document;if(!n)return void document.body.removeChild(a);n.open(),n.write(e),n.close(),a.onload=()=>{try{var e,t;null==(e=a.contentWindow)||e.focus(),null==(t=a.contentWindow)||t.print()}catch(e){}setTimeout(()=>{try{document.body.removeChild(a)}catch(e){}},1200)}}let v=["12%","17%","10%","12%","15%","14%","14%","6%"],b=["REJECTED"];function y(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)(!0),[p,h]=(0,r.useState)(null),[y,N]=(0,r.useState)(""),[w,A]=(0,r.useState)(null),T=(0,r.useCallback)(async()=>{u(!0),h(null);try{let e=(await Promise.all(b.map(e=>(0,l.iv)(e)))).flat().filter(Boolean);if(!e.length)try{let t=await (0,l.cK)();e=(Array.isArray(t)?t:(null==t?void 0:t.content)||[]).filter(e=>"REJECTED"===String((null==e?void 0:e.status)||"").toUpperCase())}catch(e){}let a=new Set,n=e.filter(e=>{var t,n;let r=String(null!=(n=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.requestCode)?n:"");return!(!r||a.has(r))&&(a.add(r),!0)});n.sort((e,t)=>{let a=Date.parse((null==e?void 0:e.updatedAt)||(null==e?void 0:e.createdAt)||"");return(Date.parse((null==t?void 0:t.updatedAt)||(null==t?void 0:t.createdAt)||"")||0)-(a||0)}),t(n)}catch(e){console.warn("Failed to load rejected list",e),h((null==e?void 0:e.message)||"Unable to load rejected requests right now."),t([])}finally{u(!1)}},[]);(0,r.useEffect)(()=>{T()},[T]);let k=(0,r.useMemo)(()=>{let t=y.trim().toLowerCase();return t?e.filter(e=>{let a=g(e);return[null==e?void 0:e.requestCode,"rejected",null==e?void 0:e.applicantName,null==e?void 0:e.employeeId,null==e?void 0:e.department,null==e?void 0:e.fromLocation,null==e?void 0:e.toLocation,null==e?void 0:e.dateOfTravel,null==e?void 0:e.timeFrom,null==e?void 0:e.timeTo,null==e?void 0:e.officialDescription,null==e?void 0:e.goods,a.name,a.id,a.phone,m(e)].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(t)}):e},[e,y]),C=(0,r.useMemo)(()=>{let t=new Map;return e.forEach(e=>{var a;let n=e.updatedAt||e.rejectedAt||e.createdAt;if(!n)return;let r=new Date(n);if(Number.isNaN(r.getTime()))return;let s=12*r.getFullYear()+r.getMonth(),l=r.toLocaleString("default",{month:"short",year:"numeric"}),i=r.toLocaleString("default",{month:"short"}),o=null!=(a=t.get(s))?a:{label:l,labelShort:i,count:0,order:s};o.count+=1,t.set(s,o)}),Array.from(t.values()).sort((e,t)=>e.order-t.order).slice(-6)},[e]),E=(0,r.useMemo)(()=>{if(!C.length)return[];let e=Math.max(...C.map(e=>e.count),1);return C.map(t=>({...t,pct:Math.max(8,t.count/e*100)}))},[C]),O=(0,r.useCallback)(()=>{let e=k.map(e=>{let t=g(e);return'\n<tr>\n  <td><div class="rq">'.concat(e.requestCode||"",'</div><div class="sub">').concat(m(e),"</div></td>\n  <td>").concat(e.applicantName||"",' <span class="sub">(').concat(e.employeeId||"",')</span><div class="sub">').concat(e.department||"",'</div></td>\n  <td class="center">REJECTED</td>\n  <td><div>').concat(e.dateOfTravel||"",'</div><div class="sub mono">').concat(e.timeFrom||""," – ").concat(e.timeTo||""," ").concat(e.overnight?"(overnight)":"","</div></td>\n  <td>").concat(e.fromLocation||""," → ").concat(e.toLocation||"","</td>\n  <td>").concat(t.withOfficer?"".concat(t.name||"-").concat(t.id?' <span class="sub">('.concat(t.id,")</span>"):"").concat(t.phone?", ".concat(t.phone):""):"—","</td>\n  <td><div>").concat(x(e),'</div><div class="sub">').concat(e.goods||"—","</div></td>\n</tr>")}).join("");f('<!DOCTYPE html>\n<html><head><meta charset="utf-8"/><title>Rejected — HOD • Print</title><meta name="viewport" content="width=device-width, initial-scale=1"/>\n<style>\n:root{--fg:#111;--muted:#666;--head:#faf5f0}*{box-sizing:border-box}\nbody{margin:0;padding:10mm;font-family:system-ui,Arial,sans-serif;color:var(--fg)}\nh3{margin:0 0 8px 0}.meta{margin:4px 0 8px 0;font-size:11px;color:var(--muted)}\ntable{width:100%;border-collapse:collapse;table-layout:fixed}thead{display:table-header-group}\nth,td{border:1px solid #ddd;padding:6px 8px;vertical-align:top;font-size:11px}th{background:var(--head);text-align:left}\n.center{text-align:center}.sub{color:var(--muted);font-size:10.5px}.mono{font-family:ui-monospace,Menlo,Consolas,monospace}\n.rq{font-weight:600;color:#8b4513}\ncol.c1{width:12%}col.c2{width:17%}col.c3{width:10%}col.c4{width:12%}col.c5{width:15%}col.c6{width:14%}col.c7{width:14%}\n@media print{@page{size:A4 landscape;margin:10mm}body{padding:0}}\n</style></head>\n<body>\n<h3>Rejected — HOD</h3>\n<div class="meta">Results: '.concat(k.length,'</div>\n<table>\n  <colgroup><col class="c1"/><col class="c2"/><col class="c3"/><col class="c4"/><col class="c5"/><col class="c6"/><col class="c7"/></colgroup>\n  <thead><tr>\n    <th>RQ ID / Applied</th>\n    <th>Applicant / Dept</th>\n    <th class="center">Status</th>\n    <th>Travel</th>\n    <th>Route</th>\n    <th>Officer</th>\n    <th>Purpose / Goods</th>\n  </tr></thead>\n  <tbody>').concat(e||'<tr><td colspan="7">No data</td></tr>',"</tbody>\n</table>\n<script>addEventListener('load',()=>setTimeout(()=>{focus();print();},150));<\/script>\n</body></html>"))},[k]),q=(0,r.useCallback)(e=>{let t=g(e);f('<!DOCTYPE html>\n<html><head><meta charset="utf-8"/><title>'.concat(e.requestCode||"Request",' — Print</title><meta name="viewport" content="width=device-width, initial-scale=1"/>\n<style>*{box-sizing:border-box}body{margin:0;padding:12mm;font-family:system-ui,Arial,sans-serif;color:#111}\nh2{margin:0 0 12px 0}.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px 16px;font-size:12px}\n.block{margin:8px 0 2px;font-weight:600;color:#8b4513}.sub{color:#666;font-size:11px}\ntable{width:100%;border-collapse:collapse;margin-top:10px}th,td{border:1px solid #ddd;padding:6px 8px;font-size:12px;vertical-align:top}\nth{background:#faf5f0;text-align:left;width:34%}@media print{@page{size:A4 portrait;margin:10mm}body{padding:0}}</style></head>\n<body>\n  <h2>Transport Request • ').concat(e.requestCode||"",' — REJECTED</h2>\n  <div class="grid">\n    <div><div class="block">Applicant</div>').concat(e.applicantName||"",' <span class="sub">(').concat(e.employeeId||"",')</span></div>\n    <div><div class="block">Department</div>').concat(e.department||"",'</div>\n    <div><div class="block">Status</div>REJECTED</div>\n    <div><div class="block">Applied</div>').concat(m(e),'</div>\n    <div><div class="block">Travel</div>').concat(e.dateOfTravel||""," • ").concat(e.timeFrom||""," – ").concat(e.timeTo||""," ").concat(e.overnight?"(overnight)":"",'</div>\n    <div><div class="block">Route</div>').concat(e.fromLocation||""," → ").concat(e.toLocation||"","</div>\n  </div>\n  <table>\n    <tr><th>Official Trip Description</th><td>").concat(x(e),"</td></tr>\n    <tr><th>Goods being transported (if any)</th><td>").concat(e.goods||"—","</td></tr>\n    <tr><th>Officer</th><td>").concat(t.withOfficer?"".concat(t.name||"—").concat(t.id?" (".concat(t.id,")"):"").concat(t.phone?", ".concat(t.phone):""):"—","</td></tr>\n  </table>\n  <script>addEventListener('load',()=>setTimeout(()=>{focus();print();},150));<\/script>\n</body></html>"))},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-base md:text-lg font-bold text-orange-900",children:"Rejected Requests"}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Audit trail of every request rejected at any stage."})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-auto md:flex-row md:items-center",children:[(0,n.jsx)(o.A,{value:y,onChange:N,placeholder:"Search code, applicant, dept, route, officer, purpose…",className:"w-full md:w-72"}),(0,n.jsxs)("button",{type:"button",onClick:T,disabled:a,className:"inline-flex items-center justify-center gap-1 px-3 h-11 md:h-10 rounded-lg border border-orange-200 text-orange-800 hover:bg-orange-50 text-xs font-semibold disabled:opacity-60",title:"Refresh from server",children:[(0,n.jsx)(c.A,{size:14,className:a?"animate-spin":""})," Refresh"]}),(0,n.jsxs)("button",{type:"button",onClick:O,className:"inline-flex items-center justify-center gap-1 px-3 h-11 md:h-10 rounded-lg bg-orange-600 text-white hover:bg-orange-700 text-xs font-semibold",title:"Print current list",children:[(0,n.jsx)(d.A,{size:14})," Print"]})]})]}),E.length>0&&(0,n.jsxs)("section",{className:"hod-card bg-white border border-orange-200 rounded-2xl p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-wide text-orange-600 font-semibold",children:"Monthly analysis"}),(0,n.jsxs)("h2",{className:"text-lg font-bold text-orange-900",children:["Rejections trend (last ",E.length," months)"]})]}),(0,n.jsxs)("span",{className:"text-xs text-gray-600",children:["Total ",e.length]})]}),(0,n.jsx)("div",{className:"flex items-end gap-2 h-36",children:E.map(e=>(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,n.jsx)("div",{className:"w-full rounded-t-full bg-gradient-to-b from-rose-400 to-rose-600 transition-all duration-300",style:{height:"".concat(e.pct,"%")},"aria-label":"".concat(e.label," rejections ").concat(e.count)}),(0,n.jsx)("span",{className:"text-[11px] font-semibold text-orange-900",children:e.labelShort}),(0,n.jsx)("span",{className:"text-[10px] text-gray-600",children:e.count})]},e.label))})]}),(0,n.jsx)("div",{className:"bg-white rounded-lg border border-orange-200 overflow-auto",children:(0,n.jsxs)("table",{className:"w-full table-fixed text-[10.5px] leading-[1.15]",children:[(0,n.jsx)("colgroup",{children:v.map((e,t)=>(0,n.jsx)("col",{style:{width:e}},t))}),(0,n.jsx)("thead",{className:"bg-orange-50",children:(0,n.jsxs)("tr",{className:"text-[9.5px]",children:[(0,n.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"RQ ID / Applied"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Applicant / Dept"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-center",children:"Status"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Travel"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Route"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Officer"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-left",children:"Purpose / Goods"}),(0,n.jsx)(i.Th,{className:"px-2 py-1 text-center",children:"Print"})]})}),(0,n.jsxs)("tbody",{className:"divide-y",children:[a&&(0,n.jsx)("tr",{children:(0,n.jsx)(i.Td,{colSpan:8,className:"px-2 py-6 text-center text-gray-500",children:"Loading…"})}),!a&&!p&&k.map(e=>{var t;let a=g(e),r=e.id||e.requestCode||"".concat(e.employeeId,"-").concat(e.dateOfTravel,"-").concat(e.timeFrom);return(0,n.jsxs)("tr",{className:"align-top hover:bg-orange-50/40 cursor-pointer",onClick:()=>A(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),A(e))},role:"button",tabIndex:0,title:"Click for full details",children:[(0,n.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,n.jsx)("div",{className:"font-semibold text-orange-900 truncate",title:e.requestCode,children:e.requestCode||"—"}),(0,n.jsx)("div",{className:"text-[9px] text-gray-600 truncate",title:m(e),children:m(e)})]}),(0,n.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,n.jsxs)("div",{className:"truncate",title:"".concat(e.applicantName," (").concat(e.employeeId,")"),children:[(0,n.jsx)("span",{className:"font-medium text-orange-900",children:e.applicantName||"—"})," ",(0,n.jsxs)("span",{className:"text-gray-600 text-[9px]",children:["(",e.employeeId||"—",")"]})]}),(0,n.jsx)("div",{className:"text-[9px] text-gray-700 truncate",children:e.department||"—"})]}),(0,n.jsx)(i.Td,{className:"px-2 py-1 text-center",children:(0,n.jsx)("span",{className:"inline-block text-[10px] px-1.5 py-[2px] rounded bg-red-100 text-red-800 leading-none",children:"REJECTED"})}),(0,n.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,n.jsx)("div",{className:"truncate",title:e.dateOfTravel,children:e.dateOfTravel||"—"}),(0,n.jsxs)("div",{className:"text-[9px] text-gray-600",children:[(0,n.jsx)("span",{className:"font-mono",children:e.timeFrom||"—"}),"–",(0,n.jsx)("span",{className:"font-mono",children:e.timeTo||"—"})," ",e.overnight?"(overnight)":""]})]}),(0,n.jsx)(i.Td,{className:"px-2 py-1 whitespace-normal",children:(0,n.jsxs)("div",{className:"truncate",title:"".concat(e.fromLocation," → ").concat(e.toLocation),children:[e.fromLocation||"—"," → ",e.toLocation||"—"]})}),(0,n.jsx)(i.Td,{className:"px-2 py-1 whitespace-normal",children:a.withOfficer?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"truncate",children:[null!=(t=a.name)?t:"—",a.id?(0,n.jsxs)("span",{className:"text-[9px] text-gray-600",children:[" (",a.id,")"]}):null]}),a.phone?(0,n.jsx)("div",{className:"text-[9px] text-gray-700 break-all",children:a.phone}):null]}):"—"}),(0,n.jsxs)(i.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,n.jsx)("div",{className:"break-words break-all",children:x(e)}),(0,n.jsx)("div",{className:"text-[9px] text-gray-700",children:e.goods||"—"})]}),(0,n.jsx)(i.Td,{className:"px-2 py-1 text-center",onClick:e=>e.stopPropagation(),children:(0,n.jsx)("button",{type:"button",className:"px-2 py-[4px] rounded bg-orange-600 text-white hover:bg-orange-700 text-[10px]",onClick:()=>q(e),title:"Print this request",children:(0,n.jsx)(d.A,{size:12})})})]},r)}),!a&&p&&(0,n.jsx)("tr",{children:(0,n.jsx)(i.Td,{colSpan:8,className:"px-2 py-6 text-center text-red-600 text-[12px]",children:p})}),!a&&!p&&!k.length&&(0,n.jsx)("tr",{children:(0,n.jsx)(i.Td,{colSpan:8,className:"px-2 py-6 text-center text-gray-500",children:"No rejected requests"})})]})]})}),w?(0,s.createPortal)((0,n.jsx)(j,{request:w,onClose:()=>A(null)}),document.body):null]})}function j(e){var t,a;let{request:r,onClose:s}=e,l=g(r);return(0,n.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-3",onClick:s,"aria-modal":!0,role:"dialog",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-orange-50",children:[(0,n.jsxs)("h3",{className:"font-bold text-orange-900 text-[13px]",children:["Request • ",r.requestCode," — REJECTED"]}),(0,n.jsx)("button",{className:"p-1 rounded hover:bg-orange-100",onClick:s,"aria-label":"Close",children:(0,n.jsx)(u.A,{size:16})})]}),(0,n.jsx)("div",{className:"p-4 text-[12px] leading-tight space-y-3",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,n.jsxs)("section",{children:[(0,n.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Applicant & Department"}),(0,n.jsxs)("div",{className:"truncate",children:[(0,n.jsx)("span",{className:"font-medium text-orange-900",children:"Applicant Name:"})," ",r.applicantName,(0,n.jsxs)("span",{className:"text-gray-600 text-[11px]",children:[" (",r.employeeId,")"]})]}),(0,n.jsxs)("div",{className:"truncate",children:[(0,n.jsx)("span",{className:"font-medium",children:"Department:"})," ",r.department||"—"]})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Status"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Status:"})," REJECTED"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Applied:"})," ",m(r)]}),(0,n.jsxs)("div",{className:"text-[11px] text-gray-600 mt-1",children:["Created ",p(r.createdAt),r.updatedAt?" • Updated ".concat(p(r.updatedAt)):""]})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Date & Time"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Date of Travel:"})," ",r.dateOfTravel]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Time From:"})," ",r.timeFrom||"—"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Time To:"})," ",r.timeTo||"—"," ",r.overnight?"(overnight)":""]})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Route"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"From Location:"})," ",r.fromLocation]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"To Location:"})," ",r.toLocation]})]}),(0,n.jsxs)("section",{className:"md:col-span-2 border border-orange-100 rounded-lg p-3",children:[(0,n.jsx)("div",{className:"text-orange-800 font-semibold mb-2",children:"Official Trip Description / Goods"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Official Trip Description"}),(0,n.jsx)("div",{className:"text-orange-900 break-words break-all",children:x(r)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Goods being transported (if any)"}),(0,n.jsx)("div",{className:"text-orange-800/90 break-words",children:r.goods||"—"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Travelling with Officer"}),(0,n.jsx)("div",{children:r.travelWithOfficer||l.withOfficer?"Yes":"No"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Officer"}),(0,n.jsx)("div",{className:"break-words break-all",children:l.withOfficer?(0,n.jsxs)(n.Fragment,{children:[l.name||"—"," ",l.id?(0,n.jsxs)("span",{className:"text-[11px] text-gray-600",children:["(",l.id,")"]}):null,l.phone?", ".concat(l.phone):""]}):"—"})]})]})]})]}),r.scheduledPickupAt||r.scheduledReturnAt||r.gateExitAt||r.gateEntryAt?(0,n.jsxs)("section",{className:"md:col-span-2",children:[(0,n.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Gate / Trip"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Pickup:"})," ",p(r.scheduledPickupAt)," • ",(0,n.jsx)("b",{children:"Return:"})," ",p(r.scheduledReturnAt)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Exit:"})," ",p(r.gateExitAt)," • ",(0,n.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(t=r.exitOdometer)?t:"—"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Entry:"})," ",p(r.gateEntryAt)," • ",(0,n.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(a=r.entryOdometer)?a:"—"]})]})]}):null]})})]})})}},33247:(e,t,a)=>{Promise.resolve().then(a.bind(a,17921))},38094:(e,t,a)=>{"use strict";a.d(t,{A:()=>n.A});var n=a(74794)},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,n.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...p}=e;return(0,n.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:a,strokeWidth:o?24*Number(i)/Number(r):i,className:s("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[t,a]=e;return(0,n.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,n.forwardRef)((a,l)=>{let{className:o,...c}=a;return(0,n.createElement)(i,{ref:l,iconNode:t,className:s("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return a.displayName=r(e),a}},74794:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=a(95155),r=a(86651),s=a(65229);function l(e){let{value:t,onChange:a,placeholder:l="Search…",className:i=""}=e;return(0,n.jsx)("div",{className:"w-full ".concat(i).trim(),children:(0,n.jsxs)("div",{className:"relative flex items-center",children:[(0,n.jsx)(r.A,{size:16,className:"absolute left-3 text-orange-500 pointer-events-none","aria-hidden":"true"}),(0,n.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:l,className:"hod-search-input w-full rounded-xl border border-orange-200 bg-white py-2.5 pl-9 pr-8 text-sm text-orange-900 placeholder:text-orange-400/70 focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-300"}),t?(0,n.jsx)("button",{type:"button",onClick:()=>a(""),className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-full text-orange-500 hover:bg-orange-100","aria-label":"Clear search",children:(0,n.jsx)(s.A,{size:14})}):null]})})}},81242:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,I:()=>c});var n=a(95125),r=a(95704);let s=(r.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),l=Math.min(Number(r.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),i=n.A.create({baseURL:s?"".concat(s,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:l}),o=i;function c(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}i.interceptors.request.use(e=>{{var t,a;let n=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;n&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=n);let r=localStorage.getItem("role")||void 0;r&&(e.headers=null!=(a=e.headers)?a:{},e.headers["X-Role"]=r)}return e}),i.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,a=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||a.includes("timeout")){var n,r,s,l;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(s=null==(n=e.response)?void 0:n.status)?s:0,statusText:"Request Timeout",data:null,headers:null!=(l=null==(r=e.response)?void 0:r.headers)?l:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},89559:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[5125,8441,1255,7358],()=>e(e.s=33247)),_N_E=e.O()}]);