(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8519],{309:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},7640:(e,t,a)=>{"use strict";a.d(t,{Td:()=>r,Th:()=>n});var s=a(95155);function n(e){let{children:t,className:a="",sortable:n,sortDirection:r,onClick:i,...l}=e;return(0,s.jsx)("th",{...l,"aria-sort":"asc"===r?"ascending":"desc"===r?"descending":"none",onClick:n?i:void 0,onKeyDown:n?e=>{n&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==i||i())}:void 0,tabIndex:n?0:void 0,className:["px-2 py-2 md:px-3 md:py-2.5 text-left font-semibold text-orange-900 whitespace-normal align-middle leading-snug bg-orange-100 border-b-2 border-orange-200",n?"cursor-pointer hover:bg-orange-200 transition-colors":"",r?"bg-orange-200":"",a].join(" "),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 select-none",children:[t,n&&(0,s.jsx)("span",{"aria-hidden":"true",className:"text-orange-600",children:"asc"===r?"↑":"desc"===r?"↓":"↕"})]})})}function r(e){let{children:t,className:a="",highlight:n,...r}=e;return(0,s.jsx)("td",{...r,className:["px-2 py-2 md:px-3 md:py-2.5 align-top border-b border-orange-100 transition-colors duration-150 whitespace-normal break-words leading-snug text-orange-800",n?"bg-orange-50 font-medium":"",a].join(" "),children:t})}a(12115)},10383:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},11924:(e,t,a)=>{"use strict";a.d(t,{Cd:()=>x,Lh:()=>c,bB:()=>n,bk:()=>d,cK:()=>i,iq:()=>o,iv:()=>l,kM:()=>h,lm:()=>r,qd:()=>g,rg:()=>m,rr:()=>u,uK:()=>p});var s=a(81242);async function n(e){let{data:t}=await s.A.post("/usage-requests",e);return(0,s.I)(t)}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,{data:n}=await s.A.get("/usage-requests/my",{params:{employeeId:e,page:t,size:a}});return(0,s.I)(n)}async function i(){try{let{data:e}=await s.A.get("/usage-requests/all");return(0,s.I)(e)}catch(a){let{data:e}=await s.A.get("/usage-requests"),t=(0,s.I)(e);if(Array.isArray(t))return t;if((null==t?void 0:t.content)&&Array.isArray(t.content))return t.content;return t}}async function l(e){try{let{data:t}=await s.A.get("/usage-requests/status/".concat(e));return(0,s.I)(t)}catch(t){return console.warn("Failed to load usage requests by status",e,t),[]}}async function o(e){let{data:t}=await s.A.get("/usage-requests/".concat(e));return(0,s.I)(t)}let c=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/hod/approve"),{remarks:t})).data),d=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/hod/reject"),{remarks:t})).data),u=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/mgmt/approve"),{remarks:t})).data),m=async(e,t)=>(0,s.I)((await s.A.post("/usage-requests/".concat(e,"/mgmt/reject"),{remarks:t})).data);async function p(e,t){let a={...t,pickupAt:t.pickupAt instanceof Date?t.pickupAt.toISOString():t.pickupAt,expectedReturnAt:t.expectedReturnAt instanceof Date?t.expectedReturnAt.toISOString():t.expectedReturnAt},{data:n}=await s.A.post("/usage-requests/".concat(e,"/assign"),a);return(0,s.I)(n)}async function h(e,t){let a={};"number"==typeof t.exitOdometer&&(a.exitOdometer=t.exitOdometer),"number"==typeof t.odometerStartKm&&null==a.exitOdometer&&(a.exitOdometer=t.odometerStartKm);let n=[];t.remarks&&n.push({type:"note",value:String(t.remarks)}),Array.isArray(t.exitManifest)&&t.exitManifest.length&&n.push(...t.exitManifest),n.length&&(a.exitManifest=n);let{data:r}=await s.A.post("/usage-requests/".concat(e,"/gate/exit"),a);return(0,s.I)(r)}async function x(e,t){let a={};"number"==typeof t.entryOdometer&&(a.entryOdometer=t.entryOdometer),"number"==typeof t.odometerEndKm&&null==a.entryOdometer&&(a.entryOdometer=t.odometerEndKm);let n=[];t.remarks&&n.push({type:"note",value:String(t.remarks)}),Array.isArray(t.entryManifest)&&t.entryManifest.length&&n.push(...t.entryManifest),n.length&&(a.entryManifest=n);let{data:r}=await s.A.post("/usage-requests/".concat(e,"/gate/entry"),a);return(0,s.I)(r)}async function g(){let{data:e}=await s.A.get("/usage-requests/metrics");return(0,s.I)(e)}},18154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]])},21873:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},37494:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},37621:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(95125),n=a(95704);let r=(n.env.NEXT_PUBLIC_AUTH_BASE||"").replace(/\/$/,""),i=Math.min(Number(n.env.NEXT_PUBLIC_API_TIMEOUT)||1e4,15e3),l=s.A.create({baseURL:r?"".concat(r,"/api"):"/aapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:i});l.interceptors.request.use(e=>e,e=>Promise.reject(e)),l.interceptors.response.use(e=>{let t=e.data;if((e=>!!(e&&"object"==typeof e&&"ok"in e))(t)){if(t.ok){var a;return e.data=Object.prototype.hasOwnProperty.call(t,"data")&&null!=(a=t.data)?a:null,e}let s=Error(t.message||"Request failed");return s.response={status:e.status,data:t},Promise.reject(s)}return e},e=>{var t,a,s,n,r;let i=null==(t=e.response)?void 0:t.status,l=e.code,o=((null==e?void 0:e.message)||"").toLowerCase();return 401===i?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.resolve({status:null!=i?i:0,statusText:"Unauthorized",data:null,headers:null!=(s=null==(a=e.response)?void 0:a.headers)?s:{},config:e.config,request:e.request})):403===i?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(e)):"ECONNABORTED"===l||o.includes("timeout")?(console.warn("API timeout – returning empty response to keep UI responsive"),Promise.resolve({status:null!=i?i:0,statusText:"Request Timeout",data:null,headers:null!=(r=null==(n=e.response)?void 0:n.headers)?r:{},config:e.config,request:e.request})):Promise.reject(e)});let o=l},38094:(e,t,a)=>{"use strict";a.d(t,{A:()=>s.A});var s=a(74794)},39634:(e,t,a)=>{Promise.resolve().then(a.bind(a,76955))},61362:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},68209:(e,t,a)=>{"use strict";a.d(t,{bC:()=>i,iD:()=>l,me:()=>c,mt:()=>o,ri:()=>d});var s=a(37621),n=a(99947);let r=["auth:user-cache","cache:auth:roles","cache:auth:perms","cache:auth:users"];function i(){try{r.forEach(e=>window.sessionStorage.removeItem(e))}catch(e){}}async function l(e){i(),await s.A.post("/auth/login",e)}async function o(){let e=[s.A.get("/registrations",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:employees",t),(0,n.a)("cache:auth:employees:list",t),(0,n.a)("cache:auth:reports:employees",t)}).catch(()=>{}),s.A.get("/users",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:users",t.map(e=>({id:e.id,username:e.username,fullName:e.fullName,roles:Array.isArray(e.roles)?e.roles:[],permissions:Array.isArray(e.permissions)?e.permissions:[]}))),(0,n.a)("cache:auth:users:list",t)}).catch(()=>{}),s.A.get("/roles",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:roles",t),(0,n.a)("cache:auth:roles:list",t)}).catch(()=>{}),s.A.get("/roles/permissions",{timeout:8e3}).then(e=>{let t=Array.isArray(e.data)?e.data:[];(0,n.a)("cache:auth:perms",t)}).catch(()=>{})];await Promise.allSettled(e)}async function c(){try{let{data:e}=await s.A.get("/auth/me");return e}catch(n){var e;let t=null==n?void 0:n.code,a=((null==n?void 0:n.message)||"").toLowerCase(),s=null==n||null==(e=n.response)?void 0:e.status;if("ECONNABORTED"===t||a.includes("timeout")||a.includes("network error")||401===s||403===s)return null;throw n}}async function d(){try{await s.A.post("/auth/logout")}catch(a){var e;let t=null==a||null==(e=a.response)?void 0:e.status;if(401===t||403===t)return;throw a}finally{i()}}},69141:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},74794:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(95155),n=a(86651),r=a(65229);function i(e){let{value:t,onChange:a,placeholder:i="Search…",className:l=""}=e;return(0,s.jsx)("div",{className:"w-full ".concat(l).trim(),children:(0,s.jsxs)("div",{className:"relative flex items-center",children:[(0,s.jsx)(n.A,{size:16,className:"absolute left-3 text-orange-500 pointer-events-none","aria-hidden":"true"}),(0,s.jsx)("input",{value:t,onChange:e=>a(e.target.value),placeholder:i,className:"hod-search-input w-full rounded-xl border border-orange-200 bg-white py-2.5 pl-9 pr-8 text-sm text-orange-900 placeholder:text-orange-400/70 focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-300"}),t?(0,s.jsx)("button",{type:"button",onClick:()=>a(""),className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-full text-orange-500 hover:bg-orange-100","aria-label":"Clear search",children:(0,s.jsx)(r.A,{size:14})}):null]})})}},76955:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var s=a(95155),n=a(12115),r=a(47650),i=a(11924),l=a(7640),o=a(65229),c=a(99265),d=a(71847);let u=(0,d.A)("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var m=a(69141),p=a(10383),h=a(37494),x=a(21873);let g=(0,d.A)("car-front",[["path",{d:"m21 8-2 2-1.5-3.7A2 2 0 0 0 15.646 5H8.4a2 2 0 0 0-1.903 1.257L5 10 3 8",key:"1imjwt"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 14h.01",key:"7oqj8z"}],["rect",{width:"18",height:"8",x:"3",y:"10",rx:"2",key:"a7itu8"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);var v=a(89715),f=a(78874),y=a(61362);function j(e){let t,{open:a,request:r,onClose:i,onApprove:l,onReject:d}=e,[j,b]=(0,n.useState)(""),[N,w]=(0,n.useState)(""),[A,k]=(0,n.useState)(!1),[T,O]=(0,n.useState)(null),C=(0,n.useMemo)(()=>(function(e){var t,a,s,n,r;if(!e)return{withOfficer:!1};if(e.travelWithOfficer||e.officerName||e.officerId||e.officerPhone)return{withOfficer:!0,name:e.officerName||void 0,id:e.officerId||void 0,phone:e.officerPhone||void 0};let i="".concat(null!=(n=null==e?void 0:e.officialDescription)?n:"","\n").concat(null!=(r=null==e?void 0:e.remarks)?r:""),l=/Travelling Officer:\s*([^\(\n,]+)?(?:\s*\(Employee ID:\s*([^)]+)\))?(?:,\s*Phone:\s*([^\s,]+))?/i.exec(i);return l?{withOfficer:!0,name:null==(t=l[1])?void 0:t.trim(),id:null==(a=l[2])?void 0:a.trim(),phone:null==(s=l[3])?void 0:s.trim()}:{withOfficer:!1}})(r),[r]);if(!a||!r)return null;let I=j.trim().length>0&&N.trim().length>0&&!A,R=async()=>{if(!I)return void O("Add remarks and your account password.");k(!0),O(null);try{await Promise.resolve(l(j.trim(),N))}finally{k(!1)}},q=async()=>{if(!I)return void O("Add remarks and your account password.");k(!0),O(null);try{await Promise.resolve(d(j.trim(),N))}finally{k(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-4",onClick:i,onKeyDown:e=>{"Escape"===e.key&&i()},role:"dialog","aria-modal":"true",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 border-b bg-orange-50",children:[(0,s.jsxs)("h3",{className:"font-bold text-orange-900 flex items-center gap-2",children:["Review Request • ",r.requestCode,(0,s.jsx)("span",{className:"ml-2",children:(t=r.status,(0,s.jsx)("span",{className:"inline-block text-[11px] px-1.5 py-[2px] rounded bg-orange-100 text-orange-800 leading-none",children:t}))})]}),(0,s.jsx)("button",{className:"p-2 rounded hover:bg-orange-100",onClick:i,"aria-label":"Close",children:(0,s.jsx)(o.A,{size:18})})]}),(0,s.jsxs)("div",{className:"p-5 space-y-4 text-sm",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(c.A,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Applicant"}),(0,s.jsxs)("div",{className:"text-orange-900",children:[r.applicantName," (",r.employeeId,")"]}),(0,s.jsx)("div",{className:"text-orange-700/80",children:r.department||"-"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(u,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Applied"}),(0,s.jsx)("div",{className:"text-orange-900",children:(e=>{var t,a,s;let n;if(!e)return"-";let r=null!=(a=null!=(t=e.appliedDate)?t:e.applied_on)?a:e.appliedOn,i=null!=(s=e.appliedTime)?s:e.applied_time;if(r&&i)return"".concat(r," ").concat(i);if(r&&e.createdAt){let t=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(r," ").concat(t)}return e.createdAt?(n=e.createdAt)?new Date(n).toLocaleString():"-":"-"})(r)})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(c.A,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Travelling Officer"}),C.withOfficer?(0,s.jsxs)("div",{className:"text-orange-900",children:[C.name||"-"," ",C.id?(0,s.jsxs)("span",{className:"text-orange-700/80",children:["(",C.id,")"]}):null,C.phone?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 ml-2 text-orange-700/80",children:[(0,s.jsx)(m.A,{size:14}),C.phone]}):null]}):(0,s.jsx)("div",{className:"text-orange-700/80",children:"—"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(p.A,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Date / Time"}),(0,s.jsxs)("div",{className:"text-orange-900",children:[r.dateOfTravel," • ",r.timeFrom," – ",r.timeTo," ",r.overnight?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-[12px] text-orange-700",children:[(0,s.jsx)(h.A,{size:12}),"overnight"]}):null]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(x.A,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Route"}),(0,s.jsxs)("div",{className:"text-orange-900",children:[r.fromLocation," → ",r.toLocation]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsx)(g,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Assignment"}),(0,s.jsxs)("div",{className:"text-orange-900",children:[r.assignedVehicleNumber||"—",r.assignedDriverName?(0,s.jsxs)("span",{className:"text-orange-700/80",children:[" ","• ",r.assignedDriverName,r.assignedDriverPhone?" (".concat(r.assignedDriverPhone,")"):""]}):null]})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex gap-2 items-start",children:[(0,s.jsx)(v.A,{className:"text-orange-600 mt-0.5",size:18}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold",children:"Purpose / Goods"}),(0,s.jsx)("div",{className:"text-orange-900 whitespace-pre-wrap",children:r.officialDescription||"-"}),(0,s.jsx)("div",{className:"text-orange-700/80",children:r.goods||"-"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:"Remarks (required)"}),(0,s.jsx)("textarea",{className:"w-full border border-orange-200 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-orange-300",rows:3,value:j,onChange:e=>b(e.target.value),placeholder:"Short note for your approval/rejection",autoFocus:!0}),!j.trim()&&(0,s.jsx)("div",{className:"text-[12px] text-red-600 mt-1",children:"Please enter a short remark."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-800 mb-1",children:"Account password (required)"}),(0,s.jsx)("input",{type:"password",className:"w-full border border-orange-200 rounded px-3 py-2 focus:outline-none focus:ring-1 focus:ring-orange-300",value:N,onChange:e=>w(e.target.value),placeholder:"Re-enter your password"}),!N.trim()&&(0,s.jsx)("div",{className:"text-[12px] text-red-600 mt-1",children:"Password is required to continue."}),T?(0,s.jsx)("div",{className:"text-[12px] text-red-600 mt-1",children:T}):null]})]}),(0,s.jsxs)("div",{className:"px-5 py-3 border-t bg-orange-50 flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded border",onClick:i,disabled:A,children:"Cancel"}),(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-red-600 text-white disabled:opacity-60",disabled:!I,onClick:q,children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)(f.A,{size:16}),"Reject"]})}),(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-green-600 text-white disabled:opacity-60",disabled:!I,onClick:R,children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)(y.A,{size:16}),"Approve"]})})]})]})})}var b=a(38094),N=a(12008),w=a(89559),A=a(309),k=a(18154),T=a(68209);let O=e=>e?new Date(e).toLocaleString():"—",C=e=>{let t=(null==e?void 0:e.appliedDate)||(null==e?void 0:e.applied_at)||(null==e?void 0:e.appliedOn),a=(null==e?void 0:e.appliedTime)||(null==e?void 0:e.applied_time);if(t&&a)return"".concat(t," ").concat(a);if(t&&(null==e?void 0:e.createdAt)){let a=new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return"".concat(t," ").concat(a)}return(null==e?void 0:e.createdAt)?O(e.createdAt):"—"},I=e=>(null!=e?e:"").replace(/[^\d+()\-\s./;]/g,"").replace(/^[;,\s-]+/,"").replace(/\s{2,}/g," ").trim();function R(e){var t;let a=String(null!=(t=null==e?void 0:e.officialDescription)?t:"").split(/\r?\n/).filter(e=>!/travell?ing\s+officer\s*:/i.test(e)).join("\n");return(a=(a=a.replace(/\b(?:Phone|Tel)\s*:\s*[\+\d()\-\s./;]+/gi,"")).replace(/\s{2,}/g," ").replace(/\s+(,|\.)/g,"$1").replace(/^[\s\-–,:]+/,"").trim())||"—"}function q(e){var t,a;if((null==e?void 0:e.travelWithOfficer)||(null==e?void 0:e.officerName)||(null==e?void 0:e.officerId)||(null==e?void 0:e.officerPhone))return{withOfficer:!0,name:e.officerName||void 0,id:e.officerId||void 0,phone:I(e.officerPhone)||void 0};let s="".concat((null==e?void 0:e.officialDescription)||"","\n").concat((null==e?void 0:e.remarks)||""),n=/Travelling Officer:\s*([^\(\n,]+)?(?:\s*\((?:Employee\s*ID|Emp\.?\s*ID|ID)\s*:\s*([^)]+)\))?(?:,\s*(?:Phone|Tel)\s*:\s*([^\n]+))?/i.exec(s);return n?{withOfficer:!0,name:(null==(t=n[1])?void 0:t.trim())||void 0,id:(null==(a=n[2])?void 0:a.trim())||void 0,phone:I(n[3])||void 0}:{withOfficer:!1}}function P(e){var t;let a=document.createElement("iframe");Object.assign(a.style,{position:"fixed",right:"0",bottom:"0",width:"0",height:"0",border:"0"}),document.body.appendChild(a);let s=null==(t=a.contentWindow)?void 0:t.document;if(!s)return void document.body.removeChild(a);s.open(),s.write(e),s.close(),a.onload=()=>{try{var e,t;null==(e=a.contentWindow)||e.focus(),null==(t=a.contentWindow)||t.print()}catch(e){}setTimeout(()=>{try{document.body.removeChild(a)}catch(e){}},1200)}}let S=["12%","17%","8%","12%","15%","13%","13%","10%"];function D(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[p,h]=(0,n.useState)(!0),[x,g]=(0,n.useState)(null),v=(0,n.useCallback)(async()=>{h(!0),g(null);try{let e=await (0,i.iv)("PENDING_HOD");t(e||[])}catch(e){console.warn("Failed to load pending HOD list",e),g((null==e?void 0:e.message)||"Unable to load pending requests right now."),t([])}finally{h(!1)}},[]);(0,n.useEffect)(()=>{v()},[v]);let f=(0,n.useMemo)(()=>{let t=a.trim().toLowerCase();return t?e.filter(e=>{let a=q(e);return[null==e?void 0:e.requestCode,null==e?void 0:e.status,null==e?void 0:e.applicantName,null==e?void 0:e.employeeId,null==e?void 0:e.department,null==e?void 0:e.fromLocation,null==e?void 0:e.toLocation,null==e?void 0:e.dateOfTravel,null==e?void 0:e.timeFrom,null==e?void 0:e.timeTo,null==e?void 0:e.officialDescription,null==e?void 0:e.goods,a.name,a.id,a.phone,C(e)].map(e=>(null!=e?e:"").toString().toLowerCase()).join(" ").includes(t)}):e},[e,a]),y=()=>localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||"",I=async(e,t)=>{var a,s;if(c)try{let s=y();if(!s||!t.trim())throw Error("Missing credentials; please re-enter password.");await (0,T.iD)({username:s,password:t}),await (0,i.Lh)(c.id,e),null===N.oR||void 0===N.oR||null==(a=N.oR.success)||a.call(N.oR,"Approved & sent to Management"),d(null),v()}catch(e){null===N.oR||void 0===N.oR||null==(s=N.oR.error)||s.call(N.oR,(null==e?void 0:e.message)||"Failed to approve")}},D=async(e,t)=>{var a,s;if(c)try{let s=y();if(!s||!t.trim())throw Error("Missing credentials; please re-enter password.");await (0,T.iD)({username:s,password:t}),await (0,i.bk)(c.id,e),null===N.oR||void 0===N.oR||null==(a=N.oR.success)||a.call(N.oR,"Request rejected"),d(null),v()}catch(e){null===N.oR||void 0===N.oR||null==(s=N.oR.error)||s.call(N.oR,(null==e?void 0:e.message)||"Failed to reject")}},E=(0,n.useCallback)(()=>{let e=f.map(e=>{let t=q(e);return'\n<tr>\n  <td><div class="rq">'.concat(e.requestCode||"",'</div><div class="sub">').concat(C(e),"</div></td>\n  <td>").concat(e.applicantName||"",' <span class="sub">(').concat(e.employeeId||"",')</span><div class="sub">').concat(e.department||"",'</div></td>\n  <td class="center">').concat(e.status||"","</td>\n  <td><div>").concat(e.dateOfTravel||"",'</div><div class="sub mono">').concat(e.timeFrom||""," – ").concat(e.timeTo||""," ").concat(e.overnight?"(overnight)":"","</div></td>\n  <td>").concat(e.fromLocation||""," → ").concat(e.toLocation||"","</td>\n  <td>").concat(t.withOfficer?"".concat(t.name||"-").concat(t.id?' <span class="sub">('.concat(t.id,")</span>"):"").concat(t.phone?", ".concat(t.phone):""):"—","</td>\n  <td><div>").concat(R(e),'</div><div class="sub">').concat(e.goods||"—","</div></td>\n</tr>")}).join("");P('<!DOCTYPE html>\n<html><head><meta charset="utf-8"/><title>Pending HOD — Print</title><meta name="viewport" content="width=device-width, initial-scale=1"/>\n<style>\n:root{--fg:#111;--muted:#666;--head:#faf5f0}*{box-sizing:border-box}\nbody{margin:0;padding:10mm;font-family:system-ui,Arial,sans-serif;color:var(--fg)}\nh3{margin:0 0 8px 0}.meta{margin:4px 0 8px 0;font-size:11px;color:var(--muted)}\ntable{width:100%;border-collapse:collapse;table-layout:fixed}thead{display:table-header-group}\nth,td{border:1px solid #ddd;padding:6px 8px;vertical-align:top;font-size:11px}th{background:var(--head);text-align:left}\n.center{text-align:center}.sub{color:var(--muted);font-size:10.5px}.mono{font-family:ui-monospace,Menlo,Consolas,monospace}\n.rq{font-weight:600;color:#8b4513}\ncol.c1{width:12%}col.c2{width:17%}col.c3{width:10%}col.c4{width:12%}col.c5{width:15%}col.c6{width:14%}col.c7{width:14%}\n@media print{@page{size:A4 landscape;margin:10mm}body{padding:0}}\n</style></head>\n<body>\n<h3>Pending Approvals — HOD</h3>\n<div class="meta">Results: '.concat(f.length,'</div>\n<table>\n  <colgroup><col class="c1"/><col class="c2"/><col class="c3"/><col class="c4"/><col class="c5"/><col class="c6"/><col class="c7"/></colgroup>\n  <thead><tr>\n    <th>RQ ID / Applied</th>\n    <th>Applicant / Dept</th>\n    <th class="center">Status</th>\n    <th>Travel</th>\n    <th>Route</th>\n    <th>Officer</th>\n    <th>Purpose / Goods</th>\n  </tr></thead>\n  <tbody>').concat(e||'<tr><td colspan="7">No data</td></tr>',"</tbody>\n</table>\n<script>addEventListener('load',()=>setTimeout(()=>{focus();print();},150));<\/script>\n</body></html>"))},[f]),z=(0,n.useCallback)(e=>{var t,a;let s=q(e);P('<!DOCTYPE html>\n<html><head><meta charset="utf-8"/><title>'.concat(e.requestCode||"Request",' — Print</title><meta name="viewport" content="width=device-width, initial-scale=1"/>\n<style>*{box-sizing:border-box}body{margin:0;padding:12mm;font-family:system-ui,Arial,sans-serif;color:#111}\nh2{margin:0 0 12px 0}.grid{display:grid;grid-template-columns:1fr 1fr;gap:8px 16px;font-size:12px}\n.block{margin:8px 0 2px;font-weight:600;color:#8b4513}.sub{color:#666;font-size:11px}\ntable{width:100%;border-collapse:collapse;margin-top:10px}th,td{border:1px solid #ddd;padding:6px 8px;font-size:12px;vertical-align:top}\nth{background:#faf5f0;text-align:left;width:34%}@media print{@page{size:A4 portrait;margin:10mm}body{padding:0}}</style></head>\n<body>\n  <h2>Transport Request • ').concat(e.requestCode||"",'</h2>\n  <div class="grid">\n    <div><div class="block">Applicant</div>').concat(e.applicantName||"",' <span class="sub">(').concat(e.employeeId||"",')</span></div>\n    <div><div class="block">Status</div>').concat(e.status||"",'</div>\n    <div><div class="block">Department</div>').concat(e.department||"",'</div>\n    <div><div class="block">Applied</div>').concat(C(e),'</div>\n    <div><div class="block">Travel</div>').concat(e.dateOfTravel||""," • ").concat(e.timeFrom||""," – ").concat(e.timeTo||""," ").concat(e.overnight?"(overnight)":"",'</div>\n    <div><div class="block">Route</div>').concat(e.fromLocation||""," → ").concat(e.toLocation||"","</div>\n  </div>\n  <table>\n    <tr><th>Official Trip Description</th><td>").concat(R(e),"</td></tr>\n    <tr><th>Goods being transported (if any)</th><td>").concat(e.goods||"—","</td></tr>\n    <tr><th>Officer</th><td>").concat(s.withOfficer?"".concat(s.name||"—").concat(s.id?" (".concat(s.id,")"):"").concat(s.phone?", ".concat(s.phone):""):"—","</td></tr>\n    <tr><th>Pickup</th><td>").concat(O(e.scheduledPickupAt),"</td></tr>\n    <tr><th>Return</th><td>").concat(O(e.scheduledReturnAt),"</td></tr>\n    <tr><th>Gate Exit • Odometer</th><td>").concat(O(e.gateExitAt)," • O ").concat(null!=(t=e.exitOdometer)?t:"—","</td></tr>\n    <tr><th>Gate Entry • Odometer</th><td>").concat(O(e.gateEntryAt)," • O ").concat(null!=(a=e.entryOdometer)?a:"—","</td></tr>\n  </table>\n  <script>addEventListener('load',()=>setTimeout(()=>{focus();print();},150));<\/script>\n</body></html>"))},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-2",children:[(0,s.jsx)("h1",{className:"text-[14px] md:text-lg font-bold text-orange-900",children:"Pending Approvals"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full md:w-auto md:flex-row md:items-center",children:[(0,s.jsx)(b.A,{value:a,onChange:o,placeholder:"Search code, applicant, dept, route…",className:"w-full md:w-72"}),(0,s.jsxs)("button",{type:"button",onClick:v,disabled:p,className:"inline-flex items-center justify-center gap-1 px-3 h-11 md:h-10 rounded-lg border border-orange-200 text-orange-800 hover:bg-orange-50 text-xs font-semibold disabled:opacity-60",title:"Refresh from server",children:[(0,s.jsx)(w.A,{size:14,className:p?"animate-spin":""})," Refresh"]}),(0,s.jsxs)("button",{type:"button",onClick:E,className:"inline-flex items-center justify-center gap-1 px-3 h-11 md:h-10 rounded-lg bg-orange-600 text-white hover:bg-orange-700 text-xs font-semibold",title:"Print current list",children:[(0,s.jsx)(A.A,{size:14})," Print"]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-orange-200 overflow-auto",children:(0,s.jsxs)("table",{className:"w-full table-fixed text-[10.5px] leading-[1.15]",children:[(0,s.jsx)("colgroup",{children:S.map((e,t)=>(0,s.jsx)("col",{style:{width:e}},t))}),(0,s.jsx)("thead",{className:"bg-orange-50",children:(0,s.jsxs)("tr",{className:"text-[9.5px]",children:[(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"RQ ID / Applied"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Applicant / Dept"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-center",children:"Status"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Travel"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Route"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Officer"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-left",children:"Purpose / Goods"}),(0,s.jsx)(l.Th,{className:"px-2 py-1 text-center",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"divide-y",children:[p&&(0,s.jsx)("tr",{children:(0,s.jsx)(l.Td,{colSpan:8,className:"px-2 py-6 text-center text-gray-500",children:"Loading…"})}),!p&&!x&&f.map(e=>{var t,a,n;let r,i=q(e),o=String(null!=(a=null!=(t=null==e?void 0:e.id)?t:null==e?void 0:e.requestCode)?a:"".concat(null==e?void 0:e.employeeId,"-").concat(null==e?void 0:e.dateOfTravel,"-").concat(null==e?void 0:e.timeFrom));return(0,s.jsxs)("tr",{className:"align-top hover:bg-orange-50/40 cursor-pointer",onClick:()=>m(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),m(e))},role:"button",tabIndex:0,title:"Click for full details",children:[(0,s.jsxs)(l.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,s.jsx)("div",{className:"font-semibold text-orange-900 truncate",children:e.requestCode||"—"}),(0,s.jsx)("div",{className:"text-[9px] text-gray-600 truncate",children:C(e)})]}),(0,s.jsxs)(l.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("span",{className:"font-medium text-orange-900",children:e.applicantName||"—"})," ",(0,s.jsxs)("span",{className:"text-gray-600 text-[9px]",children:["(",e.employeeId||"—",")"]})]}),(0,s.jsx)("div",{className:"text-[9px] text-gray-700 truncate",children:e.department||"—"})]}),(0,s.jsx)(l.Td,{className:"px-2 py-1 text-center",children:(r=e.status,(0,s.jsx)("span",{className:"inline-block text-[10px] px-1.5 py-[2px] rounded bg-orange-100 text-orange-800 leading-none",children:r}))}),(0,s.jsxs)(l.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,s.jsx)("div",{className:"truncate",children:e.dateOfTravel||"—"}),(0,s.jsxs)("div",{className:"text-[9px] text-gray-600",children:[(0,s.jsx)("span",{className:"font-mono",children:e.timeFrom||"—"}),"–",(0,s.jsx)("span",{className:"font-mono",children:e.timeTo||"—"})," ",e.overnight?"(overnight)":""]})]}),(0,s.jsx)(l.Td,{className:"px-2 py-1 whitespace-normal",children:(0,s.jsxs)("div",{className:"truncate",children:[e.fromLocation||"—"," → ",e.toLocation||"—"]})}),(0,s.jsx)(l.Td,{className:"px-2 py-1 whitespace-normal",children:i.withOfficer?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"truncate",children:[null!=(n=i.name)?n:"—",i.id?(0,s.jsxs)("span",{className:"text-[9px] text-gray-600",children:[" (",i.id,")"]}):null]}),i.phone?(0,s.jsx)("div",{className:"text-[9px] text-gray-700 break-all",children:i.phone}):null]}):"—"}),(0,s.jsxs)(l.Td,{className:"px-2 py-1 whitespace-normal",children:[(0,s.jsx)("div",{className:"break-words break-all",children:R(e)}),(0,s.jsx)("div",{className:"text-[9px] text-gray-700",children:e.goods||"—"})]}),(0,s.jsx)(l.Td,{className:"px-2 py-1 text-center whitespace-nowrap",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1.5",children:[(0,s.jsxs)("button",{type:"button",className:"inline-flex items-center gap-1 px-2 py-[4px] rounded bg-blue-600 text-white hover:bg-blue-700 text-[10px]",onClick:()=>d(e),title:"Review / Approve / Reject",children:[(0,s.jsx)(k.A,{size:12})," Review"]}),(0,s.jsx)("button",{type:"button",className:"inline-flex items-center justify-center px-2 py-[4px] rounded bg-orange-600 text-white hover:bg-orange-700 text-[10px]",onClick:()=>z(e),title:"Print this request",children:(0,s.jsx)(A.A,{size:12})})]})})]},o)}),!p&&!x&&!f.length&&(0,s.jsx)("tr",{children:(0,s.jsx)(l.Td,{colSpan:8,className:"px-2 py-6 text-center text-gray-500",children:"No pending requests"})}),!p&&x&&(0,s.jsx)("tr",{children:(0,s.jsx)(l.Td,{colSpan:8,className:"px-2 py-6 text-center text-red-600 text-[12px]",children:x})})]})]})}),(0,s.jsx)(j,{open:!!c,request:c,onClose:()=>d(null),onApprove:I,onReject:D}),u?(0,r.createPortal)((0,s.jsx)(M,{request:u,onClose:()=>m(null)}),document.body):null]})}function M(e){var t,a;let{request:n,onClose:r}=e,i=q(n);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40 grid place-items-center z-50 p-3",onClick:r,"aria-modal":!0,role:"dialog",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b bg-orange-50",children:[(0,s.jsxs)("h3",{className:"font-bold text-orange-900 text-[13px]",children:["Request • ",n.requestCode]}),(0,s.jsx)("button",{className:"p-1 rounded hover:bg-orange-100",onClick:r,"aria-label":"Close",children:(0,s.jsx)(o.A,{size:16})})]}),(0,s.jsx)("div",{className:"p-4 text-[12px] leading-tight space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Applicant & Department"}),(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("span",{className:"font-medium text-orange-900",children:"Applicant Name:"})," ",n.applicantName,(0,s.jsxs)("span",{className:"text-gray-600 text-[11px]",children:[" (",n.employeeId,")"]})]}),(0,s.jsxs)("div",{className:"truncate",children:[(0,s.jsx)("span",{className:"font-medium",children:"Department:"})," ",n.department||"—"]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Status"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Status:"})," ",n.status]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Applied:"})," ",C(n)]}),(0,s.jsxs)("div",{className:"text-[11px] text-gray-600 mt-1",children:["Created ",O(n.createdAt),n.updatedAt?" • Updated ".concat(O(n.updatedAt)):""]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Date & Time"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Date of Travel:"})," ",n.dateOfTravel]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Time From:"})," ",n.timeFrom||"—"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Time To:"})," ",n.timeTo||"—"," ",n.overnight?"(overnight)":""]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Route"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"From Location:"})," ",n.fromLocation]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"To Location:"})," ",n.toLocation]})]}),(0,s.jsxs)("section",{className:"md:col-span-2 border border-orange-100 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-2",children:"Official Trip Description / Goods"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600",children:"Official Trip Description"}),(0,s.jsx)("div",{className:"text-orange-900 break-words break-all",children:R(n)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600",children:"Goods being transported (if any)"}),(0,s.jsx)("div",{className:"text-orange-800/90 break-words",children:n.goods||"—"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600",children:"Travelling with Officer"}),(0,s.jsx)("div",{children:n.travelWithOfficer||i.withOfficer?"Yes":"No"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600",children:"Officer"}),(0,s.jsx)("div",{className:"break-words break-all",children:i.withOfficer?(0,s.jsxs)(s.Fragment,{children:[i.name||"—"," ",i.id?(0,s.jsxs)("span",{className:"text-[11px] text-gray-600",children:["(",i.id,")"]}):null,i.phone?", ".concat(i.phone):""]}):"—"})]})]})]})]}),(0,s.jsxs)("section",{className:"md:col-span-2",children:[(0,s.jsx)("div",{className:"text-orange-800 font-semibold mb-1",children:"Gate / Trip"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Pickup:"})," ",O(n.scheduledPickupAt)," • ",(0,s.jsx)("b",{children:"Return:"})," ",O(n.scheduledReturnAt)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Exit:"})," ",O(n.gateExitAt)," • ",(0,s.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(t=n.exitOdometer)?t:"—"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("b",{children:"Entry:"})," ",O(n.gateEntryAt)," • ",(0,s.jsxs)("span",{className:"text-[11px] text-gray-600",children:["O ",null!=(a=n.entryOdometer)?a:"—"]})]})]})]})})]})})}},78874:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},81242:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,I:()=>c});var s=a(95125),n=a(95704);let r=(n.env.NEXT_PUBLIC_TRANSPORT_BASE||"").replace(/\/$/,""),i=Math.min(Number(n.env.NEXT_PUBLIC_TRANSPORT_TIMEOUT)||1e4,15e3),l=s.A.create({baseURL:r?"".concat(r,"/api"):"/tapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:i}),o=l;function c(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}l.interceptors.request.use(e=>{{var t,a;let s=localStorage.getItem("username")||localStorage.getItem("actor")||localStorage.getItem("employeeId")||void 0;s&&(e.headers=null!=(t=e.headers)?t:{},e.headers["X-Actor"]=s);let n=localStorage.getItem("role")||void 0;n&&(e.headers=null!=(a=e.headers)?a:{},e.headers["X-Role"]=n)}return e}),l.interceptors.response.use(e=>e,e=>{let t=null==e?void 0:e.code,a=((null==e?void 0:e.message)||"").toLowerCase();if("ECONNABORTED"===t||a.includes("timeout")){var s,n,r,i;return console.warn("Transport API timeout – returning empty response"),Promise.resolve({status:null!=(r=null==(s=e.response)?void 0:s.status)?r:0,statusText:"Request Timeout",data:null,headers:null!=(i=null==(n=e.response)?void 0:n.headers)?i:{},config:e.config,request:e.request})}return Promise.reject(e)})},86651:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},89559:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},89715:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},99265:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]])},99947:(e,t,a)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5;try{let a=window.sessionStorage.getItem(e);if(!a)return null;let s=JSON.parse(a);if(!(null==s?void 0:s.data)||!(null==s?void 0:s.ts))return null;if(Date.now()-s.ts>t)return window.sessionStorage.removeItem(e),null;return s.data}catch(e){return null}}function n(e,t){try{if(null===t)return void window.sessionStorage.removeItem(e);let a={data:t,ts:Date.now()};window.sessionStorage.setItem(e,JSON.stringify(a))}catch(e){}}a.d(t,{a:()=>n,x:()=>s})}},e=>{e.O(0,[5125,970,8441,1255,7358],()=>e(e.s=39634)),_N_E=e.O()}]);