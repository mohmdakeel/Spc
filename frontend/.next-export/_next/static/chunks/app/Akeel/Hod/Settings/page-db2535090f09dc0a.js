(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{8618:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(95155),r=a(12115),l=a(85998),n=a(76907),o=a(37494),i=a(59427),d=a(46046),c=a(37621);function u(){let[e,t]=(0,r.useState)(!0),[a,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!0),[x,p]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!0),[w,v]=(0,r.useState)(null),[k,N]=(0,r.useState)(null),[A,C]=(0,r.useState)(null),[S,E]=(0,r.useState)("light");(0,r.useEffect)(()=>{let e=localStorage.getItem("workspace-theme")||"light";E(e),P(e)},[]);let P=e=>{if("undefined"==typeof document)return;let t=document.documentElement;"dark"===e?t.classList.add("hod-dark"):t.classList.remove("hod-dark")};(0,r.useEffect)(()=>{(async()=>{j(!0),N(null);try{let{data:e}=await c.A.get("/hod/settings");t(!!e.notifyEmail),u(!!e.notifySms),g(!!e.autoEscalate),p(!!e.twoFactor),C(e.updatedAt?new Date(e.updatedAt).toLocaleString():null)}catch(t){var e,a,s;N(null!=(s=null==t||null==(a=t.response)||null==(e=a.data)?void 0:e.message)?s:"Failed to load HOD settings.")}finally{j(!1)}})()},[]);let L=async()=>{b(!0),v(null),N(null);try{let{data:t}=await c.A.put("/hod/settings",{notifyEmail:e,notifySms:a,autoEscalate:m,twoFactor:x});C(t.updatedAt?new Date(t.updatedAt).toLocaleString():null),v("Preferences updated successfully.")}catch(e){var t,s,r;N(null!=(r=null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.message)?r:"Failed to save preferences.")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("header",{children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wide",children:"Preferences"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-orange-900",children:"HOD Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Control how you receive transport workflow notifications and manage approval defaults."})]}),y?(0,s.jsx)("div",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-6 text-sm text-gray-500",children:"Loading preferences..."}):(0,s.jsxs)(s.Fragment,{children:[k&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg text-sm",children:k}),w&&(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-lg text-sm",children:w}),A&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Last updated: ",(0,s.jsx)("span",{className:"font-medium text-orange-800",children:A})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,s.jsxs)("section",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"text-orange-500",size:18}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-orange-900",children:"Notifications"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-sm text-gray-700",children:[(0,s.jsxs)("label",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Email alerts"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Daily summary of pending approvals"})]}),(0,s.jsx)(h,{checked:e,onChange:t,disabled:f||y})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"SMS for urgent requests"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Only triggered when travel is within 12 hours"})]}),(0,s.jsx)(h,{checked:a,onChange:u,disabled:f||y})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Auto escalate if idle"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Escalate to management if pending more than 24h"})]}),(0,s.jsx)(h,{checked:m,onChange:g,disabled:f||y})]})]})]}),(0,s.jsxs)("section",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.A,{className:"text-orange-500",size:18}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-orange-900",children:"Security"})]}),(0,s.jsxs)("div",{className:"space-y-4 text-sm text-gray-700",children:[(0,s.jsxs)("label",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Two-factor approval"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Require OTP before forwarding high value trips"})]}),(0,s.jsx)(h,{checked:x,onChange:p,disabled:f||y})]}),(0,s.jsx)("button",{type:"button",className:"w-full border border-orange-300 text-orange-700 rounded-lg py-2 text-sm font-medium hover:bg-orange-50 transition",children:"Update approval PIN"})]})]})]}),(0,s.jsxs)("section",{className:"bg-white rounded-2xl border border-orange-200 shadow-sm p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["dark"===S?(0,s.jsx)(o.A,{className:"text-orange-500",size:18}):(0,s.jsx)(i.A,{className:"text-orange-500",size:18}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-orange-900",children:"Appearance"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Switch between light and dark themes. Preference is stored on this device and applies to every HOD page."}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{E("light"),localStorage.setItem("workspace-theme","light"),P("light")},className:"flex-1 rounded-lg border px-4 py-2 text-sm font-semibold transition ".concat("light"===S?"bg-orange-600 text-white border-orange-600 shadow":"border-orange-200 text-orange-800 hover:bg-orange-50"),children:"Light"}),(0,s.jsx)("button",{type:"button",onClick:()=>{E("dark"),localStorage.setItem("workspace-theme","dark"),P("dark")},className:"flex-1 rounded-lg border px-4 py-2 text-sm font-semibold transition ".concat("dark"===S?"bg-orange-600 text-white border-orange-600 shadow":"border-orange-200 text-orange-800 hover:bg-orange-50"),children:"Dark"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e="dark"===S?"light":"dark";E(e),localStorage.setItem("workspace-theme",e),P(e)},className:"rounded-lg border border-orange-200 px-4 py-2 text-sm font-semibold text-orange-700 hover:bg-orange-50",children:"Toggle"})]})]}),(0,s.jsx)("div",{className:"pt-2 flex justify-end",children:(0,s.jsxs)("button",{type:"button",onClick:L,disabled:f||y,className:"inline-flex items-center gap-2 bg-orange-600 text-white px-5 py-2 rounded-lg text-sm font-semibold hover:bg-orange-700 disabled:bg-orange-400",children:[(0,s.jsx)(d.A,{size:16}),f?"Saving…":"Save preferences"]})})]})}function h(e){let{checked:t,onChange:a,disabled:r=!1}=e;return(0,s.jsx)("button",{type:"button",role:"switch","aria-checked":t,"aria-disabled":r,onClick:()=>!r&&a(!t),className:["w-12 h-6 rounded-full border transition-all duration-200 flex items-center",r?"opacity-50 cursor-not-allowed":"",t?"bg-orange-500 border-orange-500":"bg-gray-200 border-gray-300"].join(" "),children:(0,s.jsx)("span",{className:["inline-block w-5 h-5 rounded-full bg-white shadow transform transition-all duration-200",t?"translate-x-6":"translate-x-1"].join(" ")})})}},17556:(e,t,a)=>{Promise.resolve().then(a.bind(a,8618))},37494:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},37621:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(95125),r=a(95704);let l=(r.env.NEXT_PUBLIC_AUTH_BASE||"").replace(/\/$/,""),n=Math.min(Number(r.env.NEXT_PUBLIC_API_TIMEOUT)||1e4,15e3),o=s.A.create({baseURL:l?"".concat(l,"/api"):"/aapi",withCredentials:!0,headers:{"Content-Type":"application/json"},timeout:n});o.interceptors.request.use(e=>e,e=>Promise.reject(e)),o.interceptors.response.use(e=>{let t=e.data;if((e=>!!(e&&"object"==typeof e&&"ok"in e))(t)){if(t.ok){var a;return e.data=Object.prototype.hasOwnProperty.call(t,"data")&&null!=(a=t.data)?a:null,e}let s=Error(t.message||"Request failed");return s.response={status:e.status,data:t},Promise.reject(s)}return e},e=>{var t,a,s,r,l;let n=null==(t=e.response)?void 0:t.status,o=e.code,i=((null==e?void 0:e.message)||"").toLowerCase();return 401===n?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.resolve({status:null!=n?n:0,statusText:"Unauthorized",data:null,headers:null!=(s=null==(a=e.response)?void 0:a.headers)?s:{},config:e.config,request:e.request})):403===n?(window.location.pathname.startsWith("/login")||(window.location.href="/login"),Promise.reject(e)):"ECONNABORTED"===o||i.includes("timeout")?(console.warn("API timeout – returning empty response to keep UI responsive"),Promise.resolve({status:null!=n?n:0,statusText:"Request Timeout",data:null,headers:null!=(l=null==(r=e.response)?void 0:r.headers)?l:{},config:e.config,request:e.request})):Promise.reject(e)});let i=o},46046:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},59427:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(12115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...h}=e;return(0,s.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:a,strokeWidth:i?24*Number(o)/Number(r):o,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:i,...d}=a;return(0,s.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...d})});return a.displayName=r(e),a}},76907:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},85998:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}},e=>{e.O(0,[5125,8441,1255,7358],()=>e(e.s=17556)),_N_E=e.O()}]);