(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3e3],{12108:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},15870:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},17910:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},20508:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},21873:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},24033:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},24947:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},29217:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(95155),s=a(12115),d=a(20063),c=a(12008),l=a(35626),i=a(5601),n=a(52669);function h(){let e=(0,d.useRouter)(),t=(0,d.useSearchParams)().get("id"),[a,h]=(0,s.useState)(!0),[o,y]=(0,s.useState)([]),[p,x]=(0,s.useState)(null);return(0,s.useEffect)(()=>{t&&(async()=>{try{h(!0);let e=await (0,n.ae)("ServiceCandidate",t);y(e)}catch(t){var e;c.oR.error(null!=(e=null==t?void 0:t.message)?e:"Failed to load candidate history")}finally{h(!1)}})()},[t]),(0,r.jsx)(i.A,{children:(0,r.jsx)("div",{className:"w-full min-h-screen bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-xl p-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-orange-600 hover:text-orange-800 p-2 rounded-lg hover:bg-orange-50",children:[(0,r.jsx)(l.A,{size:20}),"Back"]}),(0,r.jsxs)("h1",{className:"text-lg sm:text-xl font-bold text-gray-800",children:["Service Candidate History #",t]})]})}),a?(0,r.jsxs)("div",{className:"text-center py-10 text-gray-700",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 mb-3"}),"Loading history…"]}):0===o.length?(0,r.jsx)("p",{className:"text-center text-gray-600 py-10",children:"No history found for this candidate."}):(0,r.jsx)("div",{className:"overflow-x-auto border border-orange-100 rounded-lg shadow-sm",children:(0,r.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,r.jsx)("thead",{className:"bg-orange-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border px-3 py-1 text-xs font-semibold text-orange-800",children:"#"}),(0,r.jsx)("th",{className:"border px-3 py-1 text-xs font-semibold text-orange-800",children:"Action"}),(0,r.jsx)("th",{className:"border px-3 py-1 text-xs font-semibold text-orange-800",children:"Performed By"}),(0,r.jsx)("th",{className:"border px-3 py-1 text-xs font-semibold text-orange-800",children:"Timestamp"}),(0,r.jsx)("th",{className:"border px-3 py-1 text-xs font-semibold text-orange-800 text-center",children:"Details"})]})}),(0,r.jsx)("tbody",{children:o.map((e,t)=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("tr",{className:"text-gray-900 hover:bg-orange-50 transition-colors ".concat(p===e.id?"bg-orange-50":""),children:[(0,r.jsx)("td",{className:"border px-3 py-1 text-xs text-center",children:t+1}),(0,r.jsx)("td",{className:"border px-3 py-1 text-xs font-medium text-orange-800",children:e.action}),(0,r.jsx)("td",{className:"border px-3 py-1 text-xs",children:e.performedBy||"-"}),(0,r.jsx)("td",{className:"border px-3 py-1 text-xs",children:new Date(e.timestamp).toLocaleString()}),(0,r.jsx)("td",{className:"border px-3 py-1 text-xs text-center",children:(0,r.jsx)("button",{onClick:()=>{var t;x(p===(t=Number(e.id))?null:t)},className:"text-orange-600 hover:text-orange-800 underline text-xs",children:p===e.id?"Hide JSON":"View JSON"})})]}),p===e.id&&(0,r.jsx)("tr",{className:"bg-white",children:(0,r.jsx)("td",{colSpan:5,className:"border-t border-orange-100 px-3 py-2",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-800 mb-1",children:"Previous Data"}),(0,r.jsx)("pre",{className:"text-xs bg-gray-50 border border-gray-200 rounded-md p-2 overflow-x-auto whitespace-pre-wrap",children:e.previousData?JSON.stringify(e.previousData,null,2):"—"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-sm text-gray-800 mb-1",children:"New Data"}),(0,r.jsx)("pre",{className:"text-xs bg-gray-50 border border-gray-200 rounded-md p-2 overflow-x-auto whitespace-pre-wrap",children:e.newData?JSON.stringify(e.newData,null,2):"—"})]})]})})})]},e.id))})]})})]})})})}function o(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"p-4 text-sm text-gray-600",children:"Loading candidate history…"}),children:(0,r.jsx)(h,{})})}},29502:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]])},35626:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},38104:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]])},46398:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},50859:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},52669:(e,t,a)=>{"use strict";a.d(t,{ae:()=>d});var r=a(78447);let s=e=>{var t,a,r;return{id:e.id,entityType:"Vehicle"===e.entityType||"Driver"===e.entityType?e.entityType:"Vehicle",entityId:e.entityId,action:"Created"===e.action||"Updated"===e.action||"Deleted"===e.action?e.action:"Updated",previousData:null!=(t=e.previousJson)?t:null,newData:null!=(a=e.newJson)?a:null,performedBy:null!=(r=e.performedBy)?r:null,timestamp:e.timestamp}};async function d(e,t){let{data:a}=await r.A.get("/api/history/".concat(e,"/").concat(t));return(0,r.I)(a).map(s)}},53842:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},65993:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},71871:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},78447:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,I:()=>i});var r=a(95125),s=a(95704);let d="https://c7585f1b998c.ngrok-free.app".replace(/\/$/,""),c=Math.min(Number(s.env.NEXT_PUBLIC_API_TIMEOUT)||1e4,15e3),l=r.A.create({baseURL:d?"".concat(d,"/api"):"/api",headers:{"Content-Type":"application/json"},timeout:c});function i(e){if(e&&"object"==typeof e&&"ok"in e){if(!1===e.ok)throw Error(e.message||"Request failed");return e.data}return e}},83581:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("file-digit",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["rect",{width:"4",height:"6",x:"2",y:"12",rx:"2",key:"jm304g"}],["path",{d:"M10 12h2v6",key:"12zw74"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},84926:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},86956:(e,t,a)=>{Promise.resolve().then(a.bind(a,29217))},87066:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},87454:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},89715:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},91169:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},91811:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]])}},e=>{e.O(0,[5125,970,6394,5601,8441,1255,7358],()=>e(e.s=86956)),_N_E=e.O()}]);